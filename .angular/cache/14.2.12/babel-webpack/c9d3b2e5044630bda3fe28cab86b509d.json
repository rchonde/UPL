{"ast":null,"code":"module.exports = function (list) {\n  var item, text, columns, searchString, customSearch;\n  var prepare = {\n    resetList: function () {\n      list.i = 1;\n      list.templater.clear();\n      customSearch = undefined;\n    },\n    setOptions: function (args) {\n      if (args.length == 2 && args[1] instanceof Array) {\n        columns = args[1];\n      } else if (args.length == 2 && typeof args[1] == \"function\") {\n        columns = undefined;\n        customSearch = args[1];\n      } else if (args.length == 3) {\n        columns = args[1];\n        customSearch = args[2];\n      } else {\n        columns = undefined;\n      }\n    },\n    setColumns: function () {\n      if (list.items.length === 0) return;\n\n      if (columns === undefined) {\n        columns = list.searchColumns === undefined ? prepare.toArray(list.items[0].values()) : list.searchColumns;\n      }\n    },\n    setSearchString: function (s) {\n      s = list.utils.toString(s).toLowerCase();\n      s = s.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, \"\\\\$&\"); // Escape regular expression characters\n\n      searchString = s;\n    },\n    toArray: function (values) {\n      var tmpColumn = [];\n\n      for (var name in values) {\n        tmpColumn.push(name);\n      }\n\n      return tmpColumn;\n    }\n  };\n  var search = {\n    list: function () {\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        search.item(list.items[k]);\n      }\n    },\n    item: function (item) {\n      item.found = false;\n\n      for (var j = 0, jl = columns.length; j < jl; j++) {\n        if (search.values(item.values(), columns[j])) {\n          item.found = true;\n          return;\n        }\n      }\n    },\n    values: function (values, column) {\n      if (values.hasOwnProperty(column)) {\n        text = list.utils.toString(values[column]).toLowerCase();\n\n        if (searchString !== \"\" && text.search(searchString) > -1) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    reset: function () {\n      list.reset.search();\n      list.searched = false;\n    }\n  };\n\n  var searchMethod = function (str) {\n    list.trigger('searchStart');\n    prepare.resetList();\n    prepare.setSearchString(str);\n    prepare.setOptions(arguments); // str, cols|searchFunction, searchFunction\n\n    prepare.setColumns();\n\n    if (searchString === \"\") {\n      search.reset();\n    } else {\n      list.searched = true;\n\n      if (customSearch) {\n        customSearch(searchString, columns);\n      } else {\n        search.list();\n      }\n    }\n\n    list.update();\n    list.trigger('searchComplete');\n    return list.visibleItems;\n  };\n\n  list.handlers.searchStart = list.handlers.searchStart || [];\n  list.handlers.searchComplete = list.handlers.searchComplete || [];\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'keyup', function (e) {\n    var target = e.target || e.srcElement,\n        // IE have srcElement\n    alreadyCleared = target.value === \"\" && !list.searched;\n\n    if (!alreadyCleared) {\n      // If oninput already have resetted the list, do nothing\n      searchMethod(target.value);\n    }\n  }); // Used to detect click on HTML5 clear button\n\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'input', function (e) {\n    var target = e.target || e.srcElement;\n\n    if (target.value === \"\") {\n      searchMethod('');\n    }\n  });\n  return searchMethod;\n};","map":{"version":3,"names":["module","exports","list","item","text","columns","searchString","customSearch","prepare","resetList","i","templater","clear","undefined","setOptions","args","length","Array","setColumns","items","searchColumns","toArray","values","setSearchString","s","utils","toString","toLowerCase","replace","tmpColumn","name","push","search","k","kl","found","j","jl","column","hasOwnProperty","reset","searched","searchMethod","str","trigger","arguments","update","visibleItems","handlers","searchStart","searchComplete","events","bind","getByClass","listContainer","searchClass","e","target","srcElement","alreadyCleared","value"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/list.js/src/search.js"],"sourcesContent":["module.exports = function(list) {\n  var item,\n    text,\n    columns,\n    searchString,\n    customSearch;\n\n  var prepare = {\n    resetList: function() {\n      list.i = 1;\n      list.templater.clear();\n      customSearch = undefined;\n    },\n    setOptions: function(args) {\n      if (args.length == 2 && args[1] instanceof Array) {\n        columns = args[1];\n      } else if (args.length == 2 && typeof(args[1]) == \"function\") {\n        columns = undefined;\n        customSearch = args[1];\n      } else if (args.length == 3) {\n        columns = args[1];\n        customSearch = args[2];\n      } else {\n        columns = undefined;\n      }\n    },\n    setColumns: function() {\n      if (list.items.length === 0) return;\n      if (columns === undefined) {\n        columns = (list.searchColumns === undefined) ? prepare.toArray(list.items[0].values()) : list.searchColumns;\n      }\n    },\n    setSearchString: function(s) {\n      s = list.utils.toString(s).toLowerCase();\n      s = s.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, \"\\\\$&\"); // Escape regular expression characters\n      searchString = s;\n    },\n    toArray: function(values) {\n      var tmpColumn = [];\n      for (var name in values) {\n        tmpColumn.push(name);\n      }\n      return tmpColumn;\n    }\n  };\n  var search = {\n    list: function() {\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        search.item(list.items[k]);\n      }\n    },\n    item: function(item) {\n      item.found = false;\n      for (var j = 0, jl = columns.length; j < jl; j++) {\n        if (search.values(item.values(), columns[j])) {\n          item.found = true;\n          return;\n        }\n      }\n    },\n    values: function(values, column) {\n      if (values.hasOwnProperty(column)) {\n        text = list.utils.toString(values[column]).toLowerCase();\n        if ((searchString !== \"\") && (text.search(searchString) > -1)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    reset: function() {\n      list.reset.search();\n      list.searched = false;\n    }\n  };\n\n  var searchMethod = function(str) {\n    list.trigger('searchStart');\n\n    prepare.resetList();\n    prepare.setSearchString(str);\n    prepare.setOptions(arguments); // str, cols|searchFunction, searchFunction\n    prepare.setColumns();\n\n    if (searchString === \"\" ) {\n      search.reset();\n    } else {\n      list.searched = true;\n      if (customSearch) {\n        customSearch(searchString, columns);\n      } else {\n        search.list();\n      }\n    }\n\n    list.update();\n    list.trigger('searchComplete');\n    return list.visibleItems;\n  };\n\n  list.handlers.searchStart = list.handlers.searchStart || [];\n  list.handlers.searchComplete = list.handlers.searchComplete || [];\n\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'keyup', function(e) {\n    var target = e.target || e.srcElement, // IE have srcElement\n      alreadyCleared = (target.value === \"\" && !list.searched);\n    if (!alreadyCleared) { // If oninput already have resetted the list, do nothing\n      searchMethod(target.value);\n    }\n  });\n\n  // Used to detect click on HTML5 clear button\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'input', function(e) {\n    var target = e.target || e.srcElement;\n    if (target.value === \"\") {\n      searchMethod('');\n    }\n  });\n\n  return searchMethod;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}