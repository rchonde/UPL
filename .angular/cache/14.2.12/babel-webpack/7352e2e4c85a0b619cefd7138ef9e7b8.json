{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.base.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { ensureDefined, deferRenderer, noop } from \"../../core/utils/common\";\nimport { findTemplates } from \"../../core/utils/template_manager\";\nimport { getPublicElement } from \"../../core/element\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { isPlainObject, isFunction, isDefined } from \"../../core/utils/type\";\nimport { when } from \"../../core/utils/deferred\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport Action from \"../../core/action\";\nimport Guid from \"../../core/guid\";\nimport Widget from \"../widget/ui.widget\";\nimport { addNamespace, isCommandKeyPressed } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport DataHelperMixin from \"../../data_helper\";\nimport CollectionWidgetItem from \"./item\";\nimport { focusable } from \"../widget/selectors\";\nimport messageLocalization from \"../../localization/message\";\nimport holdEvent from \"../../events/hold\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport { name as clickEventName } from \"../../events/click\";\nimport { name as contextMenuEventName } from \"../../events/contextmenu\";\nimport { BindableTemplate } from \"../../core/templates/bindable_template\";\nvar COLLECTION_CLASS = \"dx-collection\";\nvar ITEM_CLASS = \"dx-item\";\nvar CONTENT_CLASS_POSTFIX = \"-content\";\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nvar ITEM_DATA_KEY = \"dxItemData\";\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_PAGE_UP = \"pageup\";\nvar FOCUS_PAGE_DOWN = \"pagedown\";\nvar FOCUS_LAST = \"last\";\nvar FOCUS_FIRST = \"first\";\nvar CollectionWidget = Widget.inherit({\n  _activeStateUnit: \".\" + ITEM_CLASS,\n  _supportedKeys: function () {\n    var enter = function (e) {\n      var $itemElement = $(this.option(\"focusedElement\"));\n\n      if (!$itemElement.length) {\n        return;\n      }\n\n      this._itemClickHandler(extend({}, e, {\n        target: $itemElement.get(0),\n        currentTarget: $itemElement.get(0)\n      }));\n    };\n\n    var move = function (location, e) {\n      if (!isCommandKeyPressed(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._moveFocus(location, e);\n      }\n    };\n\n    return extend(this.callBase(), {\n      space: function (e) {\n        e.preventDefault();\n        enter.call(this, e);\n      },\n      enter: enter,\n      leftArrow: move.bind(this, FOCUS_LEFT),\n      rightArrow: move.bind(this, FOCUS_RIGHT),\n      upArrow: move.bind(this, FOCUS_UP),\n      downArrow: move.bind(this, FOCUS_DOWN),\n      pageUp: move.bind(this, FOCUS_UP),\n      pageDown: move.bind(this, FOCUS_DOWN),\n      home: move.bind(this, FOCUS_FIRST),\n      end: move.bind(this, FOCUS_LAST)\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      encodeNoDataText: false,\n      dataSource: null,\n      _dataController: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusOnSelectedItem: true,\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: function (data) {\n        return data ? data.disabled : void 0;\n      },\n      visibleExpr: function (data) {\n        return data ? data.visible : void 0;\n      }\n    });\n  },\n  _init: function () {\n    this._compileDisplayGetter();\n\n    this._initDataController();\n\n    this.callBase();\n\n    this._cleanRenderedItems();\n\n    this._refreshDataSource();\n  },\n  _compileDisplayGetter: function () {\n    var displayExpr = this.option(\"displayExpr\");\n    this._displayGetter = displayExpr ? compileGetter(this.option(\"displayExpr\")) : void 0;\n  },\n  _initTemplates: function () {\n    this._initItemsFromMarkup();\n\n    this._initDefaultItemTemplate();\n\n    this.callBase();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initDefaultItemTemplate: function () {\n    var fieldsMap = this._getFieldsMap();\n\n    this._templateManager.addDefaultTemplates({\n      item: new BindableTemplate(function ($container, data) {\n        if (isPlainObject(data)) {\n          this._prepareDefaultItemTemplate(data, $container);\n        } else {\n          if (fieldsMap && isFunction(fieldsMap.text)) {\n            data = fieldsMap.text(data);\n          }\n\n          $container.text(String(ensureDefined(data, \"\")));\n        }\n      }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\n    });\n  },\n  _getBindableFields: function () {\n    return [\"text\", \"html\"];\n  },\n  _getFieldsMap: function () {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n  },\n  _prepareDefaultItemTemplate: function (data, $container) {\n    if (isDefined(data.text)) {\n      $container.text(data.text);\n    }\n\n    if (isDefined(data.html)) {\n      $container.html(data.html);\n    }\n  },\n  _initItemsFromMarkup: function () {\n    var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);\n\n    if (!rawItems.length || this.option(\"items\").length) {\n      return;\n    }\n\n    var items = rawItems.map(_ref => {\n      var {\n        element: element,\n        options: options\n      } = _ref;\n      var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\n\n      if (isTemplateRequired) {\n        options.template = this._prepareItemTemplate(element);\n      } else {\n        $(element).remove();\n      }\n\n      return options;\n    });\n    this.option(\"items\", items);\n  },\n  _prepareItemTemplate: function (item) {\n    var templateId = ITEM_TEMPLATE_ID_PREFIX + new Guid();\n    var $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\n\n    this._saveTemplate(templateId, $template);\n\n    return templateId;\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _cleanRenderedItems: function () {\n    this._renderedItemsCount = 0;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (e) {\n    this.callBase.apply(this, arguments);\n\n    if (!this._isFocusTarget(e.target)) {\n      return;\n    }\n\n    var $focusedElement = $(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      this._setFocusedItem($focusedElement);\n    } else {\n      var $activeItem = this._getActiveItem();\n\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", getPublicElement($activeItem));\n      }\n    }\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n    var $target = $(this.option(\"focusedElement\"));\n\n    this._updateFocusedItemState($target, false);\n  },\n  _getActiveItem: function (last) {\n    var $focusedElement = $(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n\n    var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\n\n    var activeElements = this._getActiveElement();\n\n    var lastIndex = activeElements.length - 1;\n\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n\n    return activeElements.eq(index);\n  },\n  _moveFocus: function (location) {\n    var $items = this._getAvailableItems();\n\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        $newTarget = this._prevItem($items);\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        $newTarget = this._nextItem($items);\n        break;\n\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n        break;\n\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n        break;\n\n      default:\n        return false;\n    }\n\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", getPublicElement($newTarget));\n    }\n  },\n  _getVisibleItems: function ($itemElements) {\n    $itemElements = $itemElements || this._itemElements();\n    return $itemElements.filter(\":visible\");\n  },\n  _getAvailableItems: function ($itemElements) {\n    return this._getVisibleItems($itemElements).not(\".dx-state-disabled\");\n  },\n  _prevItem: function ($items) {\n    var $target = this._getActiveItem();\n\n    var targetIndex = $items.index($target);\n    var $last = $items.last();\n    var $item = $($items[targetIndex - 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n\n    return $item;\n  },\n  _nextItem: function ($items) {\n    var $target = this._getActiveItem(true);\n\n    var targetIndex = $items.index($target);\n    var $first = $items.first();\n    var $item = $($items[targetIndex + 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n\n    return $item;\n  },\n  _selectFocusedItem: function ($target) {\n    this.selectItem($target);\n  },\n  _updateFocusedItemState: function (target, isFocused, needCleanItemId) {\n    var $target = $(target);\n\n    if ($target.length) {\n      this._refreshActiveDescendant();\n\n      this._refreshItemId($target, needCleanItemId);\n\n      this._toggleFocusClass(isFocused, $target);\n    }\n\n    this._updateParentActiveDescendant();\n  },\n  _refreshActiveDescendant: function ($target) {\n    this.setAria(\"activedescendant\", isDefined(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target);\n  },\n  _refreshItemId: function ($target, needCleanItemId) {\n    if (!needCleanItemId && this.option(\"focusedElement\")) {\n      this.setAria(\"id\", this.getFocusedItemId(), $target);\n    } else {\n      this.setAria(\"id\", null, $target);\n    }\n  },\n  _setFocusedItem: function ($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n\n    this._updateFocusedItemState($target, true);\n\n    this.onFocusedItemChanged(this.getFocusedItemId());\n\n    if (this.option(\"selectOnFocus\")) {\n      this._selectFocusedItem($target);\n    }\n  },\n  _findItemElementByItem: function (item) {\n    var result = $();\n    var that = this;\n    this.itemElements().each(function () {\n      var $item = $(this);\n\n      if ($item.data(that._itemDataKey()) === item) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _getIndexByItem: function (item) {\n    return this.option(\"items\").indexOf(item);\n  },\n  _itemOptionChanged: function (item, property, value, oldValue) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n\n    var isDisabling = \"disabled\" === property && value;\n\n    if (isDisabling) {\n      this._resetItemFocus($item);\n    }\n  },\n\n  _resetItemFocus($item) {\n    if ($item.is(this.option(\"focusedElement\"))) {\n      this.option(\"focusedElement\", null);\n    }\n  },\n\n  _refreshItem: function ($item) {\n    var itemData = this._getItemData($item);\n\n    var index = $item.data(this._itemIndexKey());\n\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  },\n  _updateParentActiveDescendant: noop,\n  _optionChanged: function (args) {\n    if (\"items\" === args.name) {\n      var matches = args.fullName.match(ITEM_PATH_REGEX);\n\n      if (matches && matches.length) {\n        var property = matches[matches.length - 1];\n        var itemPath = args.fullName.replace(\".\" + property, \"\");\n        var item = this.option(itemPath);\n\n        this._itemOptionChanged(item, property, args.value, args.previousValue);\n\n        return;\n      }\n    }\n\n    switch (args.name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n      case \"useItemTextAsTitle\":\n        this._cleanRenderedItems();\n\n        this._invalidate();\n\n        break;\n\n      case \"dataSource\":\n        this._refreshDataSource();\n\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"noDataText\":\n      case \"encodeNoDataText\":\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"itemTemplate\":\n        this._invalidate();\n\n        break;\n\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n\n        break;\n\n      case \"onItemClick\":\n        break;\n\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n\n        break;\n\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n      case \"focusOnSelectedItem\":\n        break;\n\n      case \"focusedElement\":\n        this._updateFocusedItemState(args.previousValue, false, true);\n\n        this._setFocusedItem($(args.value));\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._initDefaultItemTemplate();\n\n        this._invalidate();\n\n        break;\n\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _invalidate: function () {\n    this.option(\"focusedElement\", null);\n    return this.callBase.apply(this, arguments);\n  },\n  _loadNextPage: function () {\n    this._expectNextPageLoading();\n\n    return this._dataController.loadNextPage();\n  },\n  _expectNextPageLoading: function () {\n    this._startIndexForAppendedItems = 0;\n  },\n  _expectLastItemLoading: function () {\n    this._startIndexForAppendedItems = -1;\n  },\n  _forgetNextPageLoading: function () {\n    this._startIndexForAppendedItems = null;\n  },\n  _dataSourceChangedHandler: function (newItems) {\n    var items = this.option(\"items\");\n\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n\n      if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n\n      this._forgetNextPageLoading();\n\n      this._refreshContent();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  },\n  _refreshContent: function () {\n    this._prepareContent();\n\n    this._renderContent();\n  },\n  _dataSourceLoadErrorHandler: function () {\n    this._forgetNextPageLoading();\n\n    this.option(\"items\", this.option(\"items\"));\n  },\n  _shouldAppendItems: function () {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  },\n  _allowDynamicItemsAppend: function () {\n    return false;\n  },\n  _clean: function () {\n    this._cleanFocusState();\n\n    this._cleanItemContainer();\n\n    this._inkRipple && delete this._inkRipple;\n\n    this._resetActiveState();\n  },\n  _cleanItemContainer: function () {\n    $(this._itemContainer()).empty();\n  },\n  _dispose: function () {\n    this.callBase();\n    clearTimeout(this._itemFocusTimeout);\n  },\n  _refresh: function () {\n    this._cleanRenderedItems();\n\n    this.callBase.apply(this, arguments);\n  },\n  _itemContainer: function () {\n    return this.$element();\n  },\n  _itemClass: function () {\n    return ITEM_CLASS;\n  },\n  _itemContentClass: function () {\n    return this._itemClass() + CONTENT_CLASS_POSTFIX;\n  },\n  _selectedItemClass: function () {\n    return SELECTED_ITEM_CLASS;\n  },\n  _itemResponseWaitClass: function () {\n    return ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemSelector: function () {\n    return \".\" + this._itemClass();\n  },\n  _itemDataKey: function () {\n    return ITEM_DATA_KEY;\n  },\n  _itemIndexKey: function () {\n    return ITEM_INDEX_KEY;\n  },\n  _itemElements: function () {\n    return this._itemContainer().find(this._itemSelector());\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(COLLECTION_CLASS);\n\n    this._prepareContent();\n  },\n  _prepareContent: deferRenderer(function () {\n    this._renderContentImpl();\n  }),\n  _renderContent: function () {\n    this._fireContentReadyAction();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._attachClickEvent();\n\n    this._attachHoldEvent();\n\n    this._attachContextMenuEvent();\n  },\n  _attachClickEvent: function () {\n    var itemSelector = this._itemSelector();\n\n    var clickEventNamespace = addNamespace(clickEventName, this.NAME);\n    var pointerDownEventNamespace = addNamespace(pointerEvents.down, this.NAME);\n    var that = this;\n    var pointerDownAction = new Action(function (args) {\n      var event = args.event;\n\n      that._itemPointerDownHandler(event);\n    });\n    eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\n    eventsEngine.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\n    eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, function (e) {\n      this._itemClickHandler(e);\n    }.bind(this));\n    eventsEngine.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function (e) {\n      pointerDownAction.execute({\n        element: $(e.target),\n        event: e\n      });\n    });\n  },\n  _itemClickHandler: function (e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  },\n  _itemPointerDownHandler: function (e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    this._itemFocusHandler = function () {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = null;\n\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n\n      var $target = $(e.target);\n      var $closestItem = $target.closest(this._itemElements());\n\n      var $closestFocusable = this._closestFocusable($target);\n\n      if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {\n        this.option(\"focusedElement\", getPublicElement($closestItem));\n      }\n    }.bind(this);\n\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  },\n  _closestFocusable: function ($target) {\n    if ($target.is(focusable)) {\n      return $target;\n    } else {\n      $target = $target.parent();\n\n      while ($target.length && !domAdapter.isDocument($target.get(0)) && !domAdapter.isDocumentFragment($target.get(0))) {\n        if ($target.is(focusable)) {\n          return $target;\n        }\n\n        $target = $target.parent();\n      }\n    }\n  },\n  _forcePointerDownFocus: function () {\n    this._itemFocusHandler && this._itemFocusHandler();\n  },\n  _updateFocusState: function () {\n    this.callBase.apply(this, arguments);\n\n    this._forcePointerDownFocus();\n  },\n  _attachHoldEvent: function () {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = addNamespace(holdEvent.name, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  },\n  _getHoldTimeout: function () {\n    return this.option(\"itemHoldTimeout\");\n  },\n  _shouldFireHoldEvent: function () {\n    return this.hasActionSubscription(\"onItemHold\");\n  },\n  _itemHoldHandler: function (e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _attachContextMenuEvent: function () {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = addNamespace(contextMenuEventName, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  },\n  _shouldFireContextMenuEvent: function () {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  },\n  _itemContextMenuHandler: function (e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _renderContentImpl: function () {\n    var items = this.option(\"items\") || [];\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n  },\n  _renderItems: function (items) {\n    if (items.length) {\n      each(items, function (index, itemData) {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      }.bind(this));\n    }\n\n    this._renderEmptyMessage();\n  },\n  _renderItem: function (index, itemData, $container, $itemToReplace) {\n    var _index$item;\n\n    var itemIndex = null !== (_index$item = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _index$item ? _index$item : index;\n    $container = $container || this._itemContainer();\n\n    var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);\n\n    this._setElementData($itemFrame, itemData, itemIndex);\n\n    $itemFrame.attr(this.option(\"_itemAttributes\"));\n\n    this._attachItemClickEvent(itemData, $itemFrame);\n\n    var $itemContent = this._getItemContent($itemFrame);\n\n    var renderContentPromise = this._renderItemContent({\n      index: itemIndex,\n      itemData: itemData,\n      container: getPublicElement($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: this.option(\"itemTemplate\")\n    });\n\n    var that = this;\n    when(renderContentPromise).done(function ($itemContent) {\n      that._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $itemContent,\n        itemData: itemData,\n        itemIndex: itemIndex\n      });\n\n      that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame));\n    });\n    return $itemFrame;\n  },\n  _getItemContent: function ($itemFrame) {\n    var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\n    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\n    return $itemContent;\n  },\n  _attachItemClickEvent: function (itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n\n    eventsEngine.on($itemElement, clickEventName, function (e) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }.bind(this));\n  },\n  _renderItemContent: function (args) {\n    var itemTemplateName = this._getItemTemplateName(args);\n\n    var itemTemplate = this._getTemplate(itemTemplateName);\n\n    this._addItemContentClasses(args);\n\n    var $templateResult = $(this._createItemByTemplate(itemTemplate, args));\n\n    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\n      return args.container;\n    }\n\n    return this._renderItemContentByNode(args, $templateResult);\n  },\n  _renderItemContentByNode: function (args, $node) {\n    $(args.container).replaceWith($node);\n    args.container = getPublicElement($node);\n\n    this._addItemContentClasses(args);\n\n    return $node;\n  },\n  _addItemContentClasses: function (args) {\n    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\n    $(args.container).addClass(classes.join(\" \"));\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  },\n  _renderItemFrame: function (index, itemData, $container, $itemToReplace) {\n    var $itemFrame = $(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n\n    if ($itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n\n    if (this.option(\"useItemTextAsTitle\")) {\n      var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\n      $itemFrame.attr(\"title\", displayValue);\n    }\n\n    return $itemFrame;\n  },\n  _itemOptions: function () {\n    var that = this;\n    return {\n      watchMethod: function () {\n        return that.option(\"integrationOptions.watchMethod\");\n      },\n      owner: that,\n      fieldGetter: function (field) {\n        var expr = that.option(field + \"Expr\");\n        var getter = compileGetter(expr);\n        return getter;\n      }\n    };\n  },\n  _postprocessRenderItem: noop,\n  _executeItemRenderAction: function (index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  },\n  _setElementData: function (element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  },\n  _createItemRenderAction: function () {\n    return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n  },\n  _getItemRenderAction: function () {\n    return this._itemRenderAction || this._createItemRenderAction();\n  },\n  _getItemTemplateName: function (args) {\n    var data = args.itemData;\n    var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\n    var template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  },\n  _createItemByTemplate: function (itemTemplate, renderArgs) {\n    return itemTemplate.render({\n      model: renderArgs.itemData,\n      container: renderArgs.container,\n      index: renderArgs.index,\n      onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)\n    });\n  },\n  _onItemTemplateRendered: function () {\n    return noop;\n  },\n  _emptyMessageContainer: function () {\n    return this._itemContainer();\n  },\n  _renderEmptyMessage: function (items) {\n    items = items || this.option(\"items\");\n    var noDataText = this.option(\"noDataText\");\n\n    var hideNoData = !noDataText || items && items.length || this._dataController.isLoading();\n\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n\n    if (!hideNoData) {\n      this._$noData = this._$noData || $(\"<div>\").addClass(\"dx-empty-message\");\n\n      this._$noData.appendTo(this._emptyMessageContainer());\n\n      if (this.option(\"encodeNoDataText\")) {\n        this._$noData.text(noDataText);\n      } else {\n        this._$noData.html(noDataText);\n      }\n\n      this.setAria(\"label\", noDataText);\n    }\n\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  },\n  _itemDXEventHandler: function (dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  },\n  _itemEventHandler: function (initiator, handlerOptionName, actionArgs, actionConfig) {\n    var action = this._createActionByOption(handlerOptionName, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerByHandler: function (initiator, handler, actionArgs, actionConfig) {\n    var action = this._createAction(handler, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerImpl: function (initiator, action, actionArgs) {\n    var $itemElement = this._closestItemElement($(initiator));\n\n    var args = extend({}, actionArgs);\n    return action(extend(actionArgs, this._extendActionArgs($itemElement), args));\n  },\n  _extendActionArgs: function ($itemElement) {\n    return {\n      itemElement: getPublicElement($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  },\n  _closestItemElement: function ($element) {\n    return $($element).closest(this._itemSelector());\n  },\n  _getItemData: function (itemElement) {\n    return $(itemElement).data(this._itemDataKey());\n  },\n  _getSummaryItemsWidth: function (items, includeMargin) {\n    var result = 0;\n\n    if (items) {\n      each(items, function (_, item) {\n        result += getOuterWidth(item, includeMargin || false);\n      });\n    }\n\n    return result;\n  },\n  getFocusedItemId: function () {\n    if (!this._focusedItemId) {\n      this._focusedItemId = \"dx-\" + new Guid();\n    }\n\n    return this._focusedItemId;\n  },\n  itemElements: function () {\n    return this._itemElements();\n  },\n  itemsContainer: function () {\n    return this._itemContainer();\n  }\n}).include(DataHelperMixin);\nCollectionWidget.ItemClass = CollectionWidgetItem;\nexport default CollectionWidget;","map":{"version":3,"names":["getOuterWidth","$","eventsEngine","ensureDefined","deferRenderer","noop","findTemplates","getPublicElement","domAdapter","isPlainObject","isFunction","isDefined","when","extend","each","Action","Guid","Widget","addNamespace","isCommandKeyPressed","pointerEvents","DataHelperMixin","CollectionWidgetItem","focusable","messageLocalization","holdEvent","compileGetter","name","clickEventName","contextMenuEventName","BindableTemplate","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_OPTIONS_NAME","SELECTED_ITEM_CLASS","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","ANONYMOUS_TEMPLATE_NAME","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","inherit","_activeStateUnit","_supportedKeys","enter","e","$itemElement","option","length","_itemClickHandler","target","get","currentTarget","move","location","preventDefault","stopPropagation","_moveFocus","callBase","space","call","leftArrow","bind","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","format","encodeNoDataText","dataSource","_dataController","_itemAttributes","itemTemplateProperty","focusOnSelectedItem","focusedElement","displayExpr","disabledExpr","data","disabled","visibleExpr","visible","_init","_compileDisplayGetter","_initDataController","_cleanRenderedItems","_refreshDataSource","_displayGetter","_initTemplates","_initItemsFromMarkup","_initDefaultItemTemplate","_getAnonymousTemplateName","fieldsMap","_getFieldsMap","_templateManager","addDefaultTemplates","item","$container","_prepareDefaultItemTemplate","text","String","_getBindableFields","html","rawItems","$element","map","_ref","element","options","isTemplateRequired","test","innerHTML","template","_prepareItemTemplate","remove","templateId","$template","detach","clone","removeAttr","addClass","_saveTemplate","_dataSourceOptions","paginate","_renderedItemsCount","_focusTarget","_focusInHandler","apply","arguments","_isFocusTarget","$focusedElement","_setFocusedItem","$activeItem","_getActiveItem","_focusOutHandler","$target","_updateFocusedItemState","last","index","activeElements","_getActiveElement","lastIndex","eq","$items","_getAvailableItems","$newTarget","_prevItem","_nextItem","first","_getVisibleItems","$itemElements","_itemElements","filter","not","targetIndex","$last","$item","loop","$first","_selectFocusedItem","selectItem","isFocused","needCleanItemId","_refreshActiveDescendant","_refreshItemId","_toggleFocusClass","_updateParentActiveDescendant","setAria","getFocusedItemId","_findItemElementByItem","result","that","itemElements","_itemDataKey","_getIndexByItem","indexOf","_itemOptionChanged","property","value","oldValue","constructor","ItemClass","getInstance","setDataField","_refreshItem","isDisabling","_resetItemFocus","is","itemData","_getItemData","_itemIndexKey","_renderItem","_optionChanged","args","matches","fullName","match","itemPath","replace","previousValue","_invalidate","_renderEmptyMessage","_createItemRenderAction","_attachHoldEvent","_attachContextMenuEvent","_createActionByOption","_loadNextPage","_expectNextPageLoading","loadNextPage","_startIndexForAppendedItems","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_initialized","_shouldAppendItems","_isLastPage","concat","slice","_refreshContent","_prepareContent","_renderContent","_dataSourceLoadErrorHandler","_allowDynamicItemsAppend","_clean","_cleanFocusState","_cleanItemContainer","_inkRipple","_resetActiveState","_itemContainer","empty","_dispose","clearTimeout","_itemFocusTimeout","_refresh","_itemClass","_itemContentClass","_selectedItemClass","_itemResponseWaitClass","_itemSelector","find","_initMarkup","_renderContentImpl","_fireContentReadyAction","_render","_attachClickEvent","itemSelector","clickEventNamespace","NAME","pointerDownEventNamespace","down","pointerDownAction","event","_itemPointerDownHandler","off","on","execute","config","_itemDXEventHandler","_itemFocusHandler","isDefaultPrevented","$closestItem","closest","$closestFocusable","_closestFocusable","setTimeout","_forcePointerDownFocus","parent","isDocument","isDocumentFragment","_updateFocusState","$itemContainer","eventName","timeout","_getHoldTimeout","_itemHoldHandler","_shouldFireHoldEvent","hasActionSubscription","cancel","_itemContextMenuHandler","_shouldFireContextMenuEvent","_renderItems","$itemToReplace","_index$item","itemIndex","$itemFrame","_renderItemFrame","_setElementData","attr","_attachItemClickEvent","$itemContent","_getItemContent","renderContentPromise","_renderItemContent","container","contentClass","defaultTemplateName","done","_postprocessRenderItem","itemElement","itemContent","_executeItemRenderAction","removeClass","onClick","_itemEventHandlerByHandler","itemTemplateName","_getItemTemplateName","_getTemplate","_addItemContentClasses","$templateResult","_createItemByTemplate","hasClass","_renderItemContentByNode","$node","replaceWith","classes","join","_appendItemToContainer","appendTo","_itemOptions","displayValue","watchMethod","owner","fieldGetter","field","expr","getter","_getItemRenderAction","_itemRenderAction","excludeValidators","category","templateProperty","renderArgs","render","model","onRendered","_onItemTemplateRendered","_emptyMessageContainer","hideNoData","isLoading","_$noData","toggleClass","dxEvent","handlerOptionName","actionArgs","actionConfig","_itemEventHandler","initiator","action","validatingTargetName","_itemEventHandlerImpl","handler","_createAction","_closestItemElement","_extendActionArgs","_getSummaryItemsWidth","includeMargin","_","_focusedItemId","itemsContainer","include"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/devextreme/esm/ui/collection/ui.collection_widget.base.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.base.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    ensureDefined,\r\n    deferRenderer,\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    findTemplates\r\n} from \"../../core/utils/template_manager\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    isPlainObject,\r\n    isFunction,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport Action from \"../../core/action\";\r\nimport Guid from \"../../core/guid\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport DataHelperMixin from \"../../data_helper\";\r\nimport CollectionWidgetItem from \"./item\";\r\nimport {\r\n    focusable\r\n} from \"../widget/selectors\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport holdEvent from \"../../events/hold\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../events/click\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../events/contextmenu\";\r\nimport {\r\n    BindableTemplate\r\n} from \"../../core/templates/bindable_template\";\r\nvar COLLECTION_CLASS = \"dx-collection\";\r\nvar ITEM_CLASS = \"dx-item\";\r\nvar CONTENT_CLASS_POSTFIX = \"-content\";\r\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nvar ITEM_DATA_KEY = \"dxItemData\";\r\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\r\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\r\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\r\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_PAGE_UP = \"pageup\";\r\nvar FOCUS_PAGE_DOWN = \"pagedown\";\r\nvar FOCUS_LAST = \"last\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar CollectionWidget = Widget.inherit({\r\n    _activeStateUnit: \".\" + ITEM_CLASS,\r\n    _supportedKeys: function() {\r\n        var enter = function(e) {\r\n            var $itemElement = $(this.option(\"focusedElement\"));\r\n            if (!$itemElement.length) {\r\n                return\r\n            }\r\n            this._itemClickHandler(extend({}, e, {\r\n                target: $itemElement.get(0),\r\n                currentTarget: $itemElement.get(0)\r\n            }))\r\n        };\r\n        var move = function(location, e) {\r\n            if (!isCommandKeyPressed(e)) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveFocus(location, e)\r\n            }\r\n        };\r\n        return extend(this.callBase(), {\r\n            space: function(e) {\r\n                e.preventDefault();\r\n                enter.call(this, e)\r\n            },\r\n            enter: enter,\r\n            leftArrow: move.bind(this, FOCUS_LEFT),\r\n            rightArrow: move.bind(this, FOCUS_RIGHT),\r\n            upArrow: move.bind(this, FOCUS_UP),\r\n            downArrow: move.bind(this, FOCUS_DOWN),\r\n            pageUp: move.bind(this, FOCUS_UP),\r\n            pageDown: move.bind(this, FOCUS_DOWN),\r\n            home: move.bind(this, FOCUS_FIRST),\r\n            end: move.bind(this, FOCUS_LAST)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            encodeNoDataText: false,\r\n            dataSource: null,\r\n            _dataController: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusOnSelectedItem: true,\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: function(data) {\r\n                return data ? data.disabled : void 0\r\n            },\r\n            visibleExpr: function(data) {\r\n                return data ? data.visible : void 0\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this._compileDisplayGetter();\r\n        this._initDataController();\r\n        this.callBase();\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        var displayExpr = this.option(\"displayExpr\");\r\n        this._displayGetter = displayExpr ? compileGetter(this.option(\"displayExpr\")) : void 0\r\n    },\r\n    _initTemplates: function() {\r\n        this._initItemsFromMarkup();\r\n        this._initDefaultItemTemplate();\r\n        this.callBase()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initDefaultItemTemplate: function() {\r\n        var fieldsMap = this._getFieldsMap();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new BindableTemplate(function($container, data) {\r\n                if (isPlainObject(data)) {\r\n                    this._prepareDefaultItemTemplate(data, $container)\r\n                } else {\r\n                    if (fieldsMap && isFunction(fieldsMap.text)) {\r\n                        data = fieldsMap.text(data)\r\n                    }\r\n                    $container.text(String(ensureDefined(data, \"\")))\r\n                }\r\n            }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n        })\r\n    },\r\n    _getBindableFields: function() {\r\n        return [\"text\", \"html\"]\r\n    },\r\n    _getFieldsMap: function() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n    },\r\n    _prepareDefaultItemTemplate: function(data, $container) {\r\n        if (isDefined(data.text)) {\r\n            $container.text(data.text)\r\n        }\r\n        if (isDefined(data.html)) {\r\n            $container.html(data.html)\r\n        }\r\n    },\r\n    _initItemsFromMarkup: function() {\r\n        var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);\r\n        if (!rawItems.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        var items = rawItems.map(_ref => {\r\n            var {\r\n                element: element,\r\n                options: options\r\n            } = _ref;\r\n            var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\r\n            if (isTemplateRequired) {\r\n                options.template = this._prepareItemTemplate(element)\r\n            } else {\r\n                $(element).remove()\r\n            }\r\n            return options\r\n        });\r\n        this.option(\"items\", items)\r\n    },\r\n    _prepareItemTemplate: function(item) {\r\n        var templateId = ITEM_TEMPLATE_ID_PREFIX + new Guid;\r\n        var $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _cleanRenderedItems: function() {\r\n        this._renderedItemsCount = 0\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(e) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._isFocusTarget(e.target)) {\r\n            return\r\n        }\r\n        var $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._setFocusedItem($focusedElement)\r\n        } else {\r\n            var $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", getPublicElement($activeItem))\r\n            }\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var $target = $(this.option(\"focusedElement\"));\r\n        this._updateFocusedItemState($target, false)\r\n    },\r\n    _getActiveItem: function(last) {\r\n        var $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\r\n        var activeElements = this._getActiveElement();\r\n        var lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var $items = this._getAvailableItems();\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", getPublicElement($newTarget))\r\n        }\r\n    },\r\n    _getVisibleItems: function($itemElements) {\r\n        $itemElements = $itemElements || this._itemElements();\r\n        return $itemElements.filter(\":visible\")\r\n    },\r\n    _getAvailableItems: function($itemElements) {\r\n        return this._getVisibleItems($itemElements).not(\".dx-state-disabled\")\r\n    },\r\n    _prevItem: function($items) {\r\n        var $target = this._getActiveItem();\r\n        var targetIndex = $items.index($target);\r\n        var $last = $items.last();\r\n        var $item = $($items[targetIndex - 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    },\r\n    _nextItem: function($items) {\r\n        var $target = this._getActiveItem(true);\r\n        var targetIndex = $items.index($target);\r\n        var $first = $items.first();\r\n        var $item = $($items[targetIndex + 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    },\r\n    _selectFocusedItem: function($target) {\r\n        this.selectItem($target)\r\n    },\r\n    _updateFocusedItemState: function(target, isFocused, needCleanItemId) {\r\n        var $target = $(target);\r\n        if ($target.length) {\r\n            this._refreshActiveDescendant();\r\n            this._refreshItemId($target, needCleanItemId);\r\n            this._toggleFocusClass(isFocused, $target)\r\n        }\r\n        this._updateParentActiveDescendant()\r\n    },\r\n    _refreshActiveDescendant: function($target) {\r\n        this.setAria(\"activedescendant\", isDefined(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target)\r\n    },\r\n    _refreshItemId: function($target, needCleanItemId) {\r\n        if (!needCleanItemId && this.option(\"focusedElement\")) {\r\n            this.setAria(\"id\", this.getFocusedItemId(), $target)\r\n        } else {\r\n            this.setAria(\"id\", null, $target)\r\n        }\r\n    },\r\n    _setFocusedItem: function($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        this._updateFocusedItemState($target, true);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        if (this.option(\"selectOnFocus\")) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    },\r\n    _findItemElementByItem: function(item) {\r\n        var result = $();\r\n        var that = this;\r\n        this.itemElements().each((function() {\r\n            var $item = $(this);\r\n            if ($item.data(that._itemDataKey()) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return this.option(\"items\").indexOf(item)\r\n    },\r\n    _itemOptionChanged: function(item, property, value, oldValue) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n        var isDisabling = \"disabled\" === property && value;\r\n        if (isDisabling) {\r\n            this._resetItemFocus($item)\r\n        }\r\n    },\r\n    _resetItemFocus($item) {\r\n        if ($item.is(this.option(\"focusedElement\"))) {\r\n            this.option(\"focusedElement\", null)\r\n        }\r\n    },\r\n    _refreshItem: function($item) {\r\n        var itemData = this._getItemData($item);\r\n        var index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    },\r\n    _updateParentActiveDescendant: noop,\r\n    _optionChanged: function(args) {\r\n        if (\"items\" === args.name) {\r\n            var matches = args.fullName.match(ITEM_PATH_REGEX);\r\n            if (matches && matches.length) {\r\n                var property = matches[matches.length - 1];\r\n                var itemPath = args.fullName.replace(\".\" + property, \"\");\r\n                var item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, args.value, args.previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (args.name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n            case \"useItemTextAsTitle\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n            case \"encodeNoDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n            case \"focusOnSelectedItem\":\r\n                break;\r\n            case \"focusedElement\":\r\n                this._updateFocusedItemState(args.previousValue, false, true);\r\n                this._setFocusedItem($(args.value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _invalidate: function() {\r\n        this.option(\"focusedElement\", null);\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _loadNextPage: function() {\r\n        this._expectNextPageLoading();\r\n        return this._dataController.loadNextPage()\r\n    },\r\n    _expectNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = 0\r\n    },\r\n    _expectLastItemLoading: function() {\r\n        this._startIndexForAppendedItems = -1\r\n    },\r\n    _forgetNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = null\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        var items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    },\r\n    _refreshContent: function() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    },\r\n    _dataSourceLoadErrorHandler: function() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    },\r\n    _shouldAppendItems: function() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return false\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer();\r\n        this._inkRipple && delete this._inkRipple;\r\n        this._resetActiveState()\r\n    },\r\n    _cleanItemContainer: function() {\r\n        $(this._itemContainer()).empty()\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    },\r\n    _refresh: function() {\r\n        this._cleanRenderedItems();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContainer: function() {\r\n        return this.$element()\r\n    },\r\n    _itemClass: function() {\r\n        return ITEM_CLASS\r\n    },\r\n    _itemContentClass: function() {\r\n        return this._itemClass() + CONTENT_CLASS_POSTFIX\r\n    },\r\n    _selectedItemClass: function() {\r\n        return SELECTED_ITEM_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemSelector: function() {\r\n        return \".\" + this._itemClass()\r\n    },\r\n    _itemDataKey: function() {\r\n        return ITEM_DATA_KEY\r\n    },\r\n    _itemIndexKey: function() {\r\n        return ITEM_INDEX_KEY\r\n    },\r\n    _itemElements: function() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(COLLECTION_CLASS);\r\n        this._prepareContent()\r\n    },\r\n    _prepareContent: deferRenderer((function() {\r\n        this._renderContentImpl()\r\n    })),\r\n    _renderContent: function() {\r\n        this._fireContentReadyAction()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _attachClickEvent: function() {\r\n        var itemSelector = this._itemSelector();\r\n        var clickEventNamespace = addNamespace(clickEventName, this.NAME);\r\n        var pointerDownEventNamespace = addNamespace(pointerEvents.down, this.NAME);\r\n        var that = this;\r\n        var pointerDownAction = new Action((function(args) {\r\n            var event = args.event;\r\n            that._itemPointerDownHandler(event)\r\n        }));\r\n        eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        eventsEngine.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\r\n        eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, function(e) {\r\n            this._itemClickHandler(e)\r\n        }.bind(this));\r\n        eventsEngine.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, (function(e) {\r\n            pointerDownAction.execute({\r\n                element: $(e.target),\r\n                event: e\r\n            })\r\n        }))\r\n    },\r\n    _itemClickHandler: function(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    },\r\n    _itemPointerDownHandler: function(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = function() {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = null;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            var $target = $(e.target);\r\n            var $closestItem = $target.closest(this._itemElements());\r\n            var $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && this._isFocusTarget(null === $closestFocusable || void 0 === $closestFocusable ? void 0 : $closestFocusable.get(0))) {\r\n                this.option(\"focusedElement\", getPublicElement($closestItem))\r\n            }\r\n        }.bind(this);\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    },\r\n    _closestFocusable: function($target) {\r\n        if ($target.is(focusable)) {\r\n            return $target\r\n        } else {\r\n            $target = $target.parent();\r\n            while ($target.length && !domAdapter.isDocument($target.get(0)) && !domAdapter.isDocumentFragment($target.get(0))) {\r\n                if ($target.is(focusable)) {\r\n                    return $target\r\n                }\r\n                $target = $target.parent()\r\n            }\r\n        }\r\n    },\r\n    _forcePointerDownFocus: function() {\r\n        this._itemFocusHandler && this._itemFocusHandler()\r\n    },\r\n    _updateFocusState: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._forcePointerDownFocus()\r\n    },\r\n    _attachHoldEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = addNamespace(holdEvent.name, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    },\r\n    _getHoldTimeout: function() {\r\n        return this.option(\"itemHoldTimeout\")\r\n    },\r\n    _shouldFireHoldEvent: function() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = addNamespace(contextMenuEventName, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this.option(\"items\") || [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n    },\r\n    _renderItems: function(items) {\r\n        if (items.length) {\r\n            each(items, function(index, itemData) {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }.bind(this))\r\n        }\r\n        this._renderEmptyMessage()\r\n    },\r\n    _renderItem: function(index, itemData, $container, $itemToReplace) {\r\n        var _index$item;\r\n        var itemIndex = null !== (_index$item = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _index$item ? _index$item : index;\r\n        $container = $container || this._itemContainer();\r\n        var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, itemIndex);\r\n        $itemFrame.attr(this.option(\"_itemAttributes\"));\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        var $itemContent = this._getItemContent($itemFrame);\r\n        var renderContentPromise = this._renderItemContent({\r\n            index: itemIndex,\r\n            itemData: itemData,\r\n            container: getPublicElement($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: this.option(\"itemTemplate\")\r\n        });\r\n        var that = this;\r\n        when(renderContentPromise).done((function($itemContent) {\r\n            that._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $itemContent,\r\n                itemData: itemData,\r\n                itemIndex: itemIndex\r\n            });\r\n            that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame))\r\n        }));\r\n        return $itemFrame\r\n    },\r\n    _getItemContent: function($itemFrame) {\r\n        var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        return $itemContent\r\n    },\r\n    _attachItemClickEvent: function(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        eventsEngine.on($itemElement, clickEventName, function(e) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }.bind(this))\r\n    },\r\n    _renderItemContent: function(args) {\r\n        var itemTemplateName = this._getItemTemplateName(args);\r\n        var itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        var $templateResult = $(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    },\r\n    _renderItemContentByNode: function(args, $node) {\r\n        $(args.container).replaceWith($node);\r\n        args.container = getPublicElement($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    },\r\n    _addItemContentClasses: function(args) {\r\n        var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\r\n        $(args.container).addClass(classes.join(\" \"))\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    },\r\n    _renderItemFrame: function(index, itemData, $container, $itemToReplace) {\r\n        var $itemFrame = $(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if ($itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        if (this.option(\"useItemTextAsTitle\")) {\r\n            var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\r\n            $itemFrame.attr(\"title\", displayValue)\r\n        }\r\n        return $itemFrame\r\n    },\r\n    _itemOptions: function() {\r\n        var that = this;\r\n        return {\r\n            watchMethod: function() {\r\n                return that.option(\"integrationOptions.watchMethod\")\r\n            },\r\n            owner: that,\r\n            fieldGetter: function(field) {\r\n                var expr = that.option(field + \"Expr\");\r\n                var getter = compileGetter(expr);\r\n                return getter\r\n            }\r\n        }\r\n    },\r\n    _postprocessRenderItem: noop,\r\n    _executeItemRenderAction: function(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    },\r\n    _setElementData: function(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    },\r\n    _createItemRenderAction: function() {\r\n        return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        })\r\n    },\r\n    _getItemRenderAction: function() {\r\n        return this._itemRenderAction || this._createItemRenderAction()\r\n    },\r\n    _getItemTemplateName: function(args) {\r\n        var data = args.itemData;\r\n        var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\r\n        var template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    },\r\n    _createItemByTemplate: function(itemTemplate, renderArgs) {\r\n        return itemTemplate.render({\r\n            model: renderArgs.itemData,\r\n            container: renderArgs.container,\r\n            index: renderArgs.index,\r\n            onRendered: this._onItemTemplateRendered(itemTemplate, renderArgs)\r\n        })\r\n    },\r\n    _onItemTemplateRendered: function() {\r\n        return noop\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._itemContainer()\r\n    },\r\n    _renderEmptyMessage: function(items) {\r\n        items = items || this.option(\"items\");\r\n        var noDataText = this.option(\"noDataText\");\r\n        var hideNoData = !noDataText || items && items.length || this._dataController.isLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData || $(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer());\r\n            if (this.option(\"encodeNoDataText\")) {\r\n                this._$noData.text(noDataText)\r\n            } else {\r\n                this._$noData.html(noDataText)\r\n            }\r\n            this.setAria(\"label\", noDataText)\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    },\r\n    _itemDXEventHandler: function(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    },\r\n    _itemEventHandler: function(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        var action = this._createActionByOption(handlerOptionName, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerByHandler: function(initiator, handler, actionArgs, actionConfig) {\r\n        var action = this._createAction(handler, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerImpl: function(initiator, action, actionArgs) {\r\n        var $itemElement = this._closestItemElement($(initiator));\r\n        var args = extend({}, actionArgs);\r\n        return action(extend(actionArgs, this._extendActionArgs($itemElement), args))\r\n    },\r\n    _extendActionArgs: function($itemElement) {\r\n        return {\r\n            itemElement: getPublicElement($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    },\r\n    _closestItemElement: function($element) {\r\n        return $($element).closest(this._itemSelector())\r\n    },\r\n    _getItemData: function(itemElement) {\r\n        return $(itemElement).data(this._itemDataKey())\r\n    },\r\n    _getSummaryItemsWidth: function(items, includeMargin) {\r\n        var result = 0;\r\n        if (items) {\r\n            each(items, (function(_, item) {\r\n                result += getOuterWidth(item, includeMargin || false)\r\n            }))\r\n        }\r\n        return result\r\n    },\r\n    getFocusedItemId: function() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = \"dx-\" + new Guid\r\n        }\r\n        return this._focusedItemId\r\n    },\r\n    itemElements: function() {\r\n        return this._itemElements()\r\n    },\r\n    itemsContainer: function() {\r\n        return this._itemContainer()\r\n    }\r\n}).include(DataHelperMixin);\r\nCollectionWidget.ItemClass = CollectionWidgetItem;\r\nexport default CollectionWidget;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}