{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.file_uploader.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getInnerHeight, setHeight, setWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport { extend } from \"../../core/utils/extend\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { hasWindow } from \"../../core/utils/window\";\nimport Guid from \"../../core/guid\";\nimport Widget from \"../widget/ui.widget\";\nimport FileUploader from \"../file_uploader\";\nimport { whenSome } from \"./ui.file_manager.common\";\nvar FILE_MANAGER_FILE_UPLOADER_CLASS = \"dx-filemanager-fileuploader\";\nvar FILE_MANAGER_FILE_UPLOADER_DROPZONE_PLACEHOLER_CLASS = \"dx-filemanager-fileuploader-dropzone-placeholder\";\n\nclass FileManagerFileUploader extends Widget {\n  _initMarkup() {\n    this._initActions();\n\n    this.$element().addClass(FILE_MANAGER_FILE_UPLOADER_CLASS);\n    this._uploaderInfos = [];\n\n    this._createInternalFileUploader();\n\n    this._createDropZonePlaceholder();\n\n    this._setDropZonePlaceholderVisible(false);\n\n    super._initMarkup();\n  }\n\n  _createInternalFileUploader() {\n    var chunkSize = this._getController().chunkSize;\n\n    var $fileUploader = $(\"<div>\").appendTo(this.$element());\n\n    var fileUploader = this._createComponent($fileUploader, FileUploader, {\n      name: \"file\",\n      multiple: true,\n      showFileList: false,\n      activeStateEnabled: false,\n      focusStateEnabled: false,\n      hoverStateEnabled: false,\n      labelText: \"\",\n      readyToUploadMessage: \"\",\n      accept: \"*\",\n      chunkSize: chunkSize,\n      dropZone: this.option(\"dropZone\"),\n      onValueChanged: e => this._onFileUploaderValueChanged(e),\n      onProgress: e => this._onFileUploaderProgress(e),\n      onUploaded: e => this._onFileUploaderUploaded(e),\n      onFilesUploaded: e => this._onFileUploaderAllFilesUploaded(e),\n      onUploadAborted: e => this._onFileUploaderUploadAborted(e),\n      onUploadError: e => this._onFileUploaderUploadError(e),\n      onDropZoneEnter: () => this._setDropZonePlaceholderVisible(true),\n      onDropZoneLeave: () => this._setDropZonePlaceholderVisible(false)\n    });\n\n    fileUploader.option({\n      uploadChunk: (file, chunksData) => this._fileUploaderUploadChunk(fileUploader, file, chunksData),\n      abortUpload: (file, chunksData) => this._fileUploaderAbortUpload(fileUploader, file, chunksData)\n    });\n    fileUploader._shouldRaiseDragLeaveBase = fileUploader._shouldRaiseDragLeave;\n\n    fileUploader._shouldRaiseDragLeave = e => this._shouldRaiseDragLeave(e, fileUploader);\n\n    var uploaderInfo = {\n      fileUploader: fileUploader\n    };\n\n    this._uploaderInfos.push(uploaderInfo);\n  }\n\n  tryUpload() {\n    var info = this._findAndUpdateAvailableUploaderInfo();\n\n    if (info) {\n      info.fileUploader._selectButtonClickHandler();\n    }\n  }\n\n  cancelUpload(sessionId) {\n    this._cancelUpload(sessionId);\n  }\n\n  cancelFileUpload(sessionId, fileIndex) {\n    this._cancelUpload(sessionId, fileIndex);\n  }\n\n  _cancelUpload(sessionId, fileIndex) {\n    var {\n      fileUploader: fileUploader\n    } = this._findUploaderInfoBySessionId(sessionId);\n\n    fileUploader.abortUpload(fileIndex);\n  }\n\n  _fileUploaderUploadChunk(fileUploader, file, chunksInfo) {\n    var {\n      session: session,\n      fileIndex: fileIndex\n    } = this._findSessionByFile(fileUploader, file);\n\n    var controller = session.controller;\n    chunksInfo.fileIndex = fileIndex;\n    return controller.uploadFileChunk(file, chunksInfo);\n  }\n\n  _fileUploaderAbortUpload(fileUploader, file, chunksInfo) {\n    var {\n      session: session,\n      fileIndex: fileIndex\n    } = this._findSessionByFile(fileUploader, file);\n\n    var controller = session.controller;\n    chunksInfo.fileIndex = fileIndex;\n    return controller.abortFileUpload(file, chunksInfo);\n  }\n\n  _onFileUploaderValueChanged(_ref) {\n    var {\n      component: component,\n      value: value\n    } = _ref;\n\n    if (0 === value.length) {\n      return;\n    }\n\n    var files = value.slice();\n\n    var uploaderInfo = this._findUploaderInfo(component);\n\n    this._uploadFiles(uploaderInfo, files);\n\n    setTimeout(() => {\n      if (!this._findAndUpdateAvailableUploaderInfo()) {\n        this._createInternalFileUploader();\n      }\n    });\n  }\n\n  _onFileUploaderProgress(_ref2) {\n    var {\n      component: component,\n      file: file,\n      bytesLoaded: bytesLoaded,\n      bytesTotal: bytesTotal\n    } = _ref2;\n\n    var {\n      session: session,\n      fileIndex: fileIndex\n    } = this._findSessionByFile(component, file);\n\n    var fileValue = 0 !== bytesTotal ? bytesLoaded / bytesTotal : 1;\n    var commonValue = component.option(\"progress\") / 100;\n    var args = {\n      sessionId: session.id,\n      fileIndex: fileIndex,\n      commonValue: commonValue,\n      fileValue: fileValue\n    };\n\n    this._raiseUploadProgress(args);\n  }\n\n  _onFileUploaderAllFilesUploaded(_ref3) {\n    var {\n      component: component\n    } = _ref3;\n\n    var {\n      session: session\n    } = this._findSessionByFile(component, component._files[0].value);\n\n    this._raiseUploadFinished({\n      sessionId: session.id,\n      commonValue: component.option(\"progress\") / 100\n    });\n  }\n\n  _onFileUploaderUploaded(_ref4) {\n    var {\n      component: component,\n      file: file\n    } = _ref4;\n\n    var deferred = this._getDeferredForFile(component, file);\n\n    deferred.resolve();\n  }\n\n  _onFileUploaderUploadAborted(_ref5) {\n    var {\n      component: component,\n      file: file\n    } = _ref5;\n\n    var deferred = this._getDeferredForFile(component, file);\n\n    deferred.resolve({\n      canceled: true\n    });\n  }\n\n  _onFileUploaderUploadError(_ref6) {\n    var {\n      component: component,\n      file: file,\n      error: error\n    } = _ref6;\n\n    var deferred = this._getDeferredForFile(component, file);\n\n    deferred.reject(error);\n  }\n\n  _createDropZonePlaceholder() {\n    this._$dropZonePlaceholder = $(\"<div>\").addClass(FILE_MANAGER_FILE_UPLOADER_DROPZONE_PLACEHOLER_CLASS).appendTo(this.option(\"dropZonePlaceholderContainer\"));\n  }\n\n  _adjustDropZonePlaceholder() {\n    var $dropZoneTarget = this.option(\"dropZone\");\n\n    if (!hasWindow() || 0 === $dropZoneTarget.length) {\n      return;\n    }\n\n    var placeholderBorderTopWidth = parseFloat(this._$dropZonePlaceholder.css(\"borderTopWidth\"));\n    var placeholderBorderLeftWidth = parseFloat(this._$dropZonePlaceholder.css(\"borderLeftWidth\"));\n    var $placeholderContainer = this.option(\"dropZonePlaceholderContainer\");\n    var containerBorderBottomWidth = parseFloat($placeholderContainer.css(\"borderBottomWidth\"));\n    var containerBorderLeftWidth = parseFloat($placeholderContainer.css(\"borderLeftWidth\"));\n    var containerHeight = getInnerHeight($placeholderContainer);\n    var containerOffset = $placeholderContainer.offset();\n    var dropZoneOffset = $dropZoneTarget.offset();\n\n    this._$dropZonePlaceholder.css({\n      top: dropZoneOffset.top - containerOffset.top - containerHeight - containerBorderBottomWidth,\n      left: dropZoneOffset.left - containerOffset.left - containerBorderLeftWidth\n    });\n\n    setHeight(this._$dropZonePlaceholder, $dropZoneTarget.get(0).offsetHeight - 2 * placeholderBorderTopWidth);\n    setWidth(this._$dropZonePlaceholder, $dropZoneTarget.get(0).offsetWidth - 2 * placeholderBorderLeftWidth);\n  }\n\n  _setDropZonePlaceholderVisible(visible) {\n    if (visible) {\n      this._adjustDropZonePlaceholder();\n\n      this._$dropZonePlaceholder.css(\"display\", \"\");\n    } else {\n      this._$dropZonePlaceholder.css(\"display\", \"none\");\n    }\n  }\n\n  _shouldRaiseDragLeave(e, uploaderInstance) {\n    return uploaderInstance.isMouseOverElement(e, this.option(\"splitterElement\")) || uploaderInstance._shouldRaiseDragLeaveBase(e, true);\n  }\n\n  _uploadFiles(uploaderInfo, files) {\n    this._setDropZonePlaceholderVisible(false);\n\n    var sessionId = new Guid().toString();\n\n    var controller = this._getController();\n\n    var deferreds = files.map(() => new Deferred());\n    var session = {\n      id: sessionId,\n      controller: controller,\n      files: files,\n      deferreds: deferreds\n    };\n    uploaderInfo.session = session;\n    var sessionInfo = {\n      sessionId: sessionId,\n      deferreds: deferreds,\n      files: files\n    };\n\n    this._raiseUploadSessionStarted(sessionInfo);\n\n    return whenSome(deferreds).always(() => setTimeout(() => {\n      uploaderInfo.fileUploader.reset();\n      uploaderInfo.session = null;\n    }));\n  }\n\n  _getDeferredForFile(fileUploader, file) {\n    var {\n      session: session,\n      fileIndex: fileIndex\n    } = this._findSessionByFile(fileUploader, file);\n\n    return session.deferreds[fileIndex];\n  }\n\n  _findSessionByFile(fileUploader, file) {\n    var uploaderInfo = this._findUploaderInfo(fileUploader);\n\n    var session = uploaderInfo.session;\n    var fileIndex = session.files.indexOf(file);\n    return {\n      session: session,\n      fileIndex: fileIndex\n    };\n  }\n\n  _findUploaderInfoBySessionId(sessionId) {\n    for (var i = 0; i < this._uploaderInfos.length; i++) {\n      var uploaderInfo = this._uploaderInfos[i];\n      var session = uploaderInfo.session;\n\n      if (session && session.id === sessionId) {\n        return uploaderInfo;\n      }\n    }\n\n    return null;\n  }\n\n  _findAndUpdateAvailableUploaderInfo() {\n    var _info;\n\n    var info = null;\n\n    for (var i = 0; i < this._uploaderInfos.length; i++) {\n      var currentInfo = this._uploaderInfos[i];\n      currentInfo.fileUploader.option(\"dropZone\", \"\");\n\n      if (!info && !currentInfo.session) {\n        info = currentInfo;\n      }\n    }\n\n    null === (_info = info) || void 0 === _info ? void 0 : _info.fileUploader.option(\"dropZone\", this.option(\"dropZone\"));\n    return info;\n  }\n\n  _findUploaderInfo(fileUploader) {\n    for (var i = 0; i < this._uploaderInfos.length; i++) {\n      var info = this._uploaderInfos[i];\n\n      if (info.fileUploader === fileUploader) {\n        return info;\n      }\n    }\n\n    return null;\n  }\n\n  _getController() {\n    var controllerGetter = this.option(\"getController\");\n    return controllerGetter();\n  }\n\n  _raiseUploadSessionStarted(sessionInfo) {\n    this._actions.onUploadSessionStarted({\n      sessionInfo: sessionInfo\n    });\n  }\n\n  _raiseUploadProgress(args) {\n    this._actions.onUploadProgress(args);\n  }\n\n  _raiseUploadFinished(args) {\n    this._actions.onUploadFinished(args);\n  }\n\n  _initActions() {\n    this._actions = {\n      onUploadSessionStarted: this._createActionByOption(\"onUploadSessionStarted\"),\n      onUploadProgress: this._createActionByOption(\"onUploadProgress\"),\n      onUploadFinished: this._createActionByOption(\"onUploadFinished\")\n    };\n  }\n\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      getController: null,\n      onUploadSessionStarted: null,\n      onUploadProgress: null,\n      onUploadFinished: null,\n      splitterElement: null\n    });\n  }\n\n  _optionChanged(args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"getController\":\n        this.repaint();\n        break;\n\n      case \"onUploadSessionStarted\":\n      case \"onUploadProgress\":\n      case \"onUploadFinished\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n\n      case \"dropZone\":\n        this._findAndUpdateAvailableUploaderInfo();\n\n        this._adjustDropZonePlaceholder();\n\n        break;\n\n      case \"dropZonePlaceholderContainer\":\n        this._$dropZonePlaceholder.detach();\n\n        this._$dropZonePlaceholder.appendTo(args.value);\n\n        break;\n\n      case \"splitterElement\":\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n}\n\nexport default FileManagerFileUploader;","map":{"version":3,"names":["getInnerHeight","setHeight","setWidth","$","extend","Deferred","hasWindow","Guid","Widget","FileUploader","whenSome","FILE_MANAGER_FILE_UPLOADER_CLASS","FILE_MANAGER_FILE_UPLOADER_DROPZONE_PLACEHOLER_CLASS","FileManagerFileUploader","_initMarkup","_initActions","$element","addClass","_uploaderInfos","_createInternalFileUploader","_createDropZonePlaceholder","_setDropZonePlaceholderVisible","chunkSize","_getController","$fileUploader","appendTo","fileUploader","_createComponent","name","multiple","showFileList","activeStateEnabled","focusStateEnabled","hoverStateEnabled","labelText","readyToUploadMessage","accept","dropZone","option","onValueChanged","e","_onFileUploaderValueChanged","onProgress","_onFileUploaderProgress","onUploaded","_onFileUploaderUploaded","onFilesUploaded","_onFileUploaderAllFilesUploaded","onUploadAborted","_onFileUploaderUploadAborted","onUploadError","_onFileUploaderUploadError","onDropZoneEnter","onDropZoneLeave","uploadChunk","file","chunksData","_fileUploaderUploadChunk","abortUpload","_fileUploaderAbortUpload","_shouldRaiseDragLeaveBase","_shouldRaiseDragLeave","uploaderInfo","push","tryUpload","info","_findAndUpdateAvailableUploaderInfo","_selectButtonClickHandler","cancelUpload","sessionId","_cancelUpload","cancelFileUpload","fileIndex","_findUploaderInfoBySessionId","chunksInfo","session","_findSessionByFile","controller","uploadFileChunk","abortFileUpload","_ref","component","value","length","files","slice","_findUploaderInfo","_uploadFiles","setTimeout","_ref2","bytesLoaded","bytesTotal","fileValue","commonValue","args","id","_raiseUploadProgress","_ref3","_files","_raiseUploadFinished","_ref4","deferred","_getDeferredForFile","resolve","_ref5","canceled","_ref6","error","reject","_$dropZonePlaceholder","_adjustDropZonePlaceholder","$dropZoneTarget","placeholderBorderTopWidth","parseFloat","css","placeholderBorderLeftWidth","$placeholderContainer","containerBorderBottomWidth","containerBorderLeftWidth","containerHeight","containerOffset","offset","dropZoneOffset","top","left","get","offsetHeight","offsetWidth","visible","uploaderInstance","isMouseOverElement","toString","deferreds","map","sessionInfo","_raiseUploadSessionStarted","always","reset","indexOf","i","_info","currentInfo","controllerGetter","_actions","onUploadSessionStarted","onUploadProgress","onUploadFinished","_createActionByOption","_getDefaultOptions","getController","splitterElement","_optionChanged","repaint","detach"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/devextreme/esm/ui/file_manager/ui.file_manager.file_uploader.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.file_uploader.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getInnerHeight,\r\n    setHeight,\r\n    setWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport Guid from \"../../core/guid\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport FileUploader from \"../file_uploader\";\r\nimport {\r\n    whenSome\r\n} from \"./ui.file_manager.common\";\r\nvar FILE_MANAGER_FILE_UPLOADER_CLASS = \"dx-filemanager-fileuploader\";\r\nvar FILE_MANAGER_FILE_UPLOADER_DROPZONE_PLACEHOLER_CLASS = \"dx-filemanager-fileuploader-dropzone-placeholder\";\r\nclass FileManagerFileUploader extends Widget {\r\n    _initMarkup() {\r\n        this._initActions();\r\n        this.$element().addClass(FILE_MANAGER_FILE_UPLOADER_CLASS);\r\n        this._uploaderInfos = [];\r\n        this._createInternalFileUploader();\r\n        this._createDropZonePlaceholder();\r\n        this._setDropZonePlaceholderVisible(false);\r\n        super._initMarkup()\r\n    }\r\n    _createInternalFileUploader() {\r\n        var chunkSize = this._getController().chunkSize;\r\n        var $fileUploader = $(\"<div>\").appendTo(this.$element());\r\n        var fileUploader = this._createComponent($fileUploader, FileUploader, {\r\n            name: \"file\",\r\n            multiple: true,\r\n            showFileList: false,\r\n            activeStateEnabled: false,\r\n            focusStateEnabled: false,\r\n            hoverStateEnabled: false,\r\n            labelText: \"\",\r\n            readyToUploadMessage: \"\",\r\n            accept: \"*\",\r\n            chunkSize: chunkSize,\r\n            dropZone: this.option(\"dropZone\"),\r\n            onValueChanged: e => this._onFileUploaderValueChanged(e),\r\n            onProgress: e => this._onFileUploaderProgress(e),\r\n            onUploaded: e => this._onFileUploaderUploaded(e),\r\n            onFilesUploaded: e => this._onFileUploaderAllFilesUploaded(e),\r\n            onUploadAborted: e => this._onFileUploaderUploadAborted(e),\r\n            onUploadError: e => this._onFileUploaderUploadError(e),\r\n            onDropZoneEnter: () => this._setDropZonePlaceholderVisible(true),\r\n            onDropZoneLeave: () => this._setDropZonePlaceholderVisible(false)\r\n        });\r\n        fileUploader.option({\r\n            uploadChunk: (file, chunksData) => this._fileUploaderUploadChunk(fileUploader, file, chunksData),\r\n            abortUpload: (file, chunksData) => this._fileUploaderAbortUpload(fileUploader, file, chunksData)\r\n        });\r\n        fileUploader._shouldRaiseDragLeaveBase = fileUploader._shouldRaiseDragLeave;\r\n        fileUploader._shouldRaiseDragLeave = e => this._shouldRaiseDragLeave(e, fileUploader);\r\n        var uploaderInfo = {\r\n            fileUploader: fileUploader\r\n        };\r\n        this._uploaderInfos.push(uploaderInfo)\r\n    }\r\n    tryUpload() {\r\n        var info = this._findAndUpdateAvailableUploaderInfo();\r\n        if (info) {\r\n            info.fileUploader._selectButtonClickHandler()\r\n        }\r\n    }\r\n    cancelUpload(sessionId) {\r\n        this._cancelUpload(sessionId)\r\n    }\r\n    cancelFileUpload(sessionId, fileIndex) {\r\n        this._cancelUpload(sessionId, fileIndex)\r\n    }\r\n    _cancelUpload(sessionId, fileIndex) {\r\n        var {\r\n            fileUploader: fileUploader\r\n        } = this._findUploaderInfoBySessionId(sessionId);\r\n        fileUploader.abortUpload(fileIndex)\r\n    }\r\n    _fileUploaderUploadChunk(fileUploader, file, chunksInfo) {\r\n        var {\r\n            session: session,\r\n            fileIndex: fileIndex\r\n        } = this._findSessionByFile(fileUploader, file);\r\n        var controller = session.controller;\r\n        chunksInfo.fileIndex = fileIndex;\r\n        return controller.uploadFileChunk(file, chunksInfo)\r\n    }\r\n    _fileUploaderAbortUpload(fileUploader, file, chunksInfo) {\r\n        var {\r\n            session: session,\r\n            fileIndex: fileIndex\r\n        } = this._findSessionByFile(fileUploader, file);\r\n        var controller = session.controller;\r\n        chunksInfo.fileIndex = fileIndex;\r\n        return controller.abortFileUpload(file, chunksInfo)\r\n    }\r\n    _onFileUploaderValueChanged(_ref) {\r\n        var {\r\n            component: component,\r\n            value: value\r\n        } = _ref;\r\n        if (0 === value.length) {\r\n            return\r\n        }\r\n        var files = value.slice();\r\n        var uploaderInfo = this._findUploaderInfo(component);\r\n        this._uploadFiles(uploaderInfo, files);\r\n        setTimeout(() => {\r\n            if (!this._findAndUpdateAvailableUploaderInfo()) {\r\n                this._createInternalFileUploader()\r\n            }\r\n        })\r\n    }\r\n    _onFileUploaderProgress(_ref2) {\r\n        var {\r\n            component: component,\r\n            file: file,\r\n            bytesLoaded: bytesLoaded,\r\n            bytesTotal: bytesTotal\r\n        } = _ref2;\r\n        var {\r\n            session: session,\r\n            fileIndex: fileIndex\r\n        } = this._findSessionByFile(component, file);\r\n        var fileValue = 0 !== bytesTotal ? bytesLoaded / bytesTotal : 1;\r\n        var commonValue = component.option(\"progress\") / 100;\r\n        var args = {\r\n            sessionId: session.id,\r\n            fileIndex: fileIndex,\r\n            commonValue: commonValue,\r\n            fileValue: fileValue\r\n        };\r\n        this._raiseUploadProgress(args)\r\n    }\r\n    _onFileUploaderAllFilesUploaded(_ref3) {\r\n        var {\r\n            component: component\r\n        } = _ref3;\r\n        var {\r\n            session: session\r\n        } = this._findSessionByFile(component, component._files[0].value);\r\n        this._raiseUploadFinished({\r\n            sessionId: session.id,\r\n            commonValue: component.option(\"progress\") / 100\r\n        })\r\n    }\r\n    _onFileUploaderUploaded(_ref4) {\r\n        var {\r\n            component: component,\r\n            file: file\r\n        } = _ref4;\r\n        var deferred = this._getDeferredForFile(component, file);\r\n        deferred.resolve()\r\n    }\r\n    _onFileUploaderUploadAborted(_ref5) {\r\n        var {\r\n            component: component,\r\n            file: file\r\n        } = _ref5;\r\n        var deferred = this._getDeferredForFile(component, file);\r\n        deferred.resolve({\r\n            canceled: true\r\n        })\r\n    }\r\n    _onFileUploaderUploadError(_ref6) {\r\n        var {\r\n            component: component,\r\n            file: file,\r\n            error: error\r\n        } = _ref6;\r\n        var deferred = this._getDeferredForFile(component, file);\r\n        deferred.reject(error)\r\n    }\r\n    _createDropZonePlaceholder() {\r\n        this._$dropZonePlaceholder = $(\"<div>\").addClass(FILE_MANAGER_FILE_UPLOADER_DROPZONE_PLACEHOLER_CLASS).appendTo(this.option(\"dropZonePlaceholderContainer\"))\r\n    }\r\n    _adjustDropZonePlaceholder() {\r\n        var $dropZoneTarget = this.option(\"dropZone\");\r\n        if (!hasWindow() || 0 === $dropZoneTarget.length) {\r\n            return\r\n        }\r\n        var placeholderBorderTopWidth = parseFloat(this._$dropZonePlaceholder.css(\"borderTopWidth\"));\r\n        var placeholderBorderLeftWidth = parseFloat(this._$dropZonePlaceholder.css(\"borderLeftWidth\"));\r\n        var $placeholderContainer = this.option(\"dropZonePlaceholderContainer\");\r\n        var containerBorderBottomWidth = parseFloat($placeholderContainer.css(\"borderBottomWidth\"));\r\n        var containerBorderLeftWidth = parseFloat($placeholderContainer.css(\"borderLeftWidth\"));\r\n        var containerHeight = getInnerHeight($placeholderContainer);\r\n        var containerOffset = $placeholderContainer.offset();\r\n        var dropZoneOffset = $dropZoneTarget.offset();\r\n        this._$dropZonePlaceholder.css({\r\n            top: dropZoneOffset.top - containerOffset.top - containerHeight - containerBorderBottomWidth,\r\n            left: dropZoneOffset.left - containerOffset.left - containerBorderLeftWidth\r\n        });\r\n        setHeight(this._$dropZonePlaceholder, $dropZoneTarget.get(0).offsetHeight - 2 * placeholderBorderTopWidth);\r\n        setWidth(this._$dropZonePlaceholder, $dropZoneTarget.get(0).offsetWidth - 2 * placeholderBorderLeftWidth)\r\n    }\r\n    _setDropZonePlaceholderVisible(visible) {\r\n        if (visible) {\r\n            this._adjustDropZonePlaceholder();\r\n            this._$dropZonePlaceholder.css(\"display\", \"\")\r\n        } else {\r\n            this._$dropZonePlaceholder.css(\"display\", \"none\")\r\n        }\r\n    }\r\n    _shouldRaiseDragLeave(e, uploaderInstance) {\r\n        return uploaderInstance.isMouseOverElement(e, this.option(\"splitterElement\")) || uploaderInstance._shouldRaiseDragLeaveBase(e, true)\r\n    }\r\n    _uploadFiles(uploaderInfo, files) {\r\n        this._setDropZonePlaceholderVisible(false);\r\n        var sessionId = (new Guid).toString();\r\n        var controller = this._getController();\r\n        var deferreds = files.map(() => new Deferred);\r\n        var session = {\r\n            id: sessionId,\r\n            controller: controller,\r\n            files: files,\r\n            deferreds: deferreds\r\n        };\r\n        uploaderInfo.session = session;\r\n        var sessionInfo = {\r\n            sessionId: sessionId,\r\n            deferreds: deferreds,\r\n            files: files\r\n        };\r\n        this._raiseUploadSessionStarted(sessionInfo);\r\n        return whenSome(deferreds).always(() => setTimeout(() => {\r\n            uploaderInfo.fileUploader.reset();\r\n            uploaderInfo.session = null\r\n        }))\r\n    }\r\n    _getDeferredForFile(fileUploader, file) {\r\n        var {\r\n            session: session,\r\n            fileIndex: fileIndex\r\n        } = this._findSessionByFile(fileUploader, file);\r\n        return session.deferreds[fileIndex]\r\n    }\r\n    _findSessionByFile(fileUploader, file) {\r\n        var uploaderInfo = this._findUploaderInfo(fileUploader);\r\n        var session = uploaderInfo.session;\r\n        var fileIndex = session.files.indexOf(file);\r\n        return {\r\n            session: session,\r\n            fileIndex: fileIndex\r\n        }\r\n    }\r\n    _findUploaderInfoBySessionId(sessionId) {\r\n        for (var i = 0; i < this._uploaderInfos.length; i++) {\r\n            var uploaderInfo = this._uploaderInfos[i];\r\n            var session = uploaderInfo.session;\r\n            if (session && session.id === sessionId) {\r\n                return uploaderInfo\r\n            }\r\n        }\r\n        return null\r\n    }\r\n    _findAndUpdateAvailableUploaderInfo() {\r\n        var _info;\r\n        var info = null;\r\n        for (var i = 0; i < this._uploaderInfos.length; i++) {\r\n            var currentInfo = this._uploaderInfos[i];\r\n            currentInfo.fileUploader.option(\"dropZone\", \"\");\r\n            if (!info && !currentInfo.session) {\r\n                info = currentInfo\r\n            }\r\n        }\r\n        null === (_info = info) || void 0 === _info ? void 0 : _info.fileUploader.option(\"dropZone\", this.option(\"dropZone\"));\r\n        return info\r\n    }\r\n    _findUploaderInfo(fileUploader) {\r\n        for (var i = 0; i < this._uploaderInfos.length; i++) {\r\n            var info = this._uploaderInfos[i];\r\n            if (info.fileUploader === fileUploader) {\r\n                return info\r\n            }\r\n        }\r\n        return null\r\n    }\r\n    _getController() {\r\n        var controllerGetter = this.option(\"getController\");\r\n        return controllerGetter()\r\n    }\r\n    _raiseUploadSessionStarted(sessionInfo) {\r\n        this._actions.onUploadSessionStarted({\r\n            sessionInfo: sessionInfo\r\n        })\r\n    }\r\n    _raiseUploadProgress(args) {\r\n        this._actions.onUploadProgress(args)\r\n    }\r\n    _raiseUploadFinished(args) {\r\n        this._actions.onUploadFinished(args)\r\n    }\r\n    _initActions() {\r\n        this._actions = {\r\n            onUploadSessionStarted: this._createActionByOption(\"onUploadSessionStarted\"),\r\n            onUploadProgress: this._createActionByOption(\"onUploadProgress\"),\r\n            onUploadFinished: this._createActionByOption(\"onUploadFinished\")\r\n        }\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            getController: null,\r\n            onUploadSessionStarted: null,\r\n            onUploadProgress: null,\r\n            onUploadFinished: null,\r\n            splitterElement: null\r\n        })\r\n    }\r\n    _optionChanged(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"getController\":\r\n                this.repaint();\r\n                break;\r\n            case \"onUploadSessionStarted\":\r\n            case \"onUploadProgress\":\r\n            case \"onUploadFinished\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            case \"dropZone\":\r\n                this._findAndUpdateAvailableUploaderInfo();\r\n                this._adjustDropZonePlaceholder();\r\n                break;\r\n            case \"dropZonePlaceholderContainer\":\r\n                this._$dropZonePlaceholder.detach();\r\n                this._$dropZonePlaceholder.appendTo(args.value);\r\n                break;\r\n            case \"splitterElement\":\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n}\r\nexport default FileManagerFileUploader;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}