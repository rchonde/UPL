{"ast":null,"code":"import { combine, fromOrdinal, sort } from '../dateutil';\nimport { pymod, isPresent, includes } from '../helpers';\nexport function buildPoslist(bysetpos, timeset, start, end, ii, dayset) {\n  var poslist = [];\n\n  for (var j = 0; j < bysetpos.length; j++) {\n    var daypos = void 0;\n    var timepos = void 0;\n    var pos = bysetpos[j];\n\n    if (pos < 0) {\n      daypos = Math.floor(pos / timeset.length);\n      timepos = pymod(pos, timeset.length);\n    } else {\n      daypos = Math.floor((pos - 1) / timeset.length);\n      timepos = pymod(pos - 1, timeset.length);\n    }\n\n    var tmp = [];\n\n    for (var k = start; k < end; k++) {\n      var val = dayset[k];\n      if (!isPresent(val)) continue;\n      tmp.push(val);\n    }\n\n    var i = void 0;\n\n    if (daypos < 0) {\n      i = tmp.slice(daypos)[0];\n    } else {\n      i = tmp[daypos];\n    }\n\n    var time = timeset[timepos];\n    var date = fromOrdinal(ii.yearordinal + i);\n    var res = combine(date, time); // XXX: can this ever be in the array?\n    // - compare the actual date instead?\n\n    if (!includes(poslist, res)) poslist.push(res);\n  }\n\n  sort(poslist);\n  return poslist;\n}","map":{"version":3,"names":["combine","fromOrdinal","sort","pymod","isPresent","includes","buildPoslist","bysetpos","timeset","start","end","ii","dayset","poslist","j","length","daypos","timepos","pos","Math","floor","tmp","k","val","push","i","slice","time","date","yearordinal","res"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/rrule/dist/esm/iter/poslist.js"],"sourcesContent":["import { combine, fromOrdinal, sort } from '../dateutil';\nimport { pymod, isPresent, includes } from '../helpers';\nexport function buildPoslist(bysetpos, timeset, start, end, ii, dayset) {\n    var poslist = [];\n    for (var j = 0; j < bysetpos.length; j++) {\n        var daypos = void 0;\n        var timepos = void 0;\n        var pos = bysetpos[j];\n        if (pos < 0) {\n            daypos = Math.floor(pos / timeset.length);\n            timepos = pymod(pos, timeset.length);\n        }\n        else {\n            daypos = Math.floor((pos - 1) / timeset.length);\n            timepos = pymod(pos - 1, timeset.length);\n        }\n        var tmp = [];\n        for (var k = start; k < end; k++) {\n            var val = dayset[k];\n            if (!isPresent(val))\n                continue;\n            tmp.push(val);\n        }\n        var i = void 0;\n        if (daypos < 0) {\n            i = tmp.slice(daypos)[0];\n        }\n        else {\n            i = tmp[daypos];\n        }\n        var time = timeset[timepos];\n        var date = fromOrdinal(ii.yearordinal + i);\n        var res = combine(date, time);\n        // XXX: can this ever be in the array?\n        // - compare the actual date instead?\n        if (!includes(poslist, res))\n            poslist.push(res);\n    }\n    sort(poslist);\n    return poslist;\n}\n"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,WAAlB,EAA+BC,IAA/B,QAA2C,aAA3C;AACA,SAASC,KAAT,EAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,YAA3C;AACA,OAAO,SAASC,YAAT,CAAsBC,QAAtB,EAAgCC,OAAhC,EAAyCC,KAAzC,EAAgDC,GAAhD,EAAqDC,EAArD,EAAyDC,MAAzD,EAAiE;EACpE,IAAIC,OAAO,GAAG,EAAd;;EACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,QAAQ,CAACQ,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;IACtC,IAAIE,MAAM,GAAG,KAAK,CAAlB;IACA,IAAIC,OAAO,GAAG,KAAK,CAAnB;IACA,IAAIC,GAAG,GAAGX,QAAQ,CAACO,CAAD,CAAlB;;IACA,IAAII,GAAG,GAAG,CAAV,EAAa;MACTF,MAAM,GAAGG,IAAI,CAACC,KAAL,CAAWF,GAAG,GAAGV,OAAO,CAACO,MAAzB,CAAT;MACAE,OAAO,GAAGd,KAAK,CAACe,GAAD,EAAMV,OAAO,CAACO,MAAd,CAAf;IACH,CAHD,MAIK;MACDC,MAAM,GAAGG,IAAI,CAACC,KAAL,CAAW,CAACF,GAAG,GAAG,CAAP,IAAYV,OAAO,CAACO,MAA/B,CAAT;MACAE,OAAO,GAAGd,KAAK,CAACe,GAAG,GAAG,CAAP,EAAUV,OAAO,CAACO,MAAlB,CAAf;IACH;;IACD,IAAIM,GAAG,GAAG,EAAV;;IACA,KAAK,IAAIC,CAAC,GAAGb,KAAb,EAAoBa,CAAC,GAAGZ,GAAxB,EAA6BY,CAAC,EAA9B,EAAkC;MAC9B,IAAIC,GAAG,GAAGX,MAAM,CAACU,CAAD,CAAhB;MACA,IAAI,CAAClB,SAAS,CAACmB,GAAD,CAAd,EACI;MACJF,GAAG,CAACG,IAAJ,CAASD,GAAT;IACH;;IACD,IAAIE,CAAC,GAAG,KAAK,CAAb;;IACA,IAAIT,MAAM,GAAG,CAAb,EAAgB;MACZS,CAAC,GAAGJ,GAAG,CAACK,KAAJ,CAAUV,MAAV,EAAkB,CAAlB,CAAJ;IACH,CAFD,MAGK;MACDS,CAAC,GAAGJ,GAAG,CAACL,MAAD,CAAP;IACH;;IACD,IAAIW,IAAI,GAAGnB,OAAO,CAACS,OAAD,CAAlB;IACA,IAAIW,IAAI,GAAG3B,WAAW,CAACU,EAAE,CAACkB,WAAH,GAAiBJ,CAAlB,CAAtB;IACA,IAAIK,GAAG,GAAG9B,OAAO,CAAC4B,IAAD,EAAOD,IAAP,CAAjB,CA5BsC,CA6BtC;IACA;;IACA,IAAI,CAACtB,QAAQ,CAACQ,OAAD,EAAUiB,GAAV,CAAb,EACIjB,OAAO,CAACW,IAAR,CAAaM,GAAb;EACP;;EACD5B,IAAI,CAACW,OAAD,CAAJ;EACA,OAAOA,OAAP;AACH"},"metadata":{},"sourceType":"module"}