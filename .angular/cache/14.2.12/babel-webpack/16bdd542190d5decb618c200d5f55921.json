{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { Frequency } from './types';\nimport { Weekday } from './weekday';\nimport { untilStringToDate } from './dateutil';\nimport { Days } from './rrule';\nexport function parseString(rfcString) {\n  var options = rfcString.split('\\n').map(parseLine).filter(function (x) {\n    return x !== null;\n  });\n  return __assign(__assign({}, options[0]), options[1]);\n}\nexport function parseDtstart(line) {\n  var options = {};\n  var dtstartWithZone = /DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\\s]+)/i.exec(line);\n\n  if (!dtstartWithZone) {\n    return options;\n  }\n\n  var tzid = dtstartWithZone[1],\n      dtstart = dtstartWithZone[2];\n\n  if (tzid) {\n    options.tzid = tzid;\n  }\n\n  options.dtstart = untilStringToDate(dtstart);\n  return options;\n}\n\nfunction parseLine(rfcString) {\n  rfcString = rfcString.replace(/^\\s+|\\s+$/, '');\n  if (!rfcString.length) return null;\n  var header = /^([A-Z]+?)[:;]/.exec(rfcString.toUpperCase());\n\n  if (!header) {\n    return parseRrule(rfcString);\n  }\n\n  var key = header[1];\n\n  switch (key.toUpperCase()) {\n    case 'RRULE':\n    case 'EXRULE':\n      return parseRrule(rfcString);\n\n    case 'DTSTART':\n      return parseDtstart(rfcString);\n\n    default:\n      throw new Error(\"Unsupported RFC prop \".concat(key, \" in \").concat(rfcString));\n  }\n}\n\nfunction parseRrule(line) {\n  var strippedLine = line.replace(/^RRULE:/i, '');\n  var options = parseDtstart(strippedLine);\n  var attrs = line.replace(/^(?:RRULE|EXRULE):/i, '').split(';');\n  attrs.forEach(function (attr) {\n    var _a = attr.split('='),\n        key = _a[0],\n        value = _a[1];\n\n    switch (key.toUpperCase()) {\n      case 'FREQ':\n        options.freq = Frequency[value.toUpperCase()];\n        break;\n\n      case 'WKST':\n        options.wkst = Days[value.toUpperCase()];\n        break;\n\n      case 'COUNT':\n      case 'INTERVAL':\n      case 'BYSETPOS':\n      case 'BYMONTH':\n      case 'BYMONTHDAY':\n      case 'BYYEARDAY':\n      case 'BYWEEKNO':\n      case 'BYHOUR':\n      case 'BYMINUTE':\n      case 'BYSECOND':\n        var num = parseNumber(value);\n        var optionKey = key.toLowerCase(); // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n\n        options[optionKey] = num;\n        break;\n\n      case 'BYWEEKDAY':\n      case 'BYDAY':\n        options.byweekday = parseWeekday(value);\n        break;\n\n      case 'DTSTART':\n      case 'TZID':\n        // for backwards compatibility\n        var dtstart = parseDtstart(line);\n        options.tzid = dtstart.tzid;\n        options.dtstart = dtstart.dtstart;\n        break;\n\n      case 'UNTIL':\n        options.until = untilStringToDate(value);\n        break;\n\n      case 'BYEASTER':\n        options.byeaster = Number(value);\n        break;\n\n      default:\n        throw new Error(\"Unknown RRULE property '\" + key + \"'\");\n    }\n  });\n  return options;\n}\n\nfunction parseNumber(value) {\n  if (value.indexOf(',') !== -1) {\n    var values = value.split(',');\n    return values.map(parseIndividualNumber);\n  }\n\n  return parseIndividualNumber(value);\n}\n\nfunction parseIndividualNumber(value) {\n  if (/^[+-]?\\d+$/.test(value)) {\n    return Number(value);\n  }\n\n  return value;\n}\n\nfunction parseWeekday(value) {\n  var days = value.split(',');\n  return days.map(function (day) {\n    if (day.length === 2) {\n      // MO, TU, ...\n      return Days[day]; // wday instanceof Weekday\n    } // -1MO, +3FR, 1SO, 13TU ...\n\n\n    var parts = day.match(/^([+-]?\\d{1,2})([A-Z]{2})$/);\n\n    if (!parts || parts.length < 3) {\n      throw new SyntaxError(\"Invalid weekday string: \".concat(day));\n    }\n\n    var n = Number(parts[1]);\n    var wdaypart = parts[2];\n    var wday = Days[wdaypart].weekday;\n    return new Weekday(wday, n);\n  });\n}","map":{"version":3,"names":["__assign","Frequency","Weekday","untilStringToDate","Days","parseString","rfcString","options","split","map","parseLine","filter","x","parseDtstart","line","dtstartWithZone","exec","tzid","dtstart","replace","length","header","toUpperCase","parseRrule","key","Error","concat","strippedLine","attrs","forEach","attr","_a","value","freq","wkst","num","parseNumber","optionKey","toLowerCase","byweekday","parseWeekday","until","byeaster","Number","indexOf","values","parseIndividualNumber","test","days","day","parts","match","SyntaxError","n","wdaypart","wday","weekday"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/rrule/dist/esm/parsestring.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { Frequency } from './types';\nimport { Weekday } from './weekday';\nimport { untilStringToDate } from './dateutil';\nimport { Days } from './rrule';\nexport function parseString(rfcString) {\n    var options = rfcString\n        .split('\\n')\n        .map(parseLine)\n        .filter(function (x) { return x !== null; });\n    return __assign(__assign({}, options[0]), options[1]);\n}\nexport function parseDtstart(line) {\n    var options = {};\n    var dtstartWithZone = /DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\\s]+)/i.exec(line);\n    if (!dtstartWithZone) {\n        return options;\n    }\n    var tzid = dtstartWithZone[1], dtstart = dtstartWithZone[2];\n    if (tzid) {\n        options.tzid = tzid;\n    }\n    options.dtstart = untilStringToDate(dtstart);\n    return options;\n}\nfunction parseLine(rfcString) {\n    rfcString = rfcString.replace(/^\\s+|\\s+$/, '');\n    if (!rfcString.length)\n        return null;\n    var header = /^([A-Z]+?)[:;]/.exec(rfcString.toUpperCase());\n    if (!header) {\n        return parseRrule(rfcString);\n    }\n    var key = header[1];\n    switch (key.toUpperCase()) {\n        case 'RRULE':\n        case 'EXRULE':\n            return parseRrule(rfcString);\n        case 'DTSTART':\n            return parseDtstart(rfcString);\n        default:\n            throw new Error(\"Unsupported RFC prop \".concat(key, \" in \").concat(rfcString));\n    }\n}\nfunction parseRrule(line) {\n    var strippedLine = line.replace(/^RRULE:/i, '');\n    var options = parseDtstart(strippedLine);\n    var attrs = line.replace(/^(?:RRULE|EXRULE):/i, '').split(';');\n    attrs.forEach(function (attr) {\n        var _a = attr.split('='), key = _a[0], value = _a[1];\n        switch (key.toUpperCase()) {\n            case 'FREQ':\n                options.freq = Frequency[value.toUpperCase()];\n                break;\n            case 'WKST':\n                options.wkst = Days[value.toUpperCase()];\n                break;\n            case 'COUNT':\n            case 'INTERVAL':\n            case 'BYSETPOS':\n            case 'BYMONTH':\n            case 'BYMONTHDAY':\n            case 'BYYEARDAY':\n            case 'BYWEEKNO':\n            case 'BYHOUR':\n            case 'BYMINUTE':\n            case 'BYSECOND':\n                var num = parseNumber(value);\n                var optionKey = key.toLowerCase();\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                options[optionKey] = num;\n                break;\n            case 'BYWEEKDAY':\n            case 'BYDAY':\n                options.byweekday = parseWeekday(value);\n                break;\n            case 'DTSTART':\n            case 'TZID':\n                // for backwards compatibility\n                var dtstart = parseDtstart(line);\n                options.tzid = dtstart.tzid;\n                options.dtstart = dtstart.dtstart;\n                break;\n            case 'UNTIL':\n                options.until = untilStringToDate(value);\n                break;\n            case 'BYEASTER':\n                options.byeaster = Number(value);\n                break;\n            default:\n                throw new Error(\"Unknown RRULE property '\" + key + \"'\");\n        }\n    });\n    return options;\n}\nfunction parseNumber(value) {\n    if (value.indexOf(',') !== -1) {\n        var values = value.split(',');\n        return values.map(parseIndividualNumber);\n    }\n    return parseIndividualNumber(value);\n}\nfunction parseIndividualNumber(value) {\n    if (/^[+-]?\\d+$/.test(value)) {\n        return Number(value);\n    }\n    return value;\n}\nfunction parseWeekday(value) {\n    var days = value.split(',');\n    return days.map(function (day) {\n        if (day.length === 2) {\n            // MO, TU, ...\n            return Days[day]; // wday instanceof Weekday\n        }\n        // -1MO, +3FR, 1SO, 13TU ...\n        var parts = day.match(/^([+-]?\\d{1,2})([A-Z]{2})$/);\n        if (!parts || parts.length < 3) {\n            throw new SyntaxError(\"Invalid weekday string: \".concat(day));\n        }\n        var n = Number(parts[1]);\n        var wdaypart = parts[2];\n        var wday = Days[wdaypart].weekday;\n        return new Weekday(wday, n);\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}