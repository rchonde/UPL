{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.rows.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { getHeight, getOuterHeight, getWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { deferRender, deferUpdate } from \"../../core/utils/common\";\nimport { setHeight } from \"../../core/utils/style\";\nimport { isDefined, isNumeric, isString } from \"../../core/utils/type\";\nimport { each } from \"../../core/utils/iterator\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getBoundingRect, getDefaultAlignment } from \"../../core/utils/position\";\nimport { isEmpty } from \"../../core/utils/string\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport gridCoreUtils from \"./ui.grid_core.utils\";\nimport { ColumnsView } from \"./ui.grid_core.columns_view\";\nimport Scrollable from \"../scroll_view/ui.scrollable\";\nimport { removeEvent } from \"../../events/remove\";\nimport messageLocalization from \"../../localization/message\";\nimport browser from \"../../core/utils/browser\";\nvar ROWS_VIEW_CLASS = \"rowsview\";\nvar CONTENT_CLASS = \"content\";\nvar NOWRAP_CLASS = \"nowrap\";\nvar GROUP_ROW_CLASS = \"dx-group-row\";\nvar GROUP_CELL_CLASS = \"dx-group-cell\";\nvar DATA_ROW_CLASS = \"dx-data-row\";\nvar FREE_SPACE_CLASS = \"dx-freespace-row\";\nvar ROW_LINES_CLASS = \"dx-row-lines\";\nvar COLUMN_LINES_CLASS = \"dx-column-lines\";\nvar ROW_ALTERNATION_CLASS = \"dx-row-alt\";\nvar LAST_ROW_BORDER = \"dx-last-row-border\";\nvar EMPTY_CLASS = \"dx-empty\";\nvar ROW_INSERTED_ANIMATION_CLASS = \"row-inserted-animation\";\nvar LOADPANEL_HIDE_TIMEOUT = 200;\n\nfunction getMaxHorizontalScrollOffset(scrollable) {\n  return scrollable ? Math.round(scrollable.scrollWidth() - scrollable.clientWidth()) : 0;\n}\n\nexport var rowsModule = {\n  defaultOptions: function () {\n    return {\n      hoverStateEnabled: false,\n      scrolling: {\n        useNative: \"auto\"\n      },\n      loadPanel: {\n        enabled: \"auto\",\n        text: messageLocalization.format(\"Loading\"),\n        width: 200,\n        height: 90,\n        showIndicator: true,\n        indicatorSrc: \"\",\n        showPane: true\n      },\n      dataRowTemplate: null,\n      columnAutoWidth: false,\n      noDataText: messageLocalization.format(\"dxDataGrid-noDataText\"),\n      wordWrapEnabled: false,\n      showColumnLines: true,\n      showRowLines: false,\n      rowAlternationEnabled: false,\n      activeStateEnabled: false,\n      twoWayBindingEnabled: true\n    };\n  },\n  views: {\n    rowsView: ColumnsView.inherit(function () {\n      var defaultCellTemplate = function ($container, options) {\n        var isDataTextEmpty = isEmpty(options.text) && \"data\" === options.rowType;\n        var text = options.text;\n        var container = $container.get(0);\n\n        if (isDataTextEmpty) {\n          gridCoreUtils.setEmptyText($container);\n        } else if (options.column.encodeHtml) {\n          container.textContent = text;\n        } else {\n          container.innerHTML = text;\n        }\n      };\n\n      var members = {\n        _getDefaultTemplate: function (column) {\n          switch (column.command) {\n            case \"empty\":\n              return function (container) {\n                container.html(\"&nbsp;\");\n              };\n\n            default:\n              return defaultCellTemplate;\n          }\n        },\n        _getDefaultGroupTemplate: function (column) {\n          var summaryTexts = this.option(\"summary.texts\");\n          return function ($container, options) {\n            var data = options.data;\n            var text = options.column.caption + \": \" + options.text;\n            var container = $container.get(0);\n\n            if (options.summaryItems && options.summaryItems.length) {\n              text += \" \" + gridCoreUtils.getGroupRowSummaryText(options.summaryItems, summaryTexts);\n            }\n\n            if (data) {\n              if (options.groupContinuedMessage && options.groupContinuesMessage) {\n                text += \" (\" + options.groupContinuedMessage + \". \" + options.groupContinuesMessage + \")\";\n              } else if (options.groupContinuesMessage) {\n                text += \" (\" + options.groupContinuesMessage + \")\";\n              } else if (options.groupContinuedMessage) {\n                text += \" (\" + options.groupContinuedMessage + \")\";\n              }\n            }\n\n            $container.addClass(GROUP_CELL_CLASS);\n\n            if (column.encodeHtml) {\n              container.textContent = text;\n            } else {\n              container.innerHTML = text;\n            }\n          };\n        },\n        _update: function () {},\n        _getCellTemplate: function (options) {\n          var column = options.column;\n          var template;\n\n          if (\"group\" === options.rowType && isDefined(column.groupIndex) && !column.showWhenGrouped && !column.command) {\n            template = column.groupCellTemplate || {\n              allowRenderToDetachedContainer: true,\n              render: this._getDefaultGroupTemplate(column)\n            };\n          } else if ((\"data\" === options.rowType || column.command) && column.cellTemplate) {\n            template = column.cellTemplate;\n          } else {\n            template = {\n              allowRenderToDetachedContainer: true,\n              render: this._getDefaultTemplate(column)\n            };\n          }\n\n          return template;\n        },\n        _createRow: function (row) {\n          var $row = this.callBase.apply(this, arguments);\n\n          if (row) {\n            var isGroup = \"group\" === row.rowType;\n            var isDataRow = \"data\" === row.rowType;\n            isDataRow && $row.addClass(DATA_ROW_CLASS);\n            isDataRow && this.option(\"showRowLines\") && $row.addClass(ROW_LINES_CLASS);\n            this.option(\"showColumnLines\") && $row.addClass(COLUMN_LINES_CLASS);\n\n            if (false === row.visible) {\n              $row.hide();\n            }\n\n            if (isGroup) {\n              $row.addClass(GROUP_ROW_CLASS);\n              var isRowExpanded = row.isExpanded;\n              this.setAria(\"role\", \"row\", $row);\n              this.setAria(\"expanded\", isDefined(isRowExpanded) && isRowExpanded.toString(), $row);\n            }\n          }\n\n          return $row;\n        },\n        _rowPrepared: function ($row, rowOptions, row) {\n          if (\"data\" === rowOptions.rowType) {\n            if (this.option(\"rowAlternationEnabled\")) {\n              this._isAltRow(row) && $row.addClass(ROW_ALTERNATION_CLASS);\n              rowOptions.watch && rowOptions.watch(() => this._isAltRow(row), value => {\n                $row.toggleClass(ROW_ALTERNATION_CLASS, value);\n              });\n            }\n\n            this._setAriaRowIndex(rowOptions, $row);\n\n            rowOptions.watch && rowOptions.watch(() => rowOptions.rowIndex, () => this._setAriaRowIndex(rowOptions, $row));\n          }\n\n          this.callBase.apply(this, arguments);\n        },\n        _setAriaRowIndex: function (row, $row) {\n          var component = this.component;\n          var isPagerMode = \"standard\" === component.option(\"scrolling.mode\") && !gridCoreUtils.isVirtualRowRendering(component);\n          var rowIndex = row.rowIndex + 1;\n\n          if (isPagerMode) {\n            rowIndex = component.pageIndex() * component.pageSize() + rowIndex;\n          } else {\n            rowIndex += this._dataController.getRowIndexOffset();\n          }\n\n          this.setAria(\"rowindex\", rowIndex, $row);\n        },\n        _afterRowPrepared: function (e) {\n          var arg = e.args[0];\n          var dataController = this._dataController;\n          var row = dataController.getVisibleRows()[arg.rowIndex];\n          var watch = this.option(\"integrationOptions.watchMethod\");\n\n          if (!arg.data || \"data\" !== arg.rowType || arg.isNewRow || !this.option(\"twoWayBindingEnabled\") || !watch || !row) {\n            return;\n          }\n\n          var dispose = watch(() => dataController.generateDataValues(arg.data, arg.columns), () => {\n            dataController.repaintRows([row.rowIndex], this.option(\"repaintChangesOnly\"));\n          }, {\n            deep: true,\n            skipImmediate: true\n          });\n          eventsEngine.on(arg.rowElement, removeEvent, dispose);\n        },\n        _renderScrollable: function (force) {\n          var $element = this.element();\n\n          if (!$element.children().length) {\n            $element.append(\"<div>\");\n          }\n\n          if (force || !this._loadPanel) {\n            this._renderLoadPanel($element, $element.parent(), this._dataController.isLocalStore());\n          }\n\n          if ((force || !this.getScrollable()) && this._dataController.isLoaded()) {\n            var columns = this.getColumns();\n            var allColumnsHasWidth = true;\n\n            for (var i = 0; i < columns.length; i++) {\n              if (!columns[i].width && !columns[i].minWidth) {\n                allColumnsHasWidth = false;\n                break;\n              }\n            }\n\n            if (this.option(\"columnAutoWidth\") || this._hasHeight || allColumnsHasWidth || this._columnsController._isColumnFixing()) {\n              this._renderScrollableCore($element);\n            }\n          }\n        },\n        _handleScroll: function (e) {\n          var rtlEnabled = this.option(\"rtlEnabled\");\n          var isNativeScrolling = e.component.option(\"useNative\");\n          this._scrollTop = e.scrollOffset.top;\n          this._scrollLeft = e.scrollOffset.left;\n          var scrollLeft = e.scrollOffset.left;\n\n          if (rtlEnabled) {\n            this._scrollRight = getMaxHorizontalScrollOffset(e.component) - this._scrollLeft;\n\n            if (isNativeScrolling) {\n              scrollLeft = -this._scrollRight;\n            }\n\n            if (!this.isScrollbarVisible(true)) {\n              this._scrollLeft = -1;\n            }\n          }\n\n          this.scrollChanged.fire(_extends({}, e.scrollOffset, {\n            left: scrollLeft\n          }), this.name);\n        },\n        _renderScrollableCore: function ($element) {\n          var dxScrollableOptions = this._createScrollableOptions();\n\n          var scrollHandler = this._handleScroll.bind(this);\n\n          dxScrollableOptions.onScroll = scrollHandler;\n          this._scrollable = this._createComponent($element, Scrollable, dxScrollableOptions);\n          this._scrollableContainer = this._scrollable && $(this._scrollable.container());\n        },\n        _renderLoadPanel: gridCoreUtils.renderLoadPanel,\n        _renderContent: function (contentElement, tableElement) {\n          contentElement.empty().append(tableElement);\n          return this._findContentElement();\n        },\n        _updateContent: function (newTableElement, change) {\n          return this._waitAsyncTemplates(change).done(() => {\n            var tableElement = this.getTableElement();\n\n            var contentElement = this._findContentElement();\n\n            var changeType = change && change.changeType;\n            var executors = [];\n            var highlightChanges = this.option(\"highlightChanges\");\n            var rowInsertedClass = this.addWidgetPrefix(ROW_INSERTED_ANIMATION_CLASS);\n\n            switch (changeType) {\n              case \"update\":\n                each(change.rowIndices, (index, rowIndex) => {\n                  var $newRowElement = this._getRowElements(newTableElement).eq(index);\n\n                  var changeType = change.changeTypes && change.changeTypes[index];\n                  var item = change.items && change.items[index];\n                  executors.push(() => {\n                    var $rowsElement = this._getRowElements();\n\n                    var $rowElement = $rowsElement.eq(rowIndex);\n\n                    switch (changeType) {\n                      case \"update\":\n                        if (item) {\n                          var columnIndices = change.columnIndices && change.columnIndices[index];\n\n                          if (isDefined(item.visible) && item.visible !== $rowElement.is(\":visible\")) {\n                            $rowElement.toggle(item.visible);\n                          } else if (columnIndices) {\n                            this._updateCells($rowElement, $newRowElement, columnIndices);\n                          } else {\n                            $rowElement.replaceWith($newRowElement);\n                          }\n                        }\n\n                        break;\n\n                      case \"insert\":\n                        if (!$rowsElement.length) {\n                          if (tableElement) {\n                            var target = $newRowElement.is(\"tbody\") ? tableElement : tableElement.children(\"tbody\");\n                            $newRowElement.prependTo(target);\n                          }\n                        } else if ($rowElement.length) {\n                          $newRowElement.insertBefore($rowElement);\n                        } else {\n                          $newRowElement.insertAfter($rowsElement.last());\n                        }\n\n                        if (highlightChanges && change.isLiveUpdate) {\n                          $newRowElement.addClass(rowInsertedClass);\n                        }\n\n                        break;\n\n                      case \"remove\":\n                        $rowElement.remove();\n                    }\n                  });\n                });\n                each(executors, function () {\n                  this();\n                });\n                newTableElement.remove();\n                break;\n\n              default:\n                this.setTableElement(newTableElement);\n                contentElement.addClass(this.addWidgetPrefix(CONTENT_CLASS));\n\n                this._renderContent(contentElement, newTableElement);\n\n            }\n          });\n        },\n        _createEmptyRow: function (className, isFixed, height) {\n          var $cell;\n\n          var $row = this._createRow();\n\n          var columns = isFixed ? this.getFixedColumns() : this.getColumns();\n          $row.addClass(className).toggleClass(COLUMN_LINES_CLASS, this.option(\"showColumnLines\"));\n\n          for (var i = 0; i < columns.length; i++) {\n            $cell = this._createCell({\n              column: columns[i],\n              rowType: \"freeSpace\",\n              columnIndex: i,\n              columns: columns\n            });\n            isNumeric(height) && $cell.css(\"height\", height);\n            $row.append($cell);\n          }\n\n          this.setAria(\"role\", \"presentation\", $row);\n          return $row;\n        },\n        _appendEmptyRow: function ($table, $emptyRow, location) {\n          var $tBodies = this._getBodies($table);\n\n          var isTableContainer = !$tBodies.length || $emptyRow.is(\"tbody\");\n          var $container = isTableContainer ? $table : $tBodies;\n\n          if (\"top\" === location) {\n            $container.first().prepend($emptyRow);\n\n            if (isTableContainer) {\n              var $colgroup = $container.children(\"colgroup\");\n              $container.prepend($colgroup);\n            }\n          } else {\n            $container.last().append($emptyRow);\n          }\n        },\n        _renderFreeSpaceRow: function ($tableElement, change) {\n          var $freeSpaceRowElement = this._createEmptyRow(FREE_SPACE_CLASS);\n\n          $freeSpaceRowElement = this._wrapRowIfNeed($tableElement, $freeSpaceRowElement, \"refresh\" === (null === change || void 0 === change ? void 0 : change.changeType));\n\n          this._appendEmptyRow($tableElement, $freeSpaceRowElement);\n        },\n        _checkRowKeys: function (options) {\n          var that = this;\n\n          var rows = that._getRows(options);\n\n          var keyExpr = that._dataController.store() && that._dataController.store().key();\n\n          keyExpr && rows.some(function (row) {\n            if (\"data\" === row.rowType && void 0 === row.key) {\n              that._dataController.fireError(\"E1046\", keyExpr);\n\n              return true;\n            }\n          });\n        },\n        _needUpdateRowHeight: function (itemsCount) {\n          return itemsCount > 0 && !this._rowHeight;\n        },\n        _getRowsHeight: function ($tableElement) {\n          $tableElement = $tableElement || this._tableElement;\n          var $rowElements = $tableElement.children(\"tbody\").children().not(\".dx-virtual-row\").not(\".\" + FREE_SPACE_CLASS);\n          return $rowElements.toArray().reduce(function (sum, row) {\n            return sum + getBoundingRect(row).height;\n          }, 0);\n        },\n        _updateRowHeight: function () {\n          var $tableElement = this.getTableElement();\n\n          var itemsCount = this._dataController.items().length;\n\n          if ($tableElement && this._needUpdateRowHeight(itemsCount)) {\n            var rowsHeight = this._getRowsHeight($tableElement);\n\n            this._rowHeight = rowsHeight / itemsCount;\n          }\n        },\n        _findContentElement: function () {\n          var $content = this.element();\n          var scrollable = this.getScrollable();\n\n          if ($content) {\n            if (scrollable) {\n              $content = $(scrollable.content());\n            }\n\n            return $content.children().first();\n          }\n        },\n        _getRowElements: function (tableElement) {\n          var $rows = this.callBase(tableElement);\n          return $rows && $rows.not(\".\" + FREE_SPACE_CLASS);\n        },\n        _getFreeSpaceRowElements: function ($table) {\n          var tableElements = $table || this.getTableElements();\n          return tableElements && tableElements.children(\"tbody\").children(\".\" + FREE_SPACE_CLASS);\n        },\n        _getNoDataText: function () {\n          return this.option(\"noDataText\");\n        },\n        _rowClick: function (e) {\n          var item = this._dataController.items()[e.rowIndex] || {};\n          this.executeAction(\"onRowClick\", extend({\n            evaluate: function (expr) {\n              var getter = compileGetter(expr);\n              return getter(item.data);\n            }\n          }, e, item));\n        },\n        _rowDblClick: function (e) {\n          var item = this._dataController.items()[e.rowIndex] || {};\n          this.executeAction(\"onRowDblClick\", extend({}, e, item));\n        },\n        _getColumnsCountBeforeGroups: function (columns) {\n          for (var i = 0; i < columns.length; i++) {\n            if (\"groupExpand\" === columns[i].type) {\n              return i;\n            }\n          }\n\n          return 0;\n        },\n        _getGroupCellOptions: function (options) {\n          var columnsCountBeforeGroups = this._getColumnsCountBeforeGroups(options.columns);\n\n          var columnIndex = (options.row.groupIndex || 0) + columnsCountBeforeGroups;\n          return {\n            columnIndex: columnIndex,\n            colspan: options.columns.length - columnIndex - 1\n          };\n        },\n        _needWrapRow: function () {\n          return this.callBase.apply(this, arguments) || !!this.option(\"dataRowTemplate\");\n        },\n        _renderCells: function ($row, options) {\n          if (\"group\" === options.row.rowType) {\n            this._renderGroupedCells($row, options);\n          } else if (options.row.values) {\n            this.callBase($row, options);\n          }\n        },\n        _renderGroupedCells: function ($row, options) {\n          var row = options.row;\n          var expandColumn;\n          var columns = options.columns;\n          var rowIndex = row.rowIndex;\n          var isExpanded;\n\n          var groupCellOptions = this._getGroupCellOptions(options);\n\n          for (var i = 0; i <= groupCellOptions.columnIndex; i++) {\n            if (i === groupCellOptions.columnIndex && columns[i].allowCollapsing && \"infinite\" !== options.scrollingMode) {\n              isExpanded = !!row.isExpanded;\n              expandColumn = columns[i];\n            } else {\n              isExpanded = null;\n              expandColumn = {\n                command: \"expand\",\n                cssClass: columns[i].cssClass\n              };\n            }\n\n            if (this._needRenderCell(i, options.columnIndices)) {\n              this._renderCell($row, {\n                value: isExpanded,\n                row: row,\n                rowIndex: rowIndex,\n                column: expandColumn,\n                columnIndex: i,\n                columnIndices: options.columnIndices,\n                change: options.change\n              });\n            }\n          }\n\n          var groupColumnAlignment = getDefaultAlignment(this.option(\"rtlEnabled\"));\n          var groupColumn = extend({}, columns[groupCellOptions.columnIndex], {\n            command: null,\n            type: null,\n            cssClass: null,\n            width: null,\n            showWhenGrouped: false,\n            alignment: groupColumnAlignment\n          });\n\n          if (groupCellOptions.colspan > 1) {\n            groupColumn.colspan = groupCellOptions.colspan;\n          }\n\n          if (this._needRenderCell(groupCellOptions.columnIndex + 1, options.columnIndices)) {\n            this._renderCell($row, {\n              value: row.values[row.groupIndex],\n              row: row,\n              rowIndex: rowIndex,\n              column: groupColumn,\n              columnIndex: groupCellOptions.columnIndex + 1,\n              columnIndices: options.columnIndices,\n              change: options.change\n            });\n          }\n        },\n        _renderRows: function ($table, options) {\n          var scrollingMode = this.option(\"scrolling.mode\");\n          this.callBase($table, extend({\n            scrollingMode: scrollingMode\n          }, options));\n\n          this._checkRowKeys(options.change);\n\n          this._renderFreeSpaceRow($table, options.change);\n\n          if (!this._hasHeight) {\n            this.updateFreeSpaceRowHeight($table);\n          }\n        },\n\n        _renderDataRowByTemplate($table, options, dataRowTemplate) {\n          var row = options.row;\n          var rowOptions = extend({\n            columns: options.columns\n          }, row);\n\n          var $tbody = this._createRow(row, \"tbody\");\n\n          $tbody.appendTo($table);\n          this.renderTemplate($tbody, dataRowTemplate, rowOptions, true, options.change);\n\n          this._rowPrepared($tbody, rowOptions, options.row);\n        },\n\n        _renderRow: function ($table, options) {\n          var row = options.row;\n          var rowTemplate = this.option().rowTemplate;\n          var dataRowTemplate = this.option(\"dataRowTemplate\");\n\n          if (\"data\" === row.rowType && dataRowTemplate) {\n            this._renderDataRowByTemplate($table, options, dataRowTemplate);\n          } else if ((\"data\" === row.rowType || \"group\" === row.rowType) && !isDefined(row.groupIndex) && rowTemplate) {\n            this.renderTemplate($table, rowTemplate, extend({\n              columns: options.columns\n            }, row), true);\n          } else {\n            this.callBase($table, options);\n          }\n        },\n        _renderTable: function (options) {\n          var that = this;\n          var $table = that.callBase(options);\n\n          if (!isDefined(that.getTableElement())) {\n            that.setTableElement($table);\n\n            that._renderScrollable(true);\n\n            that.resizeCompleted.add(function resizeCompletedHandler() {\n              var scrollableInstance = that.getScrollable();\n\n              if (scrollableInstance && that.element().closest(getWindow().document).length) {\n                that.resizeCompleted.remove(resizeCompletedHandler);\n\n                scrollableInstance._visibilityChanged(true);\n              }\n            });\n          } else {\n            that._renderScrollable();\n          }\n\n          return $table;\n        },\n        _createTable: function () {\n          var $table = this.callBase.apply(this, arguments);\n\n          if (this.option().rowTemplate || this.option().dataRowTemplate) {\n            $table.appendTo(this.component.$element());\n          }\n\n          return $table;\n        },\n        _renderCore: function (change) {\n          var $element = this.element();\n          $element.addClass(this.addWidgetPrefix(ROWS_VIEW_CLASS)).toggleClass(this.addWidgetPrefix(NOWRAP_CLASS), !this.option(\"wordWrapEnabled\"));\n          $element.toggleClass(EMPTY_CLASS, this._dataController.isEmpty());\n          this.setAria(\"role\", \"presentation\", $element);\n\n          var $table = this._renderTable({\n            change: change\n          });\n\n          var deferred = this._updateContent($table, change);\n\n          this.callBase(change);\n          this._lastColumnWidths = null;\n          return deferred;\n        },\n        _getRows: function (change) {\n          return change && change.items || this._dataController.items();\n        },\n        _getCellOptions: function (options) {\n          var column = options.column;\n          var row = options.row;\n          var data = row.data;\n          var summaryCells = row && row.summaryCells;\n          var value = options.value;\n          var displayValue = gridCoreUtils.getDisplayValue(column, value, data, row.rowType);\n          var parameters = this.callBase(options);\n          parameters.value = value;\n          parameters.oldValue = options.oldValue;\n          parameters.displayValue = displayValue;\n          parameters.row = row;\n          parameters.key = row.key;\n          parameters.data = data;\n          parameters.rowType = row.rowType;\n          parameters.values = row.values;\n          parameters.text = !column.command ? gridCoreUtils.formatValue(displayValue, column) : \"\";\n          parameters.rowIndex = row.rowIndex;\n          parameters.summaryItems = summaryCells && summaryCells[options.columnIndex];\n          parameters.resized = column.resizedCallbacks;\n\n          if (isDefined(column.groupIndex) && !column.command) {\n            var groupingTextsOptions = this.option(\"grouping.texts\");\n            var scrollingMode = this.option(\"scrolling.mode\");\n\n            if (\"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\n              parameters.groupContinuesMessage = data && data.isContinuationOnNextPage && groupingTextsOptions && groupingTextsOptions.groupContinuesMessage;\n              parameters.groupContinuedMessage = data && data.isContinuation && groupingTextsOptions && groupingTextsOptions.groupContinuedMessage;\n            }\n          }\n\n          return parameters;\n        },\n        _setRowsOpacityCore: function ($rows, visibleColumns, columnIndex, value) {\n          var columnsController = this._columnsController;\n          var columns = columnsController.getColumns();\n          var column = columns && columns[columnIndex];\n          var columnID = column && column.isBand && column.index;\n          each($rows, function (rowIndex, row) {\n            if (!$(row).hasClass(GROUP_ROW_CLASS)) {\n              for (var i = 0; i < visibleColumns.length; i++) {\n                if (isNumeric(columnID) && columnsController.isParentBandColumn(visibleColumns[i].index, columnID) || visibleColumns[i].index === columnIndex) {\n                  $rows.eq(rowIndex).children().eq(i).css({\n                    opacity: value\n                  });\n\n                  if (!isNumeric(columnID)) {\n                    break;\n                  }\n                }\n              }\n            }\n          });\n        },\n        _getDevicePixelRatio: function () {\n          return getWindow().devicePixelRatio;\n        },\n        renderNoDataText: gridCoreUtils.renderNoDataText,\n        getCellOptions: function (rowIndex, columnIdentifier) {\n          var rowOptions = this._dataController.items()[rowIndex];\n\n          var cellOptions;\n          var column;\n\n          if (rowOptions) {\n            if (isString(columnIdentifier)) {\n              column = this._columnsController.columnOption(columnIdentifier);\n            } else {\n              column = this._columnsController.getVisibleColumns()[columnIdentifier];\n            }\n\n            if (column) {\n              cellOptions = this._getCellOptions({\n                value: column.calculateCellValue(rowOptions.data),\n                rowIndex: rowOptions.rowIndex,\n                row: rowOptions,\n                column: column\n              });\n            }\n          }\n\n          return cellOptions;\n        },\n        getRow: function (index) {\n          if (index >= 0) {\n            var rows = this._getRowElements();\n\n            if (rows.length > index) {\n              return $(rows[index]);\n            }\n          }\n        },\n        updateFreeSpaceRowHeight: function ($table) {\n          var dataController = this._dataController;\n          var itemCount = dataController.items(true).length;\n\n          var contentElement = this._findContentElement();\n\n          var freeSpaceRowElements = this._getFreeSpaceRowElements($table);\n\n          if (freeSpaceRowElements && contentElement && dataController.totalCount() >= 0) {\n            var isFreeSpaceRowVisible = false;\n\n            if (itemCount > 0) {\n              if (!this._hasHeight) {\n                var freeSpaceRowCount = dataController.pageSize() - itemCount;\n                var scrollingMode = this.option(\"scrolling.mode\");\n\n                if (freeSpaceRowCount > 0 && dataController.pageCount() > 1 && \"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\n                  setHeight(freeSpaceRowElements, freeSpaceRowCount * this._rowHeight);\n                  isFreeSpaceRowVisible = true;\n                }\n\n                if (!isFreeSpaceRowVisible && $table) {\n                  setHeight(freeSpaceRowElements, 0);\n                } else {\n                  freeSpaceRowElements.toggle(isFreeSpaceRowVisible);\n                }\n\n                this._updateLastRowBorder(isFreeSpaceRowVisible);\n              } else {\n                freeSpaceRowElements.hide();\n                deferUpdate(() => {\n                  var scrollbarWidth = this.getScrollbarWidth(true);\n                  var elementHeightWithoutScrollbar = getHeight(this.element()) - scrollbarWidth;\n                  var contentHeight = getOuterHeight(contentElement);\n                  var showFreeSpaceRow = elementHeightWithoutScrollbar - contentHeight > 0;\n\n                  var rowsHeight = this._getRowsHeight(contentElement.children().first());\n\n                  var $tableElement = $table || this.getTableElements();\n                  var borderTopWidth = Math.ceil(parseFloat($tableElement.css(\"borderTopWidth\")));\n\n                  var heightCorrection = this._getHeightCorrection();\n\n                  var resultHeight = elementHeightWithoutScrollbar - rowsHeight - borderTopWidth - heightCorrection;\n\n                  if (showFreeSpaceRow) {\n                    deferRender(() => {\n                      freeSpaceRowElements.css(\"height\", resultHeight);\n                      isFreeSpaceRowVisible = true;\n                      freeSpaceRowElements.show();\n                    });\n                  }\n\n                  deferRender(() => this._updateLastRowBorder(isFreeSpaceRowVisible));\n                });\n              }\n            } else {\n              freeSpaceRowElements.css(\"height\", 0);\n              freeSpaceRowElements.show();\n\n              this._updateLastRowBorder(true);\n            }\n          }\n        },\n        _getHeightCorrection: function () {\n          var isZoomedWebkit = browser.webkit && this._getDevicePixelRatio() >= 2;\n          var isChromeLatest = browser.chrome && browser.version >= 91;\n          var hasExtraBorderTop = browser.mozilla && browser.version >= 70 && !this.option(\"showRowLines\");\n          return isZoomedWebkit || hasExtraBorderTop || isChromeLatest ? 1 : 0;\n        },\n        _columnOptionChanged: function (e) {\n          var optionNames = e.optionNames;\n\n          if (e.changeTypes.grouping) {\n            return;\n          }\n\n          if (optionNames.width || optionNames.visibleWidth) {\n            this.callBase(e);\n\n            this._fireColumnResizedCallbacks();\n          }\n        },\n        getScrollable: function () {\n          return this._scrollable;\n        },\n        init: function () {\n          var that = this;\n          var dataController = that.getController(\"data\");\n          that.callBase();\n          that._editorFactoryController = that.getController(\"editorFactory\");\n          that._rowHeight = 0;\n          that._scrollTop = 0;\n          that._scrollLeft = -1;\n          that._scrollRight = 0;\n          that._hasHeight = false;\n          dataController.loadingChanged.add(function (isLoading, messageText) {\n            that.setLoading(isLoading, messageText);\n          });\n          dataController.dataSourceChanged.add(() => {\n            if (this._scrollLeft >= 0 && !this._dataController.isLoading()) {\n              this._handleScroll({\n                component: this.getScrollable(),\n                forceUpdateScrollPosition: true,\n                scrollOffset: {\n                  top: this._scrollTop,\n                  left: this._scrollLeft\n                }\n              });\n            }\n          });\n        },\n        _handleDataChanged: function (change) {\n          switch (change.changeType) {\n            case \"refresh\":\n            case \"prepend\":\n            case \"append\":\n            case \"update\":\n              this.render(null, change);\n              break;\n\n            default:\n              this._update(change);\n\n          }\n        },\n        publicMethods: function () {\n          return [\"isScrollbarVisible\", \"getTopVisibleRowData\", \"getScrollbarWidth\", \"getCellElement\", \"getRowElement\", \"getScrollable\"];\n        },\n        contentWidth: function () {\n          return getWidth(this.element()) - this.getScrollbarWidth();\n        },\n        getScrollbarWidth: function (isHorizontal) {\n          var scrollableContainer = this._scrollableContainer && this._scrollableContainer.get(0);\n\n          var scrollbarWidth = 0;\n\n          if (scrollableContainer) {\n            if (!isHorizontal) {\n              scrollbarWidth = scrollableContainer.clientWidth ? scrollableContainer.offsetWidth - scrollableContainer.clientWidth : 0;\n            } else {\n              scrollbarWidth = scrollableContainer.clientHeight ? scrollableContainer.offsetHeight - scrollableContainer.clientHeight : 0;\n              scrollbarWidth += (that = this, scrollable = that.getScrollable(), scrollable ? Math.ceil(parseFloat($(scrollable.content()).css(\"paddingBottom\"))) : 0);\n            }\n          }\n\n          var that, scrollable;\n          return scrollbarWidth > 0 ? scrollbarWidth : 0;\n        },\n        _fireColumnResizedCallbacks: function () {\n          var lastColumnWidths = this._lastColumnWidths || [];\n          var columnWidths = [];\n          var columns = this.getColumns();\n\n          for (var i = 0; i < columns.length; i++) {\n            columnWidths[i] = columns[i].visibleWidth;\n\n            if (columns[i].resizedCallbacks && !isDefined(columns[i].groupIndex) && lastColumnWidths[i] !== columnWidths[i]) {\n              columns[i].resizedCallbacks.fire(columnWidths[i]);\n            }\n          }\n\n          this._lastColumnWidths = columnWidths;\n        },\n        _updateLastRowBorder: function (isFreeSpaceRowVisible) {\n          if (this.option(\"showBorders\") && this.option(\"showRowLines\") && !isFreeSpaceRowVisible) {\n            this.element().addClass(LAST_ROW_BORDER);\n          } else {\n            this.element().removeClass(LAST_ROW_BORDER);\n          }\n        },\n        _updateScrollable: function () {\n          var scrollable = Scrollable.getInstance(this.element());\n\n          if (scrollable) {\n            scrollable.update();\n\n            if (scrollable.option(\"useNative\") || !(null !== scrollable && void 0 !== scrollable && scrollable.isRenovated())) {\n              this._updateHorizontalScrollPosition();\n            }\n          }\n        },\n        _updateHorizontalScrollPosition: function () {\n          var scrollable = this.getScrollable();\n          var scrollLeft = scrollable && scrollable.scrollOffset().left;\n          var rtlEnabled = this.option(\"rtlEnabled\");\n\n          if (rtlEnabled) {\n            var maxHorizontalScrollOffset = getMaxHorizontalScrollOffset(scrollable);\n            var scrollRight = maxHorizontalScrollOffset - scrollLeft;\n\n            if (scrollRight !== this._scrollRight) {\n              this._scrollLeft = maxHorizontalScrollOffset - this._scrollRight;\n            }\n          }\n\n          if (this._scrollLeft >= 0 && scrollLeft !== this._scrollLeft) {\n            scrollable.scrollTo({\n              x: this._scrollLeft\n            });\n          }\n        },\n        _resizeCore: function () {\n          var that = this;\n\n          that._fireColumnResizedCallbacks();\n\n          that._updateRowHeight();\n\n          deferRender(function () {\n            that._renderScrollable();\n\n            that.renderNoDataText();\n            that.updateFreeSpaceRowHeight();\n            deferUpdate(function () {\n              that._updateScrollable();\n            });\n          });\n        },\n        scrollTo: function (location) {\n          var $element = this.element();\n          var dxScrollable = $element && Scrollable.getInstance($element);\n\n          if (dxScrollable) {\n            dxScrollable.scrollTo(location);\n          }\n        },\n        height: function (_height, hasHeight) {\n          var that = this;\n          var $element = this.element();\n\n          if (0 === arguments.length) {\n            return $element ? getOuterHeight($element, true) : 0;\n          }\n\n          that._hasHeight = void 0 === hasHeight ? \"auto\" !== _height : hasHeight;\n\n          if (isDefined(_height) && $element) {\n            setHeight($element, _height);\n          }\n        },\n        hasHeight: function () {\n          return !!this._hasHeight;\n        },\n        setLoading: function (isLoading, messageText) {\n          var loadPanel = this._loadPanel;\n          var dataController = this._dataController;\n          var loadPanelOptions = this.option(\"loadPanel\") || {};\n          var animation = dataController.isLoaded() ? loadPanelOptions.animation : null;\n          var $element = this.element();\n\n          if (!hasWindow()) {\n            return;\n          }\n\n          if (!loadPanel && void 0 !== messageText && dataController.isLocalStore() && \"auto\" === loadPanelOptions.enabled && $element) {\n            this._renderLoadPanel($element, $element.parent());\n\n            loadPanel = this._loadPanel;\n          }\n\n          if (loadPanel) {\n            var visibilityOptions = {\n              message: messageText || loadPanelOptions.text,\n              animation: animation,\n              visible: isLoading\n            };\n\n            if (isLoading) {\n              visibilityOptions.position = gridCoreUtils.calculateLoadPanelPosition($element);\n            }\n\n            clearTimeout(this._hideLoadingTimeoutID);\n\n            if (loadPanel.option(\"visible\") && !isLoading) {\n              this._hideLoadingTimeoutID = setTimeout(function () {\n                loadPanel.option(visibilityOptions);\n              }, LOADPANEL_HIDE_TIMEOUT);\n            } else {\n              loadPanel.option(visibilityOptions);\n            }\n          }\n        },\n        setRowsOpacity: function (columnIndex, value) {\n          var $rows = this._getRowElements().not(\".\" + GROUP_ROW_CLASS) || [];\n\n          this._setRowsOpacityCore($rows, this.getColumns(), columnIndex, value);\n        },\n        _getCellElementsCore: function (rowIndex) {\n          var $cells = this.callBase.apply(this, arguments);\n\n          if ($cells) {\n            var groupCellIndex = $cells.filter(\".\" + GROUP_CELL_CLASS).index();\n\n            if (groupCellIndex >= 0 && $cells.length > groupCellIndex + 1) {\n              return $cells.slice(0, groupCellIndex + 1);\n            }\n          }\n\n          return $cells;\n        },\n        _getBoundaryVisibleItemIndex: function (isTop, isFloor) {\n          var itemIndex = 0;\n          var prevOffset = 0;\n          var offset = 0;\n          var viewportBoundary = this._scrollTop;\n\n          var $contentElement = this._findContentElement();\n\n          var contentElementOffsetTop = $contentElement && $contentElement.offset().top;\n          var dataController = this.getController(\"data\");\n          var items = dataController.items();\n          var tableElement = this.getTableElement();\n\n          if (items.length && tableElement) {\n            var rowElements = this._getRowElements(tableElement).filter(\":visible\");\n\n            if (!isTop) {\n              var height = getOuterHeight(this._hasHeight ? this.element() : getWindow());\n              viewportBoundary += height;\n            }\n\n            for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\n              prevOffset = offset;\n              var $rowElement = $(rowElements).eq(itemIndex);\n\n              if ($rowElement.length) {\n                offset = $rowElement.offset();\n                offset = (isTop ? offset.top : offset.top + getOuterHeight($rowElement)) - contentElementOffsetTop;\n\n                if (offset > viewportBoundary) {\n                  if (itemIndex) {\n                    if (isFloor || 2 * viewportBoundary < Math.round(offset + prevOffset)) {\n                      itemIndex--;\n                    }\n                  }\n\n                  break;\n                }\n              }\n            }\n\n            if (itemIndex && itemIndex === items.length) {\n              itemIndex--;\n            }\n          }\n\n          return itemIndex;\n        },\n        getTopVisibleItemIndex: function (isFloor) {\n          return this._getBoundaryVisibleItemIndex(true, isFloor);\n        },\n        getBottomVisibleItemIndex: function (isFloor) {\n          return this._getBoundaryVisibleItemIndex(false, isFloor);\n        },\n        getTopVisibleRowData: function () {\n          var itemIndex = this.getTopVisibleItemIndex();\n\n          var items = this._dataController.items();\n\n          if (items[itemIndex]) {\n            return items[itemIndex].data;\n          }\n        },\n        _scrollToElement: function ($element, offset) {\n          var scrollable = this.getScrollable();\n          scrollable && scrollable.scrollToElement($element, offset);\n        },\n        optionChanged: function (args) {\n          this.callBase(args);\n\n          switch (args.name) {\n            case \"wordWrapEnabled\":\n            case \"showColumnLines\":\n            case \"showRowLines\":\n            case \"rowAlternationEnabled\":\n            case \"rowTemplate\":\n            case \"dataRowTemplate\":\n            case \"twoWayBindingEnabled\":\n              this._invalidate(true, true);\n\n              args.handled = true;\n              break;\n\n            case \"scrolling\":\n              this._rowHeight = null;\n              this._tableElement = null;\n              args.handled = true;\n              break;\n\n            case \"rtlEnabled\":\n              this._rowHeight = null;\n              this._tableElement = null;\n              break;\n\n            case \"loadPanel\":\n              this._tableElement = null;\n\n              this._invalidate(true, \"loadPanel.enabled\" !== args.fullName);\n\n              args.handled = true;\n              break;\n\n            case \"noDataText\":\n              this.renderNoDataText();\n              args.handled = true;\n          }\n        },\n        dispose: function () {\n          clearTimeout(this._hideLoadingTimeoutID);\n          this._scrollable && this._scrollable.dispose();\n        },\n        setScrollerSpacing: function () {},\n        _restoreErrorRow: function () {}\n      };\n      return members;\n    }())\n  }\n};","map":{"version":3,"names":["_extends","getHeight","getOuterHeight","getWidth","$","getWindow","hasWindow","eventsEngine","deferRender","deferUpdate","setHeight","isDefined","isNumeric","isString","each","extend","getBoundingRect","getDefaultAlignment","isEmpty","compileGetter","gridCoreUtils","ColumnsView","Scrollable","removeEvent","messageLocalization","browser","ROWS_VIEW_CLASS","CONTENT_CLASS","NOWRAP_CLASS","GROUP_ROW_CLASS","GROUP_CELL_CLASS","DATA_ROW_CLASS","FREE_SPACE_CLASS","ROW_LINES_CLASS","COLUMN_LINES_CLASS","ROW_ALTERNATION_CLASS","LAST_ROW_BORDER","EMPTY_CLASS","ROW_INSERTED_ANIMATION_CLASS","LOADPANEL_HIDE_TIMEOUT","getMaxHorizontalScrollOffset","scrollable","Math","round","scrollWidth","clientWidth","rowsModule","defaultOptions","hoverStateEnabled","scrolling","useNative","loadPanel","enabled","text","format","width","height","showIndicator","indicatorSrc","showPane","dataRowTemplate","columnAutoWidth","noDataText","wordWrapEnabled","showColumnLines","showRowLines","rowAlternationEnabled","activeStateEnabled","twoWayBindingEnabled","views","rowsView","inherit","defaultCellTemplate","$container","options","isDataTextEmpty","rowType","container","get","setEmptyText","column","encodeHtml","textContent","innerHTML","members","_getDefaultTemplate","command","html","_getDefaultGroupTemplate","summaryTexts","option","data","caption","summaryItems","length","getGroupRowSummaryText","groupContinuedMessage","groupContinuesMessage","addClass","_update","_getCellTemplate","template","groupIndex","showWhenGrouped","groupCellTemplate","allowRenderToDetachedContainer","render","cellTemplate","_createRow","row","$row","callBase","apply","arguments","isGroup","isDataRow","visible","hide","isRowExpanded","isExpanded","setAria","toString","_rowPrepared","rowOptions","_isAltRow","watch","value","toggleClass","_setAriaRowIndex","rowIndex","component","isPagerMode","isVirtualRowRendering","pageIndex","pageSize","_dataController","getRowIndexOffset","_afterRowPrepared","e","arg","args","dataController","getVisibleRows","isNewRow","dispose","generateDataValues","columns","repaintRows","deep","skipImmediate","on","rowElement","_renderScrollable","force","$element","element","children","append","_loadPanel","_renderLoadPanel","parent","isLocalStore","getScrollable","isLoaded","getColumns","allColumnsHasWidth","i","minWidth","_hasHeight","_columnsController","_isColumnFixing","_renderScrollableCore","_handleScroll","rtlEnabled","isNativeScrolling","_scrollTop","scrollOffset","top","_scrollLeft","left","scrollLeft","_scrollRight","isScrollbarVisible","scrollChanged","fire","name","dxScrollableOptions","_createScrollableOptions","scrollHandler","bind","onScroll","_scrollable","_createComponent","_scrollableContainer","renderLoadPanel","_renderContent","contentElement","tableElement","empty","_findContentElement","_updateContent","newTableElement","change","_waitAsyncTemplates","done","getTableElement","changeType","executors","highlightChanges","rowInsertedClass","addWidgetPrefix","rowIndices","index","$newRowElement","_getRowElements","eq","changeTypes","item","items","push","$rowsElement","$rowElement","columnIndices","is","toggle","_updateCells","replaceWith","target","prependTo","insertBefore","insertAfter","last","isLiveUpdate","remove","setTableElement","_createEmptyRow","className","isFixed","$cell","getFixedColumns","_createCell","columnIndex","css","_appendEmptyRow","$table","$emptyRow","location","$tBodies","_getBodies","isTableContainer","first","prepend","$colgroup","_renderFreeSpaceRow","$tableElement","$freeSpaceRowElement","_wrapRowIfNeed","_checkRowKeys","that","rows","_getRows","keyExpr","store","key","some","fireError","_needUpdateRowHeight","itemsCount","_rowHeight","_getRowsHeight","_tableElement","$rowElements","not","toArray","reduce","sum","_updateRowHeight","rowsHeight","$content","content","$rows","_getFreeSpaceRowElements","tableElements","getTableElements","_getNoDataText","_rowClick","executeAction","evaluate","expr","getter","_rowDblClick","_getColumnsCountBeforeGroups","type","_getGroupCellOptions","columnsCountBeforeGroups","colspan","_needWrapRow","_renderCells","_renderGroupedCells","values","expandColumn","groupCellOptions","allowCollapsing","scrollingMode","cssClass","_needRenderCell","_renderCell","groupColumnAlignment","groupColumn","alignment","_renderRows","updateFreeSpaceRowHeight","_renderDataRowByTemplate","$tbody","appendTo","renderTemplate","_renderRow","rowTemplate","_renderTable","resizeCompleted","add","resizeCompletedHandler","scrollableInstance","closest","document","_visibilityChanged","_createTable","_renderCore","deferred","_lastColumnWidths","_getCellOptions","summaryCells","displayValue","getDisplayValue","parameters","oldValue","formatValue","resized","resizedCallbacks","groupingTextsOptions","isContinuationOnNextPage","isContinuation","_setRowsOpacityCore","visibleColumns","columnsController","columnID","isBand","hasClass","isParentBandColumn","opacity","_getDevicePixelRatio","devicePixelRatio","renderNoDataText","getCellOptions","columnIdentifier","cellOptions","columnOption","getVisibleColumns","calculateCellValue","getRow","itemCount","freeSpaceRowElements","totalCount","isFreeSpaceRowVisible","freeSpaceRowCount","pageCount","_updateLastRowBorder","scrollbarWidth","getScrollbarWidth","elementHeightWithoutScrollbar","contentHeight","showFreeSpaceRow","borderTopWidth","ceil","parseFloat","heightCorrection","_getHeightCorrection","resultHeight","show","isZoomedWebkit","webkit","isChromeLatest","chrome","version","hasExtraBorderTop","mozilla","_columnOptionChanged","optionNames","grouping","visibleWidth","_fireColumnResizedCallbacks","init","getController","_editorFactoryController","loadingChanged","isLoading","messageText","setLoading","dataSourceChanged","forceUpdateScrollPosition","_handleDataChanged","publicMethods","contentWidth","isHorizontal","scrollableContainer","offsetWidth","clientHeight","offsetHeight","lastColumnWidths","columnWidths","removeClass","_updateScrollable","getInstance","update","isRenovated","_updateHorizontalScrollPosition","maxHorizontalScrollOffset","scrollRight","scrollTo","x","_resizeCore","dxScrollable","_height","hasHeight","loadPanelOptions","animation","visibilityOptions","message","position","calculateLoadPanelPosition","clearTimeout","_hideLoadingTimeoutID","setTimeout","setRowsOpacity","_getCellElementsCore","$cells","groupCellIndex","filter","slice","_getBoundaryVisibleItemIndex","isTop","isFloor","itemIndex","prevOffset","offset","viewportBoundary","$contentElement","contentElementOffsetTop","rowElements","getTopVisibleItemIndex","getBottomVisibleItemIndex","getTopVisibleRowData","_scrollToElement","scrollToElement","optionChanged","_invalidate","handled","fullName","setScrollerSpacing","_restoreErrorRow"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/devextreme/esm/ui/grid_core/ui.grid_core.rows.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.rows.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    getHeight,\r\n    getOuterHeight,\r\n    getWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    deferRender,\r\n    deferUpdate\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    setHeight\r\n} from \"../../core/utils/style\";\r\nimport {\r\n    isDefined,\r\n    isNumeric,\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getBoundingRect,\r\n    getDefaultAlignment\r\n} from \"../../core/utils/position\";\r\nimport {\r\n    isEmpty\r\n} from \"../../core/utils/string\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport gridCoreUtils from \"./ui.grid_core.utils\";\r\nimport {\r\n    ColumnsView\r\n} from \"./ui.grid_core.columns_view\";\r\nimport Scrollable from \"../scroll_view/ui.scrollable\";\r\nimport {\r\n    removeEvent\r\n} from \"../../events/remove\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport browser from \"../../core/utils/browser\";\r\nvar ROWS_VIEW_CLASS = \"rowsview\";\r\nvar CONTENT_CLASS = \"content\";\r\nvar NOWRAP_CLASS = \"nowrap\";\r\nvar GROUP_ROW_CLASS = \"dx-group-row\";\r\nvar GROUP_CELL_CLASS = \"dx-group-cell\";\r\nvar DATA_ROW_CLASS = \"dx-data-row\";\r\nvar FREE_SPACE_CLASS = \"dx-freespace-row\";\r\nvar ROW_LINES_CLASS = \"dx-row-lines\";\r\nvar COLUMN_LINES_CLASS = \"dx-column-lines\";\r\nvar ROW_ALTERNATION_CLASS = \"dx-row-alt\";\r\nvar LAST_ROW_BORDER = \"dx-last-row-border\";\r\nvar EMPTY_CLASS = \"dx-empty\";\r\nvar ROW_INSERTED_ANIMATION_CLASS = \"row-inserted-animation\";\r\nvar LOADPANEL_HIDE_TIMEOUT = 200;\r\n\r\nfunction getMaxHorizontalScrollOffset(scrollable) {\r\n    return scrollable ? Math.round(scrollable.scrollWidth() - scrollable.clientWidth()) : 0\r\n}\r\nexport var rowsModule = {\r\n    defaultOptions: function() {\r\n        return {\r\n            hoverStateEnabled: false,\r\n            scrolling: {\r\n                useNative: \"auto\"\r\n            },\r\n            loadPanel: {\r\n                enabled: \"auto\",\r\n                text: messageLocalization.format(\"Loading\"),\r\n                width: 200,\r\n                height: 90,\r\n                showIndicator: true,\r\n                indicatorSrc: \"\",\r\n                showPane: true\r\n            },\r\n            dataRowTemplate: null,\r\n            columnAutoWidth: false,\r\n            noDataText: messageLocalization.format(\"dxDataGrid-noDataText\"),\r\n            wordWrapEnabled: false,\r\n            showColumnLines: true,\r\n            showRowLines: false,\r\n            rowAlternationEnabled: false,\r\n            activeStateEnabled: false,\r\n            twoWayBindingEnabled: true\r\n        }\r\n    },\r\n    views: {\r\n        rowsView: ColumnsView.inherit(function() {\r\n            var defaultCellTemplate = function($container, options) {\r\n                var isDataTextEmpty = isEmpty(options.text) && \"data\" === options.rowType;\r\n                var text = options.text;\r\n                var container = $container.get(0);\r\n                if (isDataTextEmpty) {\r\n                    gridCoreUtils.setEmptyText($container)\r\n                } else if (options.column.encodeHtml) {\r\n                    container.textContent = text\r\n                } else {\r\n                    container.innerHTML = text\r\n                }\r\n            };\r\n            var members = {\r\n                _getDefaultTemplate: function(column) {\r\n                    switch (column.command) {\r\n                        case \"empty\":\r\n                            return function(container) {\r\n                                container.html(\"&nbsp;\")\r\n                            };\r\n                        default:\r\n                            return defaultCellTemplate\r\n                    }\r\n                },\r\n                _getDefaultGroupTemplate: function(column) {\r\n                    var summaryTexts = this.option(\"summary.texts\");\r\n                    return function($container, options) {\r\n                        var data = options.data;\r\n                        var text = options.column.caption + \": \" + options.text;\r\n                        var container = $container.get(0);\r\n                        if (options.summaryItems && options.summaryItems.length) {\r\n                            text += \" \" + gridCoreUtils.getGroupRowSummaryText(options.summaryItems, summaryTexts)\r\n                        }\r\n                        if (data) {\r\n                            if (options.groupContinuedMessage && options.groupContinuesMessage) {\r\n                                text += \" (\" + options.groupContinuedMessage + \". \" + options.groupContinuesMessage + \")\"\r\n                            } else if (options.groupContinuesMessage) {\r\n                                text += \" (\" + options.groupContinuesMessage + \")\"\r\n                            } else if (options.groupContinuedMessage) {\r\n                                text += \" (\" + options.groupContinuedMessage + \")\"\r\n                            }\r\n                        }\r\n                        $container.addClass(GROUP_CELL_CLASS);\r\n                        if (column.encodeHtml) {\r\n                            container.textContent = text\r\n                        } else {\r\n                            container.innerHTML = text\r\n                        }\r\n                    }\r\n                },\r\n                _update: function() {},\r\n                _getCellTemplate: function(options) {\r\n                    var column = options.column;\r\n                    var template;\r\n                    if (\"group\" === options.rowType && isDefined(column.groupIndex) && !column.showWhenGrouped && !column.command) {\r\n                        template = column.groupCellTemplate || {\r\n                            allowRenderToDetachedContainer: true,\r\n                            render: this._getDefaultGroupTemplate(column)\r\n                        }\r\n                    } else if ((\"data\" === options.rowType || column.command) && column.cellTemplate) {\r\n                        template = column.cellTemplate\r\n                    } else {\r\n                        template = {\r\n                            allowRenderToDetachedContainer: true,\r\n                            render: this._getDefaultTemplate(column)\r\n                        }\r\n                    }\r\n                    return template\r\n                },\r\n                _createRow: function(row) {\r\n                    var $row = this.callBase.apply(this, arguments);\r\n                    if (row) {\r\n                        var isGroup = \"group\" === row.rowType;\r\n                        var isDataRow = \"data\" === row.rowType;\r\n                        isDataRow && $row.addClass(DATA_ROW_CLASS);\r\n                        isDataRow && this.option(\"showRowLines\") && $row.addClass(ROW_LINES_CLASS);\r\n                        this.option(\"showColumnLines\") && $row.addClass(COLUMN_LINES_CLASS);\r\n                        if (false === row.visible) {\r\n                            $row.hide()\r\n                        }\r\n                        if (isGroup) {\r\n                            $row.addClass(GROUP_ROW_CLASS);\r\n                            var isRowExpanded = row.isExpanded;\r\n                            this.setAria(\"role\", \"row\", $row);\r\n                            this.setAria(\"expanded\", isDefined(isRowExpanded) && isRowExpanded.toString(), $row)\r\n                        }\r\n                    }\r\n                    return $row\r\n                },\r\n                _rowPrepared: function($row, rowOptions, row) {\r\n                    if (\"data\" === rowOptions.rowType) {\r\n                        if (this.option(\"rowAlternationEnabled\")) {\r\n                            this._isAltRow(row) && $row.addClass(ROW_ALTERNATION_CLASS);\r\n                            rowOptions.watch && rowOptions.watch(() => this._isAltRow(row), value => {\r\n                                $row.toggleClass(ROW_ALTERNATION_CLASS, value)\r\n                            })\r\n                        }\r\n                        this._setAriaRowIndex(rowOptions, $row);\r\n                        rowOptions.watch && rowOptions.watch(() => rowOptions.rowIndex, () => this._setAriaRowIndex(rowOptions, $row))\r\n                    }\r\n                    this.callBase.apply(this, arguments)\r\n                },\r\n                _setAriaRowIndex: function(row, $row) {\r\n                    var component = this.component;\r\n                    var isPagerMode = \"standard\" === component.option(\"scrolling.mode\") && !gridCoreUtils.isVirtualRowRendering(component);\r\n                    var rowIndex = row.rowIndex + 1;\r\n                    if (isPagerMode) {\r\n                        rowIndex = component.pageIndex() * component.pageSize() + rowIndex\r\n                    } else {\r\n                        rowIndex += this._dataController.getRowIndexOffset()\r\n                    }\r\n                    this.setAria(\"rowindex\", rowIndex, $row)\r\n                },\r\n                _afterRowPrepared: function(e) {\r\n                    var arg = e.args[0];\r\n                    var dataController = this._dataController;\r\n                    var row = dataController.getVisibleRows()[arg.rowIndex];\r\n                    var watch = this.option(\"integrationOptions.watchMethod\");\r\n                    if (!arg.data || \"data\" !== arg.rowType || arg.isNewRow || !this.option(\"twoWayBindingEnabled\") || !watch || !row) {\r\n                        return\r\n                    }\r\n                    var dispose = watch(() => dataController.generateDataValues(arg.data, arg.columns), () => {\r\n                        dataController.repaintRows([row.rowIndex], this.option(\"repaintChangesOnly\"))\r\n                    }, {\r\n                        deep: true,\r\n                        skipImmediate: true\r\n                    });\r\n                    eventsEngine.on(arg.rowElement, removeEvent, dispose)\r\n                },\r\n                _renderScrollable: function(force) {\r\n                    var $element = this.element();\r\n                    if (!$element.children().length) {\r\n                        $element.append(\"<div>\")\r\n                    }\r\n                    if (force || !this._loadPanel) {\r\n                        this._renderLoadPanel($element, $element.parent(), this._dataController.isLocalStore())\r\n                    }\r\n                    if ((force || !this.getScrollable()) && this._dataController.isLoaded()) {\r\n                        var columns = this.getColumns();\r\n                        var allColumnsHasWidth = true;\r\n                        for (var i = 0; i < columns.length; i++) {\r\n                            if (!columns[i].width && !columns[i].minWidth) {\r\n                                allColumnsHasWidth = false;\r\n                                break\r\n                            }\r\n                        }\r\n                        if (this.option(\"columnAutoWidth\") || this._hasHeight || allColumnsHasWidth || this._columnsController._isColumnFixing()) {\r\n                            this._renderScrollableCore($element)\r\n                        }\r\n                    }\r\n                },\r\n                _handleScroll: function(e) {\r\n                    var rtlEnabled = this.option(\"rtlEnabled\");\r\n                    var isNativeScrolling = e.component.option(\"useNative\");\r\n                    this._scrollTop = e.scrollOffset.top;\r\n                    this._scrollLeft = e.scrollOffset.left;\r\n                    var scrollLeft = e.scrollOffset.left;\r\n                    if (rtlEnabled) {\r\n                        this._scrollRight = getMaxHorizontalScrollOffset(e.component) - this._scrollLeft;\r\n                        if (isNativeScrolling) {\r\n                            scrollLeft = -this._scrollRight\r\n                        }\r\n                        if (!this.isScrollbarVisible(true)) {\r\n                            this._scrollLeft = -1\r\n                        }\r\n                    }\r\n                    this.scrollChanged.fire(_extends({}, e.scrollOffset, {\r\n                        left: scrollLeft\r\n                    }), this.name)\r\n                },\r\n                _renderScrollableCore: function($element) {\r\n                    var dxScrollableOptions = this._createScrollableOptions();\r\n                    var scrollHandler = this._handleScroll.bind(this);\r\n                    dxScrollableOptions.onScroll = scrollHandler;\r\n                    this._scrollable = this._createComponent($element, Scrollable, dxScrollableOptions);\r\n                    this._scrollableContainer = this._scrollable && $(this._scrollable.container())\r\n                },\r\n                _renderLoadPanel: gridCoreUtils.renderLoadPanel,\r\n                _renderContent: function(contentElement, tableElement) {\r\n                    contentElement.empty().append(tableElement);\r\n                    return this._findContentElement()\r\n                },\r\n                _updateContent: function(newTableElement, change) {\r\n                    return this._waitAsyncTemplates(change).done(() => {\r\n                        var tableElement = this.getTableElement();\r\n                        var contentElement = this._findContentElement();\r\n                        var changeType = change && change.changeType;\r\n                        var executors = [];\r\n                        var highlightChanges = this.option(\"highlightChanges\");\r\n                        var rowInsertedClass = this.addWidgetPrefix(ROW_INSERTED_ANIMATION_CLASS);\r\n                        switch (changeType) {\r\n                            case \"update\":\r\n                                each(change.rowIndices, (index, rowIndex) => {\r\n                                    var $newRowElement = this._getRowElements(newTableElement).eq(index);\r\n                                    var changeType = change.changeTypes && change.changeTypes[index];\r\n                                    var item = change.items && change.items[index];\r\n                                    executors.push(() => {\r\n                                        var $rowsElement = this._getRowElements();\r\n                                        var $rowElement = $rowsElement.eq(rowIndex);\r\n                                        switch (changeType) {\r\n                                            case \"update\":\r\n                                                if (item) {\r\n                                                    var columnIndices = change.columnIndices && change.columnIndices[index];\r\n                                                    if (isDefined(item.visible) && item.visible !== $rowElement.is(\":visible\")) {\r\n                                                        $rowElement.toggle(item.visible)\r\n                                                    } else if (columnIndices) {\r\n                                                        this._updateCells($rowElement, $newRowElement, columnIndices)\r\n                                                    } else {\r\n                                                        $rowElement.replaceWith($newRowElement)\r\n                                                    }\r\n                                                }\r\n                                                break;\r\n                                            case \"insert\":\r\n                                                if (!$rowsElement.length) {\r\n                                                    if (tableElement) {\r\n                                                        var target = $newRowElement.is(\"tbody\") ? tableElement : tableElement.children(\"tbody\");\r\n                                                        $newRowElement.prependTo(target)\r\n                                                    }\r\n                                                } else if ($rowElement.length) {\r\n                                                    $newRowElement.insertBefore($rowElement)\r\n                                                } else {\r\n                                                    $newRowElement.insertAfter($rowsElement.last())\r\n                                                }\r\n                                                if (highlightChanges && change.isLiveUpdate) {\r\n                                                    $newRowElement.addClass(rowInsertedClass)\r\n                                                }\r\n                                                break;\r\n                                            case \"remove\":\r\n                                                $rowElement.remove()\r\n                                        }\r\n                                    })\r\n                                });\r\n                                each(executors, (function() {\r\n                                    this()\r\n                                }));\r\n                                newTableElement.remove();\r\n                                break;\r\n                            default:\r\n                                this.setTableElement(newTableElement);\r\n                                contentElement.addClass(this.addWidgetPrefix(CONTENT_CLASS));\r\n                                this._renderContent(contentElement, newTableElement)\r\n                        }\r\n                    })\r\n                },\r\n                _createEmptyRow: function(className, isFixed, height) {\r\n                    var $cell;\r\n                    var $row = this._createRow();\r\n                    var columns = isFixed ? this.getFixedColumns() : this.getColumns();\r\n                    $row.addClass(className).toggleClass(COLUMN_LINES_CLASS, this.option(\"showColumnLines\"));\r\n                    for (var i = 0; i < columns.length; i++) {\r\n                        $cell = this._createCell({\r\n                            column: columns[i],\r\n                            rowType: \"freeSpace\",\r\n                            columnIndex: i,\r\n                            columns: columns\r\n                        });\r\n                        isNumeric(height) && $cell.css(\"height\", height);\r\n                        $row.append($cell)\r\n                    }\r\n                    this.setAria(\"role\", \"presentation\", $row);\r\n                    return $row\r\n                },\r\n                _appendEmptyRow: function($table, $emptyRow, location) {\r\n                    var $tBodies = this._getBodies($table);\r\n                    var isTableContainer = !$tBodies.length || $emptyRow.is(\"tbody\");\r\n                    var $container = isTableContainer ? $table : $tBodies;\r\n                    if (\"top\" === location) {\r\n                        $container.first().prepend($emptyRow);\r\n                        if (isTableContainer) {\r\n                            var $colgroup = $container.children(\"colgroup\");\r\n                            $container.prepend($colgroup)\r\n                        }\r\n                    } else {\r\n                        $container.last().append($emptyRow)\r\n                    }\r\n                },\r\n                _renderFreeSpaceRow: function($tableElement, change) {\r\n                    var $freeSpaceRowElement = this._createEmptyRow(FREE_SPACE_CLASS);\r\n                    $freeSpaceRowElement = this._wrapRowIfNeed($tableElement, $freeSpaceRowElement, \"refresh\" === (null === change || void 0 === change ? void 0 : change.changeType));\r\n                    this._appendEmptyRow($tableElement, $freeSpaceRowElement)\r\n                },\r\n                _checkRowKeys: function(options) {\r\n                    var that = this;\r\n                    var rows = that._getRows(options);\r\n                    var keyExpr = that._dataController.store() && that._dataController.store().key();\r\n                    keyExpr && rows.some((function(row) {\r\n                        if (\"data\" === row.rowType && void 0 === row.key) {\r\n                            that._dataController.fireError(\"E1046\", keyExpr);\r\n                            return true\r\n                        }\r\n                    }))\r\n                },\r\n                _needUpdateRowHeight: function(itemsCount) {\r\n                    return itemsCount > 0 && !this._rowHeight\r\n                },\r\n                _getRowsHeight: function($tableElement) {\r\n                    $tableElement = $tableElement || this._tableElement;\r\n                    var $rowElements = $tableElement.children(\"tbody\").children().not(\".dx-virtual-row\").not(\".\" + FREE_SPACE_CLASS);\r\n                    return $rowElements.toArray().reduce((function(sum, row) {\r\n                        return sum + getBoundingRect(row).height\r\n                    }), 0)\r\n                },\r\n                _updateRowHeight: function() {\r\n                    var $tableElement = this.getTableElement();\r\n                    var itemsCount = this._dataController.items().length;\r\n                    if ($tableElement && this._needUpdateRowHeight(itemsCount)) {\r\n                        var rowsHeight = this._getRowsHeight($tableElement);\r\n                        this._rowHeight = rowsHeight / itemsCount\r\n                    }\r\n                },\r\n                _findContentElement: function() {\r\n                    var $content = this.element();\r\n                    var scrollable = this.getScrollable();\r\n                    if ($content) {\r\n                        if (scrollable) {\r\n                            $content = $(scrollable.content())\r\n                        }\r\n                        return $content.children().first()\r\n                    }\r\n                },\r\n                _getRowElements: function(tableElement) {\r\n                    var $rows = this.callBase(tableElement);\r\n                    return $rows && $rows.not(\".\" + FREE_SPACE_CLASS)\r\n                },\r\n                _getFreeSpaceRowElements: function($table) {\r\n                    var tableElements = $table || this.getTableElements();\r\n                    return tableElements && tableElements.children(\"tbody\").children(\".\" + FREE_SPACE_CLASS)\r\n                },\r\n                _getNoDataText: function() {\r\n                    return this.option(\"noDataText\")\r\n                },\r\n                _rowClick: function(e) {\r\n                    var item = this._dataController.items()[e.rowIndex] || {};\r\n                    this.executeAction(\"onRowClick\", extend({\r\n                        evaluate: function(expr) {\r\n                            var getter = compileGetter(expr);\r\n                            return getter(item.data)\r\n                        }\r\n                    }, e, item))\r\n                },\r\n                _rowDblClick: function(e) {\r\n                    var item = this._dataController.items()[e.rowIndex] || {};\r\n                    this.executeAction(\"onRowDblClick\", extend({}, e, item))\r\n                },\r\n                _getColumnsCountBeforeGroups: function(columns) {\r\n                    for (var i = 0; i < columns.length; i++) {\r\n                        if (\"groupExpand\" === columns[i].type) {\r\n                            return i\r\n                        }\r\n                    }\r\n                    return 0\r\n                },\r\n                _getGroupCellOptions: function(options) {\r\n                    var columnsCountBeforeGroups = this._getColumnsCountBeforeGroups(options.columns);\r\n                    var columnIndex = (options.row.groupIndex || 0) + columnsCountBeforeGroups;\r\n                    return {\r\n                        columnIndex: columnIndex,\r\n                        colspan: options.columns.length - columnIndex - 1\r\n                    }\r\n                },\r\n                _needWrapRow: function() {\r\n                    return this.callBase.apply(this, arguments) || !!this.option(\"dataRowTemplate\")\r\n                },\r\n                _renderCells: function($row, options) {\r\n                    if (\"group\" === options.row.rowType) {\r\n                        this._renderGroupedCells($row, options)\r\n                    } else if (options.row.values) {\r\n                        this.callBase($row, options)\r\n                    }\r\n                },\r\n                _renderGroupedCells: function($row, options) {\r\n                    var row = options.row;\r\n                    var expandColumn;\r\n                    var columns = options.columns;\r\n                    var rowIndex = row.rowIndex;\r\n                    var isExpanded;\r\n                    var groupCellOptions = this._getGroupCellOptions(options);\r\n                    for (var i = 0; i <= groupCellOptions.columnIndex; i++) {\r\n                        if (i === groupCellOptions.columnIndex && columns[i].allowCollapsing && \"infinite\" !== options.scrollingMode) {\r\n                            isExpanded = !!row.isExpanded;\r\n                            expandColumn = columns[i]\r\n                        } else {\r\n                            isExpanded = null;\r\n                            expandColumn = {\r\n                                command: \"expand\",\r\n                                cssClass: columns[i].cssClass\r\n                            }\r\n                        }\r\n                        if (this._needRenderCell(i, options.columnIndices)) {\r\n                            this._renderCell($row, {\r\n                                value: isExpanded,\r\n                                row: row,\r\n                                rowIndex: rowIndex,\r\n                                column: expandColumn,\r\n                                columnIndex: i,\r\n                                columnIndices: options.columnIndices,\r\n                                change: options.change\r\n                            })\r\n                        }\r\n                    }\r\n                    var groupColumnAlignment = getDefaultAlignment(this.option(\"rtlEnabled\"));\r\n                    var groupColumn = extend({}, columns[groupCellOptions.columnIndex], {\r\n                        command: null,\r\n                        type: null,\r\n                        cssClass: null,\r\n                        width: null,\r\n                        showWhenGrouped: false,\r\n                        alignment: groupColumnAlignment\r\n                    });\r\n                    if (groupCellOptions.colspan > 1) {\r\n                        groupColumn.colspan = groupCellOptions.colspan\r\n                    }\r\n                    if (this._needRenderCell(groupCellOptions.columnIndex + 1, options.columnIndices)) {\r\n                        this._renderCell($row, {\r\n                            value: row.values[row.groupIndex],\r\n                            row: row,\r\n                            rowIndex: rowIndex,\r\n                            column: groupColumn,\r\n                            columnIndex: groupCellOptions.columnIndex + 1,\r\n                            columnIndices: options.columnIndices,\r\n                            change: options.change\r\n                        })\r\n                    }\r\n                },\r\n                _renderRows: function($table, options) {\r\n                    var scrollingMode = this.option(\"scrolling.mode\");\r\n                    this.callBase($table, extend({\r\n                        scrollingMode: scrollingMode\r\n                    }, options));\r\n                    this._checkRowKeys(options.change);\r\n                    this._renderFreeSpaceRow($table, options.change);\r\n                    if (!this._hasHeight) {\r\n                        this.updateFreeSpaceRowHeight($table)\r\n                    }\r\n                },\r\n                _renderDataRowByTemplate($table, options, dataRowTemplate) {\r\n                    var row = options.row;\r\n                    var rowOptions = extend({\r\n                        columns: options.columns\r\n                    }, row);\r\n                    var $tbody = this._createRow(row, \"tbody\");\r\n                    $tbody.appendTo($table);\r\n                    this.renderTemplate($tbody, dataRowTemplate, rowOptions, true, options.change);\r\n                    this._rowPrepared($tbody, rowOptions, options.row)\r\n                },\r\n                _renderRow: function($table, options) {\r\n                    var row = options.row;\r\n                    var rowTemplate = this.option().rowTemplate;\r\n                    var dataRowTemplate = this.option(\"dataRowTemplate\");\r\n                    if (\"data\" === row.rowType && dataRowTemplate) {\r\n                        this._renderDataRowByTemplate($table, options, dataRowTemplate)\r\n                    } else if ((\"data\" === row.rowType || \"group\" === row.rowType) && !isDefined(row.groupIndex) && rowTemplate) {\r\n                        this.renderTemplate($table, rowTemplate, extend({\r\n                            columns: options.columns\r\n                        }, row), true)\r\n                    } else {\r\n                        this.callBase($table, options)\r\n                    }\r\n                },\r\n                _renderTable: function(options) {\r\n                    var that = this;\r\n                    var $table = that.callBase(options);\r\n                    if (!isDefined(that.getTableElement())) {\r\n                        that.setTableElement($table);\r\n                        that._renderScrollable(true);\r\n                        that.resizeCompleted.add((function resizeCompletedHandler() {\r\n                            var scrollableInstance = that.getScrollable();\r\n                            if (scrollableInstance && that.element().closest(getWindow().document).length) {\r\n                                that.resizeCompleted.remove(resizeCompletedHandler);\r\n                                scrollableInstance._visibilityChanged(true)\r\n                            }\r\n                        }))\r\n                    } else {\r\n                        that._renderScrollable()\r\n                    }\r\n                    return $table\r\n                },\r\n                _createTable: function() {\r\n                    var $table = this.callBase.apply(this, arguments);\r\n                    if (this.option().rowTemplate || this.option().dataRowTemplate) {\r\n                        $table.appendTo(this.component.$element())\r\n                    }\r\n                    return $table\r\n                },\r\n                _renderCore: function(change) {\r\n                    var $element = this.element();\r\n                    $element.addClass(this.addWidgetPrefix(ROWS_VIEW_CLASS)).toggleClass(this.addWidgetPrefix(NOWRAP_CLASS), !this.option(\"wordWrapEnabled\"));\r\n                    $element.toggleClass(EMPTY_CLASS, this._dataController.isEmpty());\r\n                    this.setAria(\"role\", \"presentation\", $element);\r\n                    var $table = this._renderTable({\r\n                        change: change\r\n                    });\r\n                    var deferred = this._updateContent($table, change);\r\n                    this.callBase(change);\r\n                    this._lastColumnWidths = null;\r\n                    return deferred\r\n                },\r\n                _getRows: function(change) {\r\n                    return change && change.items || this._dataController.items()\r\n                },\r\n                _getCellOptions: function(options) {\r\n                    var column = options.column;\r\n                    var row = options.row;\r\n                    var data = row.data;\r\n                    var summaryCells = row && row.summaryCells;\r\n                    var value = options.value;\r\n                    var displayValue = gridCoreUtils.getDisplayValue(column, value, data, row.rowType);\r\n                    var parameters = this.callBase(options);\r\n                    parameters.value = value;\r\n                    parameters.oldValue = options.oldValue;\r\n                    parameters.displayValue = displayValue;\r\n                    parameters.row = row;\r\n                    parameters.key = row.key;\r\n                    parameters.data = data;\r\n                    parameters.rowType = row.rowType;\r\n                    parameters.values = row.values;\r\n                    parameters.text = !column.command ? gridCoreUtils.formatValue(displayValue, column) : \"\";\r\n                    parameters.rowIndex = row.rowIndex;\r\n                    parameters.summaryItems = summaryCells && summaryCells[options.columnIndex];\r\n                    parameters.resized = column.resizedCallbacks;\r\n                    if (isDefined(column.groupIndex) && !column.command) {\r\n                        var groupingTextsOptions = this.option(\"grouping.texts\");\r\n                        var scrollingMode = this.option(\"scrolling.mode\");\r\n                        if (\"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\r\n                            parameters.groupContinuesMessage = data && data.isContinuationOnNextPage && groupingTextsOptions && groupingTextsOptions.groupContinuesMessage;\r\n                            parameters.groupContinuedMessage = data && data.isContinuation && groupingTextsOptions && groupingTextsOptions.groupContinuedMessage\r\n                        }\r\n                    }\r\n                    return parameters\r\n                },\r\n                _setRowsOpacityCore: function($rows, visibleColumns, columnIndex, value) {\r\n                    var columnsController = this._columnsController;\r\n                    var columns = columnsController.getColumns();\r\n                    var column = columns && columns[columnIndex];\r\n                    var columnID = column && column.isBand && column.index;\r\n                    each($rows, (function(rowIndex, row) {\r\n                        if (!$(row).hasClass(GROUP_ROW_CLASS)) {\r\n                            for (var i = 0; i < visibleColumns.length; i++) {\r\n                                if (isNumeric(columnID) && columnsController.isParentBandColumn(visibleColumns[i].index, columnID) || visibleColumns[i].index === columnIndex) {\r\n                                    $rows.eq(rowIndex).children().eq(i).css({\r\n                                        opacity: value\r\n                                    });\r\n                                    if (!isNumeric(columnID)) {\r\n                                        break\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }))\r\n                },\r\n                _getDevicePixelRatio: function() {\r\n                    return getWindow().devicePixelRatio\r\n                },\r\n                renderNoDataText: gridCoreUtils.renderNoDataText,\r\n                getCellOptions: function(rowIndex, columnIdentifier) {\r\n                    var rowOptions = this._dataController.items()[rowIndex];\r\n                    var cellOptions;\r\n                    var column;\r\n                    if (rowOptions) {\r\n                        if (isString(columnIdentifier)) {\r\n                            column = this._columnsController.columnOption(columnIdentifier)\r\n                        } else {\r\n                            column = this._columnsController.getVisibleColumns()[columnIdentifier]\r\n                        }\r\n                        if (column) {\r\n                            cellOptions = this._getCellOptions({\r\n                                value: column.calculateCellValue(rowOptions.data),\r\n                                rowIndex: rowOptions.rowIndex,\r\n                                row: rowOptions,\r\n                                column: column\r\n                            })\r\n                        }\r\n                    }\r\n                    return cellOptions\r\n                },\r\n                getRow: function(index) {\r\n                    if (index >= 0) {\r\n                        var rows = this._getRowElements();\r\n                        if (rows.length > index) {\r\n                            return $(rows[index])\r\n                        }\r\n                    }\r\n                },\r\n                updateFreeSpaceRowHeight: function($table) {\r\n                    var dataController = this._dataController;\r\n                    var itemCount = dataController.items(true).length;\r\n                    var contentElement = this._findContentElement();\r\n                    var freeSpaceRowElements = this._getFreeSpaceRowElements($table);\r\n                    if (freeSpaceRowElements && contentElement && dataController.totalCount() >= 0) {\r\n                        var isFreeSpaceRowVisible = false;\r\n                        if (itemCount > 0) {\r\n                            if (!this._hasHeight) {\r\n                                var freeSpaceRowCount = dataController.pageSize() - itemCount;\r\n                                var scrollingMode = this.option(\"scrolling.mode\");\r\n                                if (freeSpaceRowCount > 0 && dataController.pageCount() > 1 && \"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\r\n                                    setHeight(freeSpaceRowElements, freeSpaceRowCount * this._rowHeight);\r\n                                    isFreeSpaceRowVisible = true\r\n                                }\r\n                                if (!isFreeSpaceRowVisible && $table) {\r\n                                    setHeight(freeSpaceRowElements, 0)\r\n                                } else {\r\n                                    freeSpaceRowElements.toggle(isFreeSpaceRowVisible)\r\n                                }\r\n                                this._updateLastRowBorder(isFreeSpaceRowVisible)\r\n                            } else {\r\n                                freeSpaceRowElements.hide();\r\n                                deferUpdate(() => {\r\n                                    var scrollbarWidth = this.getScrollbarWidth(true);\r\n                                    var elementHeightWithoutScrollbar = getHeight(this.element()) - scrollbarWidth;\r\n                                    var contentHeight = getOuterHeight(contentElement);\r\n                                    var showFreeSpaceRow = elementHeightWithoutScrollbar - contentHeight > 0;\r\n                                    var rowsHeight = this._getRowsHeight(contentElement.children().first());\r\n                                    var $tableElement = $table || this.getTableElements();\r\n                                    var borderTopWidth = Math.ceil(parseFloat($tableElement.css(\"borderTopWidth\")));\r\n                                    var heightCorrection = this._getHeightCorrection();\r\n                                    var resultHeight = elementHeightWithoutScrollbar - rowsHeight - borderTopWidth - heightCorrection;\r\n                                    if (showFreeSpaceRow) {\r\n                                        deferRender(() => {\r\n                                            freeSpaceRowElements.css(\"height\", resultHeight);\r\n                                            isFreeSpaceRowVisible = true;\r\n                                            freeSpaceRowElements.show()\r\n                                        })\r\n                                    }\r\n                                    deferRender(() => this._updateLastRowBorder(isFreeSpaceRowVisible))\r\n                                })\r\n                            }\r\n                        } else {\r\n                            freeSpaceRowElements.css(\"height\", 0);\r\n                            freeSpaceRowElements.show();\r\n                            this._updateLastRowBorder(true)\r\n                        }\r\n                    }\r\n                },\r\n                _getHeightCorrection: function() {\r\n                    var isZoomedWebkit = browser.webkit && this._getDevicePixelRatio() >= 2;\r\n                    var isChromeLatest = browser.chrome && browser.version >= 91;\r\n                    var hasExtraBorderTop = browser.mozilla && browser.version >= 70 && !this.option(\"showRowLines\");\r\n                    return isZoomedWebkit || hasExtraBorderTop || isChromeLatest ? 1 : 0\r\n                },\r\n                _columnOptionChanged: function(e) {\r\n                    var optionNames = e.optionNames;\r\n                    if (e.changeTypes.grouping) {\r\n                        return\r\n                    }\r\n                    if (optionNames.width || optionNames.visibleWidth) {\r\n                        this.callBase(e);\r\n                        this._fireColumnResizedCallbacks()\r\n                    }\r\n                },\r\n                getScrollable: function() {\r\n                    return this._scrollable\r\n                },\r\n                init: function() {\r\n                    var that = this;\r\n                    var dataController = that.getController(\"data\");\r\n                    that.callBase();\r\n                    that._editorFactoryController = that.getController(\"editorFactory\");\r\n                    that._rowHeight = 0;\r\n                    that._scrollTop = 0;\r\n                    that._scrollLeft = -1;\r\n                    that._scrollRight = 0;\r\n                    that._hasHeight = false;\r\n                    dataController.loadingChanged.add((function(isLoading, messageText) {\r\n                        that.setLoading(isLoading, messageText)\r\n                    }));\r\n                    dataController.dataSourceChanged.add(() => {\r\n                        if (this._scrollLeft >= 0 && !this._dataController.isLoading()) {\r\n                            this._handleScroll({\r\n                                component: this.getScrollable(),\r\n                                forceUpdateScrollPosition: true,\r\n                                scrollOffset: {\r\n                                    top: this._scrollTop,\r\n                                    left: this._scrollLeft\r\n                                }\r\n                            })\r\n                        }\r\n                    })\r\n                },\r\n                _handleDataChanged: function(change) {\r\n                    switch (change.changeType) {\r\n                        case \"refresh\":\r\n                        case \"prepend\":\r\n                        case \"append\":\r\n                        case \"update\":\r\n                            this.render(null, change);\r\n                            break;\r\n                        default:\r\n                            this._update(change)\r\n                    }\r\n                },\r\n                publicMethods: function() {\r\n                    return [\"isScrollbarVisible\", \"getTopVisibleRowData\", \"getScrollbarWidth\", \"getCellElement\", \"getRowElement\", \"getScrollable\"]\r\n                },\r\n                contentWidth: function() {\r\n                    return getWidth(this.element()) - this.getScrollbarWidth()\r\n                },\r\n                getScrollbarWidth: function(isHorizontal) {\r\n                    var scrollableContainer = this._scrollableContainer && this._scrollableContainer.get(0);\r\n                    var scrollbarWidth = 0;\r\n                    if (scrollableContainer) {\r\n                        if (!isHorizontal) {\r\n                            scrollbarWidth = scrollableContainer.clientWidth ? scrollableContainer.offsetWidth - scrollableContainer.clientWidth : 0\r\n                        } else {\r\n                            scrollbarWidth = scrollableContainer.clientHeight ? scrollableContainer.offsetHeight - scrollableContainer.clientHeight : 0;\r\n                            scrollbarWidth += (that = this, scrollable = that.getScrollable(), scrollable ? Math.ceil(parseFloat($(scrollable.content()).css(\"paddingBottom\"))) : 0)\r\n                        }\r\n                    }\r\n                    var that, scrollable;\r\n                    return scrollbarWidth > 0 ? scrollbarWidth : 0\r\n                },\r\n                _fireColumnResizedCallbacks: function() {\r\n                    var lastColumnWidths = this._lastColumnWidths || [];\r\n                    var columnWidths = [];\r\n                    var columns = this.getColumns();\r\n                    for (var i = 0; i < columns.length; i++) {\r\n                        columnWidths[i] = columns[i].visibleWidth;\r\n                        if (columns[i].resizedCallbacks && !isDefined(columns[i].groupIndex) && lastColumnWidths[i] !== columnWidths[i]) {\r\n                            columns[i].resizedCallbacks.fire(columnWidths[i])\r\n                        }\r\n                    }\r\n                    this._lastColumnWidths = columnWidths\r\n                },\r\n                _updateLastRowBorder: function(isFreeSpaceRowVisible) {\r\n                    if (this.option(\"showBorders\") && this.option(\"showRowLines\") && !isFreeSpaceRowVisible) {\r\n                        this.element().addClass(LAST_ROW_BORDER)\r\n                    } else {\r\n                        this.element().removeClass(LAST_ROW_BORDER)\r\n                    }\r\n                },\r\n                _updateScrollable: function() {\r\n                    var scrollable = Scrollable.getInstance(this.element());\r\n                    if (scrollable) {\r\n                        scrollable.update();\r\n                        if (scrollable.option(\"useNative\") || !(null !== scrollable && void 0 !== scrollable && scrollable.isRenovated())) {\r\n                            this._updateHorizontalScrollPosition()\r\n                        }\r\n                    }\r\n                },\r\n                _updateHorizontalScrollPosition: function() {\r\n                    var scrollable = this.getScrollable();\r\n                    var scrollLeft = scrollable && scrollable.scrollOffset().left;\r\n                    var rtlEnabled = this.option(\"rtlEnabled\");\r\n                    if (rtlEnabled) {\r\n                        var maxHorizontalScrollOffset = getMaxHorizontalScrollOffset(scrollable);\r\n                        var scrollRight = maxHorizontalScrollOffset - scrollLeft;\r\n                        if (scrollRight !== this._scrollRight) {\r\n                            this._scrollLeft = maxHorizontalScrollOffset - this._scrollRight\r\n                        }\r\n                    }\r\n                    if (this._scrollLeft >= 0 && scrollLeft !== this._scrollLeft) {\r\n                        scrollable.scrollTo({\r\n                            x: this._scrollLeft\r\n                        })\r\n                    }\r\n                },\r\n                _resizeCore: function() {\r\n                    var that = this;\r\n                    that._fireColumnResizedCallbacks();\r\n                    that._updateRowHeight();\r\n                    deferRender((function() {\r\n                        that._renderScrollable();\r\n                        that.renderNoDataText();\r\n                        that.updateFreeSpaceRowHeight();\r\n                        deferUpdate((function() {\r\n                            that._updateScrollable()\r\n                        }))\r\n                    }))\r\n                },\r\n                scrollTo: function(location) {\r\n                    var $element = this.element();\r\n                    var dxScrollable = $element && Scrollable.getInstance($element);\r\n                    if (dxScrollable) {\r\n                        dxScrollable.scrollTo(location)\r\n                    }\r\n                },\r\n                height: function(_height, hasHeight) {\r\n                    var that = this;\r\n                    var $element = this.element();\r\n                    if (0 === arguments.length) {\r\n                        return $element ? getOuterHeight($element, true) : 0\r\n                    }\r\n                    that._hasHeight = void 0 === hasHeight ? \"auto\" !== _height : hasHeight;\r\n                    if (isDefined(_height) && $element) {\r\n                        setHeight($element, _height)\r\n                    }\r\n                },\r\n                hasHeight: function() {\r\n                    return !!this._hasHeight\r\n                },\r\n                setLoading: function(isLoading, messageText) {\r\n                    var loadPanel = this._loadPanel;\r\n                    var dataController = this._dataController;\r\n                    var loadPanelOptions = this.option(\"loadPanel\") || {};\r\n                    var animation = dataController.isLoaded() ? loadPanelOptions.animation : null;\r\n                    var $element = this.element();\r\n                    if (!hasWindow()) {\r\n                        return\r\n                    }\r\n                    if (!loadPanel && void 0 !== messageText && dataController.isLocalStore() && \"auto\" === loadPanelOptions.enabled && $element) {\r\n                        this._renderLoadPanel($element, $element.parent());\r\n                        loadPanel = this._loadPanel\r\n                    }\r\n                    if (loadPanel) {\r\n                        var visibilityOptions = {\r\n                            message: messageText || loadPanelOptions.text,\r\n                            animation: animation,\r\n                            visible: isLoading\r\n                        };\r\n                        if (isLoading) {\r\n                            visibilityOptions.position = gridCoreUtils.calculateLoadPanelPosition($element)\r\n                        }\r\n                        clearTimeout(this._hideLoadingTimeoutID);\r\n                        if (loadPanel.option(\"visible\") && !isLoading) {\r\n                            this._hideLoadingTimeoutID = setTimeout((function() {\r\n                                loadPanel.option(visibilityOptions)\r\n                            }), LOADPANEL_HIDE_TIMEOUT)\r\n                        } else {\r\n                            loadPanel.option(visibilityOptions)\r\n                        }\r\n                    }\r\n                },\r\n                setRowsOpacity: function(columnIndex, value) {\r\n                    var $rows = this._getRowElements().not(\".\" + GROUP_ROW_CLASS) || [];\r\n                    this._setRowsOpacityCore($rows, this.getColumns(), columnIndex, value)\r\n                },\r\n                _getCellElementsCore: function(rowIndex) {\r\n                    var $cells = this.callBase.apply(this, arguments);\r\n                    if ($cells) {\r\n                        var groupCellIndex = $cells.filter(\".\" + GROUP_CELL_CLASS).index();\r\n                        if (groupCellIndex >= 0 && $cells.length > groupCellIndex + 1) {\r\n                            return $cells.slice(0, groupCellIndex + 1)\r\n                        }\r\n                    }\r\n                    return $cells\r\n                },\r\n                _getBoundaryVisibleItemIndex: function(isTop, isFloor) {\r\n                    var itemIndex = 0;\r\n                    var prevOffset = 0;\r\n                    var offset = 0;\r\n                    var viewportBoundary = this._scrollTop;\r\n                    var $contentElement = this._findContentElement();\r\n                    var contentElementOffsetTop = $contentElement && $contentElement.offset().top;\r\n                    var dataController = this.getController(\"data\");\r\n                    var items = dataController.items();\r\n                    var tableElement = this.getTableElement();\r\n                    if (items.length && tableElement) {\r\n                        var rowElements = this._getRowElements(tableElement).filter(\":visible\");\r\n                        if (!isTop) {\r\n                            var height = getOuterHeight(this._hasHeight ? this.element() : getWindow());\r\n                            viewportBoundary += height\r\n                        }\r\n                        for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\r\n                            prevOffset = offset;\r\n                            var $rowElement = $(rowElements).eq(itemIndex);\r\n                            if ($rowElement.length) {\r\n                                offset = $rowElement.offset();\r\n                                offset = (isTop ? offset.top : offset.top + getOuterHeight($rowElement)) - contentElementOffsetTop;\r\n                                if (offset > viewportBoundary) {\r\n                                    if (itemIndex) {\r\n                                        if (isFloor || 2 * viewportBoundary < Math.round(offset + prevOffset)) {\r\n                                            itemIndex--\r\n                                        }\r\n                                    }\r\n                                    break\r\n                                }\r\n                            }\r\n                        }\r\n                        if (itemIndex && itemIndex === items.length) {\r\n                            itemIndex--\r\n                        }\r\n                    }\r\n                    return itemIndex\r\n                },\r\n                getTopVisibleItemIndex: function(isFloor) {\r\n                    return this._getBoundaryVisibleItemIndex(true, isFloor)\r\n                },\r\n                getBottomVisibleItemIndex: function(isFloor) {\r\n                    return this._getBoundaryVisibleItemIndex(false, isFloor)\r\n                },\r\n                getTopVisibleRowData: function() {\r\n                    var itemIndex = this.getTopVisibleItemIndex();\r\n                    var items = this._dataController.items();\r\n                    if (items[itemIndex]) {\r\n                        return items[itemIndex].data\r\n                    }\r\n                },\r\n                _scrollToElement: function($element, offset) {\r\n                    var scrollable = this.getScrollable();\r\n                    scrollable && scrollable.scrollToElement($element, offset)\r\n                },\r\n                optionChanged: function(args) {\r\n                    this.callBase(args);\r\n                    switch (args.name) {\r\n                        case \"wordWrapEnabled\":\r\n                        case \"showColumnLines\":\r\n                        case \"showRowLines\":\r\n                        case \"rowAlternationEnabled\":\r\n                        case \"rowTemplate\":\r\n                        case \"dataRowTemplate\":\r\n                        case \"twoWayBindingEnabled\":\r\n                            this._invalidate(true, true);\r\n                            args.handled = true;\r\n                            break;\r\n                        case \"scrolling\":\r\n                            this._rowHeight = null;\r\n                            this._tableElement = null;\r\n                            args.handled = true;\r\n                            break;\r\n                        case \"rtlEnabled\":\r\n                            this._rowHeight = null;\r\n                            this._tableElement = null;\r\n                            break;\r\n                        case \"loadPanel\":\r\n                            this._tableElement = null;\r\n                            this._invalidate(true, \"loadPanel.enabled\" !== args.fullName);\r\n                            args.handled = true;\r\n                            break;\r\n                        case \"noDataText\":\r\n                            this.renderNoDataText();\r\n                            args.handled = true\r\n                    }\r\n                },\r\n                dispose: function() {\r\n                    clearTimeout(this._hideLoadingTimeoutID);\r\n                    this._scrollable && this._scrollable.dispose()\r\n                },\r\n                setScrollerSpacing: function() {},\r\n                _restoreErrorRow: function() {}\r\n            };\r\n            return members\r\n        }())\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}