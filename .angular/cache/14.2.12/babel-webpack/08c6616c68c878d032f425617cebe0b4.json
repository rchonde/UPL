{"ast":null,"code":"import { RRule } from '../rrule';\nimport { empty, repeat, pymod } from '../helpers';\nexport function rebuildMonth(year, month, yearlen, mrange, wdaymask, options) {\n  var result = {\n    lastyear: year,\n    lastmonth: month,\n    nwdaymask: []\n  };\n  var ranges = [];\n\n  if (options.freq === RRule.YEARLY) {\n    if (empty(options.bymonth)) {\n      ranges = [[0, yearlen]];\n    } else {\n      for (var j = 0; j < options.bymonth.length; j++) {\n        month = options.bymonth[j];\n        ranges.push(mrange.slice(month - 1, month + 1));\n      }\n    }\n  } else if (options.freq === RRule.MONTHLY) {\n    ranges = [mrange.slice(month - 1, month + 1)];\n  }\n\n  if (empty(ranges)) {\n    return result;\n  } // Weekly frequency won't get here, so we may not\n  // care about cross-year weekly periods.\n\n\n  result.nwdaymask = repeat(0, yearlen);\n\n  for (var j = 0; j < ranges.length; j++) {\n    var rang = ranges[j];\n    var first = rang[0];\n    var last = rang[1] - 1;\n\n    for (var k = 0; k < options.bynweekday.length; k++) {\n      var i = void 0;\n      var _a = options.bynweekday[k],\n          wday = _a[0],\n          n = _a[1];\n\n      if (n < 0) {\n        i = last + (n + 1) * 7;\n        i -= pymod(wdaymask[i] - wday, 7);\n      } else {\n        i = first + (n - 1) * 7;\n        i += pymod(7 - wdaymask[i] + wday, 7);\n      }\n\n      if (first <= i && i <= last) result.nwdaymask[i] = 1;\n    }\n  }\n\n  return result;\n}","map":{"version":3,"names":["RRule","empty","repeat","pymod","rebuildMonth","year","month","yearlen","mrange","wdaymask","options","result","lastyear","lastmonth","nwdaymask","ranges","freq","YEARLY","bymonth","j","length","push","slice","MONTHLY","rang","first","last","k","bynweekday","i","_a","wday","n"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/rrule/dist/esm/iterinfo/monthinfo.js"],"sourcesContent":["import { RRule } from '../rrule';\nimport { empty, repeat, pymod } from '../helpers';\nexport function rebuildMonth(year, month, yearlen, mrange, wdaymask, options) {\n    var result = {\n        lastyear: year,\n        lastmonth: month,\n        nwdaymask: [],\n    };\n    var ranges = [];\n    if (options.freq === RRule.YEARLY) {\n        if (empty(options.bymonth)) {\n            ranges = [[0, yearlen]];\n        }\n        else {\n            for (var j = 0; j < options.bymonth.length; j++) {\n                month = options.bymonth[j];\n                ranges.push(mrange.slice(month - 1, month + 1));\n            }\n        }\n    }\n    else if (options.freq === RRule.MONTHLY) {\n        ranges = [mrange.slice(month - 1, month + 1)];\n    }\n    if (empty(ranges)) {\n        return result;\n    }\n    // Weekly frequency won't get here, so we may not\n    // care about cross-year weekly periods.\n    result.nwdaymask = repeat(0, yearlen);\n    for (var j = 0; j < ranges.length; j++) {\n        var rang = ranges[j];\n        var first = rang[0];\n        var last = rang[1] - 1;\n        for (var k = 0; k < options.bynweekday.length; k++) {\n            var i = void 0;\n            var _a = options.bynweekday[k], wday = _a[0], n = _a[1];\n            if (n < 0) {\n                i = last + (n + 1) * 7;\n                i -= pymod(wdaymask[i] - wday, 7);\n            }\n            else {\n                i = first + (n - 1) * 7;\n                i += pymod(7 - wdaymask[i] + wday, 7);\n            }\n            if (first <= i && i <= last)\n                result.nwdaymask[i] = 1;\n        }\n    }\n    return result;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}