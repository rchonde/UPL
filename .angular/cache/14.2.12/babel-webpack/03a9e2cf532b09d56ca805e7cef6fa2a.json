{"ast":null,"code":"/**\r\n * Popup class is used to display information over chart area.\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport popupCSS from \"./PopupCSS\";\nimport { Adapter } from \"../utils/Adapter\";\nimport { BaseObjectEvents } from \"../Base\";\nimport { getInteraction } from \"../interaction/Interaction\";\nimport { keyboard } from \"../utils/Keyboard\";\nimport { MultiDisposer } from \"../utils/Disposer\";\nimport { getShadowRoot } from \"../utils/DOM\";\nimport * as $type from \"../utils/Type\";\nimport * as $object from \"../utils/Object\";\n/**\r\n * Shows an HTML popup which covers window or a chart area.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/popups-and-modals/} For examples and docs on Popups and Modals.\r\n * @todo Positioning over whole window\r\n */\n\nvar Popup =\n/** @class */\nfunction (_super) {\n  __extends(Popup, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function Popup() {\n    var _this = _super.call(this) || this;\n    /**\r\n     * Adapter.\r\n     */\n\n\n    _this.adapter = new Adapter(_this);\n    /**\r\n     * Holds references to various HTML elements, Popup consists of.\r\n     */\n\n    _this._elements = {};\n    /**\r\n     * Holdes Interaction objects for various Popup's elements.\r\n     */\n\n    _this._IOs = {};\n    /**\r\n     * Contents of popup window.\r\n     */\n\n    _this._content = \"\";\n    /**\r\n     * Title of the popup window.\r\n     */\n\n    _this._title = \"\";\n    /**\r\n     * Prefix to apply to class names for popup elements.\r\n     */\n\n    _this._classPrefix = \"ampopup\";\n    /**\r\n     * If set to `true` [[Popup]] will use default styles.\r\n     */\n\n    _this._defaultStyles = true;\n    /**\r\n     * If set to `true` [[Popup]] will dim out all chart content behind it by\r\n     * showing a semi-transparent fill. (curtain)\r\n     */\n\n    _this._showCurtain = false;\n    /**\r\n     * Indicates whether popup can be dragged.\r\n     */\n\n    _this._draggable = true;\n    /**\r\n     * Horizontal position of the content window.\r\n     */\n\n    _this._align = \"center\";\n    /**\r\n     * Resize popup as images are being loaded.\r\n     */\n\n    _this._dynamicResize = true;\n    /**\r\n     * Vertical position of the content window.\r\n     */\n\n    _this._verticalAlign = \"middle\";\n    /**\r\n     * Shift in position of the element. (used for dragging)\r\n     */\n\n    _this._shift = {\n      x: 0,\n      y: 0\n    };\n    /**\r\n     * Temporary shift in position of the element. (used for dragging)\r\n     */\n\n    _this._tempShift = {\n      x: 0,\n      y: 0\n    };\n    /**\r\n     * A title for screen readers. It is very highly recommended to set that title\r\n     * so that people using screen reader tools can get an immediate summary of\r\n     * the information in the popup.\r\n     */\n\n    _this._readerTitle = \"\";\n    /**\r\n     * Is popup closable?\r\n     */\n\n    _this._closable = true;\n    /**\r\n     * Was CSS already loaded?\r\n     */\n\n    _this._cssLoaded = false;\n    /**\r\n     * If set to other than \"none\" will try to re-adjust the position of the\r\n     * popop to fit within chart container or browser window.\r\n     *\r\n     * @ignore Feature not yet implemented\r\n     * @todo Implement\r\n     */\n\n    _this._fitTo = \"window\";\n    /**\r\n     * Identifies if this object is a \"template\" and should not be treated as\r\n     * real object that is drawn or actually used in the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\n\n    _this.isTemplate = false;\n    /**\r\n     * Indicates if the element was already sized and should not be measured for\r\n     * size again, saving some precious resources.\r\n     */\n\n    _this._sized = false;\n    _this.className = \"Popup\";\n    return _this;\n  }\n  /**\r\n   * Shows popup window.\r\n   */\n\n\n  Popup.prototype.open = function () {\n    if (this.container) {\n      if (this._elements.wrapper) {\n        this.container.appendChild(this._elements.wrapper);\n      }\n\n      if (this._elements.curtain) {\n        this.container.appendChild(this._elements.curtain);\n        this.showCurtain = this.showCurtain;\n      }\n\n      this.positionElement();\n      this.dispatchImmediately(\"opened\");\n    }\n  };\n  /**\r\n   * Hides popup window.\r\n   */\n\n\n  Popup.prototype.close = function () {\n    if (this._elements.wrapper) {\n      if (this._elements.wrapper.parentElement) {\n        this._elements.wrapper.parentElement.removeChild(this._elements.wrapper);\n      }\n    }\n\n    if (this._elements.curtain) {\n      if (this._elements.curtain.parentElement) {\n        this._elements.curtain.parentElement.removeChild(this._elements.curtain);\n      }\n    }\n\n    this.dispatchImmediately(\"closed\");\n    this.releasePointers();\n  };\n  /**\r\n   * Destroy (dispose) popup.\r\n   */\n\n\n  Popup.prototype.dispose = function () {\n    this.close();\n\n    _super.prototype.dispose.call(this);\n  };\n  /**\r\n   * Positions content element in the center of popup based on its actual size.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  Popup.prototype.positionElement = function (forceResize) {\n    var _this = this;\n\n    if (forceResize === void 0) {\n      forceResize = true;\n    }\n\n    if (!this._elements.wrapper) {\n      return;\n    }\n\n    setTimeout(function () {\n      if (!_this._elements.wrapper) {\n        return;\n      }\n\n      if (forceResize || !_this._sized) {\n        _this._elements.wrapper.style.opacity = \"0.01\";\n        _this._elements.wrapper.style.left = \"0\";\n        _this._elements.wrapper.style.top = \"0\";\n        _this._elements.wrapper.style.margin = \"0 0 0 0\";\n        _this._elements.wrapper.style.width = \"\";\n        _this._elements.wrapper.style.height = \"\";\n\n        var bbox = _this._elements.wrapper.getBoundingClientRect();\n\n        _this._elements.wrapper.style.width = bbox.width + \"px\";\n        _this._elements.wrapper.style.height = bbox.height + \"px\";\n        _this._sized = true;\n      } // Check for any images that are not yet loaded\n\n\n      if (_this.dynamicResize) {\n        var images = _this._elements.wrapper.getElementsByTagName(\"img\");\n\n        for (var i = 0; i < images.length; i++) {\n          var image = images[i];\n\n          if (!image.complete) {\n            // Resize popup once again when image is loaded\n            image.addEventListener(\"load\", function () {\n              _this.positionElement(true);\n            }); // Do this for one image only as it will be checked again next time\n            // anyway\n\n            break;\n          }\n        }\n      }\n\n      setTimeout(function () {\n        if (!_this._elements.wrapper) {\n          return;\n        }\n\n        var bbox;\n\n        if ((forceResize || !_this._sized) && _this._bbox) {\n          bbox = _this._bbox;\n        } else {\n          bbox = _this._elements.wrapper.getBoundingClientRect();\n          _this._elements.wrapper.style.opacity = \"\";\n        } // Set horizontal positioning\n\n\n        switch (_this.align) {\n          case \"left\":\n            _this._elements.wrapper.style.left = \"0\";\n            _this._elements.wrapper.style.right = \"auto\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\n            break;\n\n          case \"center\":\n            _this._elements.wrapper.style.left = \"50%\";\n            _this._elements.wrapper.style.right = \"auto\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(Math.round(-bbox.width / 2) + (_this._shift.x + _this._tempShift.x));\n            break;\n\n          case \"right\":\n            _this._elements.wrapper.style.left = \"auto\";\n            _this._elements.wrapper.style.right = \"0\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\n            break;\n\n          default:\n            _this._elements.wrapper.style.left = _this.toStyle(_this.left) || \"auto\";\n            _this._elements.wrapper.style.right = _this.toStyle(_this.right) || \"auto\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\n            break;\n        } // Set vertical positioning\n\n\n        switch (_this.verticalAlign) {\n          case \"top\":\n            _this._elements.wrapper.style.top = \"0\";\n            _this._elements.wrapper.style.bottom = \"auto\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\n            break;\n\n          case \"middle\":\n            _this._elements.wrapper.style.top = \"50%\";\n            _this._elements.wrapper.style.bottom = \"auto\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(Math.round(-bbox.height / 2) + (_this._shift.y + _this._tempShift.y));\n            break;\n\n          case \"bottom\":\n            _this._elements.wrapper.style.top = \"auto\";\n            _this._elements.wrapper.style.bottom = \"0\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\n            break;\n\n          default:\n            _this._elements.wrapper.style.top = _this.toStyle(_this.top) || \"auto\";\n            _this._elements.wrapper.style.bottom = _this.toStyle(_this.bottom) || \"auto\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\n            break;\n        }\n      }, 1);\n    }, 1);\n  };\n\n  Popup.prototype.setupDragging = function () {\n    var _this = this;\n\n    if (this.draggable) {\n      if (!this._IOs.header.events.has(\"drag\")) {\n        this._IOs.header.events.on(\"drag\", function (ev) {\n          _this._tempShift.x = ev.shift.x;\n          _this._tempShift.y = ev.shift.y;\n\n          _this.positionElement(false);\n        });\n      }\n\n      if (!this._IOs.header.events.has(\"dragstop\")) {\n        this._IOs.header.events.on(\"dragstop\", function (ev) {\n          _this._shift.x += _this._tempShift.x;\n          _this._shift.y += _this._tempShift.y;\n          _this._tempShift.x = 0;\n          _this._tempShift.y = 0;\n\n          _this.positionElement(false);\n        });\n      }\n    } else {\n      if (this._IOs.header) {\n        getInteraction().unprepElement(this._IOs.header);\n\n        if (this._IOs.header.events.has(\"drag\")) {\n          this._IOs.header.events.off(\"drag\");\n        }\n\n        if (this._IOs.header.events.has(\"dragstop\")) {\n          this._IOs.header.events.off(\"dragstop\");\n        }\n      }\n    }\n  };\n\n  Popup.prototype.toStyle = function (value) {\n    if (!$type.hasValue(value)) {\n      return null;\n    } else if ($type.isNumber(value)) {\n      return \"\" + value + \"px\";\n    } else {\n      return value.toString();\n    }\n  };\n\n  Object.defineProperty(Popup.prototype, \"classPrefix\", {\n    /**\r\n     * A prefix that is applied to class names of various popup elements.\r\n     *\r\n     * @return Class name prefix\r\n     */\n    get: function () {\n      return this.adapter.apply(\"classPrefix\", this._classPrefix);\n    },\n\n    /**\r\n     * @param value Class name prefix\r\n     */\n    set: function (value) {\n      this._classPrefix = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"classPrefixRaw\", {\n    /**\r\n     * Returns raw prefix (without adapters applied).\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @return Class name prefix\r\n     */\n    get: function () {\n      return this._classPrefix;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"content\", {\n    /**\r\n     * @return Popup content\r\n     */\n    get: function () {\n      return this.adapter.apply(\"content\", this._content);\n    },\n\n    /**\r\n     * Popup content.\r\n     *\r\n     * Popup content can be any valid HTML, including CSS.\r\n     *\r\n     * @param value Popup content\r\n     */\n    set: function (value) {\n      if (this._content != value) {\n        this._content = value;\n\n        if (!this._elements.content) {\n          this.createContentElement();\n        }\n\n        this._elements.content.innerHTML = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Popup.prototype.getClassNames = function () {\n    return this.adapter.apply(\"classNames\", {\n      wrapperClass: this.classPrefix + \"\",\n      headerClass: this.classPrefix + \"-header\",\n      titleClass: this.classPrefix + \"-title\",\n      contentClass: this.classPrefix + \"-content\",\n      insideClass: this.classPrefix + \"-inside\",\n      curtainClass: this.classPrefix + \"-curtain\",\n      closeClass: this.classPrefix + \"-close\"\n    });\n  };\n  /**\r\n   * Creates content element.\r\n   */\n\n\n  Popup.prototype.createContentElement = function () {\n    // Check if it's created already\n    if (this._elements.wrapper) {\n      return;\n    } // Get class names for popup elements\n\n\n    var classNames = this.getClassNames(); // Create content element\n\n    var wrapper = document.createElement(\"div\");\n    wrapper.className = classNames.contentClass;\n    wrapper.style.opacity = \"0.01\"; // Create close button\n\n    var close = document.createElement(\"a\");\n    close.className = classNames.closeClass; // header title\n\n    var header = document.createElement(\"div\");\n    header.className = classNames.headerClass; // Content title\n\n    var title = document.createElement(\"div\");\n    title.innerHTML = this.title;\n    title.className = classNames.titleClass;\n\n    if (!this.title) {\n      title.style.display = \"none\";\n    } // Content div\n\n\n    var content = document.createElement(\"div\");\n    content.className = classNames.insideClass;\n    content.innerHTML = this.content; // Set up events for content\n\n    this._IOs.wrapper = getInteraction().getInteraction(wrapper);\n    this._IOs.header = getInteraction().getInteraction(header);\n\n    this._disposers.push(this._IOs.wrapper); // Set hover/out events\n\n\n    this._IOs.wrapper.events.on(\"over\", this.disablePointers, this);\n\n    this._IOs.wrapper.events.on(\"out\", this.releasePointers, this); // Create an InteractionObject for close\n\n\n    this._IOs.close = getInteraction().getInteraction(close);\n\n    this._disposers.push(this._IOs.close); // Hide close for now\n\n\n    close.style.visibility = \"hidden\"; // Add accessible stuff\n\n    wrapper.setAttribute(\"role\", \"dialog\"); // Add to wrapper\n\n    header.appendChild(close);\n    header.appendChild(title);\n    wrapper.appendChild(header);\n    wrapper.appendChild(content);\n    this.container.appendChild(wrapper); // Save for later access\n\n    this._elements.wrapper = wrapper;\n    this._elements.header = header;\n    this._elements.content = content;\n    this._elements.title = title;\n    this._elements.close = close; // Load CSS\n\n    if (this.defaultStyles) {\n      this.loadDefaultCSS();\n    } // Create curtain as well\n\n\n    this.createCurtainElement(); // Apply events\n\n    this.applyEvents();\n    this.applyReaderSettings(); // Draggable?\n\n    this.setupDragging();\n  };\n\n  Object.defineProperty(Popup.prototype, \"title\", {\n    /**\r\n     * @return Popup title\r\n     */\n    get: function () {\n      return this.adapter.apply(\"title\", this._title);\n    },\n\n    /**\r\n     * Popup title.\r\n     *\r\n     * Popup title can be any valid HTML, including CSS.\r\n     *\r\n     * @param value  Popup title\r\n     */\n    set: function (value) {\n      if (this._title != value) {\n        this._title = value;\n\n        if (!this._elements.content) {\n          this.createContentElement();\n        }\n\n        this._elements.title.innerHTML = value;\n        this.positionElement();\n        this.applyReaderSettings();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"readerTitle\", {\n    /**\r\n     * @return Popup content\r\n     */\n    get: function () {\n      return this.adapter.apply(\"readerTitle\", this._readerTitle != \"\" ? this._readerTitle : this.title);\n    },\n\n    /**\r\n     * A title for screen readers. It is very highly recommended to set that title\r\n     * so that people using screen reader tools can get an immediate summary of\r\n     * the information in the popup.\r\n     *\r\n     * @param value  Reader title\r\n     */\n    set: function (value) {\n      if (this._readerTitle != value) {\n        this._readerTitle = value;\n        this.applyReaderSettings();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"closable\", {\n    /**\r\n     * @return Closable?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"closable\", this._closable);\n    },\n\n    /**\r\n     * Is popup closable?\r\n     *\r\n     * If it is, it can be closed in a number of ways, e.g. by hitting ESC key,\r\n     * clicking curtain, or clicking the close button.\r\n     *\r\n     * If it is not closable, the only way to close it is via `close()` call.\r\n     *\r\n     * @param value Closable?\r\n     */\n    set: function (value) {\n      if (value !== this._closable) {\n        this._closable = value;\n        this.applyEvents();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"fitTo\", {\n    /**\r\n     * @ignore\r\n     * @todo Implement\r\n     * @return Fit option\r\n     */\n    get: function () {\n      return this.adapter.apply(\"fitTo\", this._fitTo);\n    },\n\n    /**\r\n     * If set to other than \"none\" will try to re-adjust the position of the\r\n     * popop to fit within chart container or browser window.\r\n     *\r\n     * @ignore\r\n     * @todo Implement\r\n     * @default \"window\"\r\n     * @param value  Fit option\r\n     */\n    set: function (value) {\n      if (value != this._fitTo) {\n        this._fitTo = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"defaultStyles\", {\n    /**\r\n     * @return Use default CSS?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"defaultStyles\", this._defaultStyles);\n    },\n\n    /**\r\n     * Should popup use default CSS?\r\n     *\r\n     * If default CSS is disabled, an external CSS should handle the look of the\r\n     * popup, since it will look quite out of place otherwise.\r\n     *\r\n     * @default true\r\n     * @param Use default CSS?\r\n     */\n    set: function (value) {\n      if (this._defaultStyles != value) {\n        this._defaultStyles = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"showCurtain\", {\n    /**\r\n     * @return Show curtain?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"showCurtain\", this._showCurtain);\n    },\n\n    /**\r\n     * Should popup use dim out all content behind it?\r\n     *\r\n     * @default false\r\n     * @param Show curtain?\r\n     */\n    set: function (value) {\n      if (this._showCurtain != value) {\n        this._showCurtain = value;\n\n        if (this._elements.curtain) {\n          this._elements.curtain.style.display = value ? \"block\" : \"none\";\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Creates curtain element.\r\n   */\n\n  Popup.prototype.createCurtainElement = function () {\n    // Get class names for popup elements\n    var classNames = this.getClassNames(); // Create the curtain\n\n    var curtain = document.createElement(\"div\");\n    curtain.className = classNames.curtainClass; // Append curtain to wrapper\n\n    this.container.appendChild(curtain); // Create an InteractionObject for curtain because we might need to\n    // set interactions on it\n\n    this._IOs.curtain = getInteraction().getInteraction(curtain); // Add Curtain IO to disposers\n\n    this._disposers.push(this._IOs.curtain); // Set events to disable underlying interactivity\n\n\n    this._IOs.curtain.events.on(\"over\", this.disablePointers, this);\n\n    this._IOs.curtain.events.on(\"out\", this.releasePointers, this); // Hide it?\n\n\n    curtain.style.display = this.showCurtain ? \"block\" : \"none\"; // Save for later\n\n    this._elements.curtain = curtain;\n  };\n\n  Object.defineProperty(Popup.prototype, \"draggable\", {\n    /**\r\n     * @return Show curtain?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"draggable\", this._draggable);\n    },\n\n    /**\r\n     * Can the popup be dragged with a pointer?\r\n     *\r\n     * @default false\r\n     * @param Show curtain?\r\n     */\n    set: function (value) {\n      if (this._draggable != value) {\n        this._draggable = value;\n        this.setupDragging();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"dynamicResize\", {\n    /**\r\n     * @return Resize dynamically?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"dynamicResize\", this._dynamicResize);\n    },\n\n    /**\r\n     * Resize popup as images are being loaded.\r\n     *\r\n     * @default true\r\n     * @since 4.9.17\r\n     * @param Resize dynamically?\r\n     */\n    set: function (value) {\n      if (this._dynamicResize != value) {\n        this._dynamicResize = value;\n        this.positionElement(true);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"align\", {\n    /**\r\n     * @return Horizontal position\r\n     */\n    get: function () {\n      return this.adapter.apply(\"align\", this._align);\n    },\n\n    /**\r\n     * Horizontal positioning of the content window.\r\n     *\r\n     * Available options: \"left\", \"center\" (default), \"right\", and \"none\".\r\n     *\r\n     * @default \"center\"\r\n     * @param Horizontal position\r\n     */\n    set: function (value) {\n      if (this._align != value) {\n        this._align = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"verticalAlign\", {\n    /**\r\n     * @return Vertical position\r\n     */\n    get: function () {\n      return this.adapter.apply(\"verticalAlign\", this._verticalAlign);\n    },\n\n    /**\r\n     * Vertical positioning of the content window.\r\n     *\r\n     * Available options: \"top\", \"middle\" (default), \"bottom\", and \"none\".\r\n     *\r\n     * @default \"middle\"\r\n     * @param Vertical position\r\n     */\n    set: function (value) {\n      if (this._verticalAlign != value) {\n        this._verticalAlign = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"left\", {\n    /**\r\n     * @return Left\r\n     */\n    get: function () {\n      return this.adapter.apply(\"left\", this._left);\n    },\n\n    /**\r\n     * \"left\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `align` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Left\r\n     */\n    set: function (value) {\n      if (this.left != value) {\n        this._left = value;\n        this._align = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"right\", {\n    /**\r\n     * @return Right\r\n     */\n    get: function () {\n      return this.adapter.apply(\"right\", this._right);\n    },\n\n    /**\r\n     * \"right\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `align` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Right\r\n     */\n    set: function (value) {\n      if (this.right != value) {\n        this._right = value;\n        this._align = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"top\", {\n    /**\r\n     * @return Top\r\n     */\n    get: function () {\n      return this.adapter.apply(\"top\", this._top);\n    },\n\n    /**\r\n     * \"top\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `verticalAlign` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Top\r\n     */\n    set: function (value) {\n      if (this.top != value) {\n        this._top = value;\n        this._verticalAlign = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"bottom\", {\n    /**\r\n     * @return Bottom\r\n     */\n    get: function () {\n      return this.adapter.apply(\"bottom\", this._bottom);\n    },\n\n    /**\r\n     * \"bottom\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `verticalAlign` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Bottom\r\n     */\n    set: function (value) {\n      if (this.bottom != value) {\n        this._bottom = value;\n        this._verticalAlign = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"elements\", {\n    /**\r\n     * Returns an object with references to various elements of the Popup.\r\n     *\r\n     * * `wrapper`\r\n     * * `title`\r\n     * * `content`\r\n     * * `close`\r\n     * * `curtain`\r\n     */\n    get: function () {\n      return this._elements;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Loads popup CSS.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n  Popup.prototype.loadDefaultCSS = function () {\n    if (!this._cssLoaded) {\n      this._disposers.push(popupCSS(getShadowRoot(this.container), this.classPrefix));\n\n      $object.each(this._elements, function (key, el) {\n        el.style.display = \"\";\n      });\n      this._cssLoaded = true;\n    }\n  };\n  /**\r\n   * If popup is closable, this method adds various events to popup elements.\r\n   */\n\n\n  Popup.prototype.applyEvents = function () {\n    var _this = this;\n\n    if (this._IOs.close) {\n      if (this.closable) {\n        this._IOs.close.element.style.visibility = \"visible\";\n        var disposers = [getInteraction().body.events.on(\"keyup\", function (ev) {\n          if (keyboard.isKey(ev.event, \"esc\") && _this.closable) {\n            _this.close();\n          }\n        }), this._IOs.close.events.on(\"hit\", function (ev) {\n          _this.close();\n        })];\n        disposers.push(this._IOs.curtain.events.on(\"hit\", function (ev) {\n          if (_this.showCurtain && _this.closable) {\n            _this.close();\n          }\n        }));\n\n        this._disposers.push(new MultiDisposer(disposers));\n      } else {\n        this._IOs.close.element.style.visibility = \"hidden\";\n      }\n    }\n  };\n  /**\r\n   * Disables interactivity on parent chart.\r\n   */\n\n\n  Popup.prototype.disablePointers = function () {\n    if (this.sprite) {\n      this._spriteInteractionsEnabled = this.sprite.interactionsEnabled;\n      this.sprite.interactionsEnabled = false;\n    }\n  };\n  /**\r\n   * Releases temporarily disabled pointers on parent chart.\r\n   */\n\n\n  Popup.prototype.releasePointers = function () {\n    if ($type.hasValue(this._spriteInteractionsEnabled)) {\n      this.sprite.interactionsEnabled = this._spriteInteractionsEnabled;\n      this._spriteInteractionsEnabled = undefined;\n    }\n  };\n  /**\r\n   * Sets screen reader related settings.\r\n   */\n\n\n  Popup.prototype.applyReaderSettings = function () {\n    this.elements.wrapper.setAttribute(\"aria-label\", this.readerTitle);\n  };\n  /**\r\n   * Copies all properties and related data from different element.\r\n   *\r\n   * @param object Source element\r\n   */\n\n\n  Popup.prototype.copyFrom = function (source) {\n    _super.prototype.copyFrom.call(this, source);\n\n    this.container = source.container;\n    this.sprite = source.sprite;\n    this.classPrefix = source.classPrefixRaw;\n    this.content = source.content;\n    this.title = source.title;\n    this.readerTitle = source.readerTitle;\n    this.defaultStyles = source.defaultStyles;\n    this.showCurtain = source.showCurtain;\n    this.align = source.align;\n    this.verticalAlign = source.verticalAlign;\n    this.left = source.left;\n    this.right = source.right;\n    this.top = source.top;\n    this.bottom = source.bottom;\n    this.adapter.copyFrom(source.adapter);\n  };\n\n  return Popup;\n}(BaseObjectEvents);\n\nexport { Popup };","map":{"version":3,"names":["__extends","popupCSS","Adapter","BaseObjectEvents","getInteraction","keyboard","MultiDisposer","getShadowRoot","$type","$object","Popup","_super","_this","call","adapter","_elements","_IOs","_content","_title","_classPrefix","_defaultStyles","_showCurtain","_draggable","_align","_dynamicResize","_verticalAlign","_shift","x","y","_tempShift","_readerTitle","_closable","_cssLoaded","_fitTo","isTemplate","_sized","className","prototype","open","container","wrapper","appendChild","curtain","showCurtain","positionElement","dispatchImmediately","close","parentElement","removeChild","releasePointers","dispose","forceResize","setTimeout","style","opacity","left","top","margin","width","height","bbox","getBoundingClientRect","dynamicResize","images","getElementsByTagName","i","length","image","complete","addEventListener","_bbox","align","right","marginLeft","toStyle","Math","round","verticalAlign","bottom","marginTop","setupDragging","draggable","header","events","has","on","ev","shift","unprepElement","off","value","hasValue","isNumber","toString","Object","defineProperty","get","apply","set","enumerable","configurable","content","createContentElement","innerHTML","getClassNames","wrapperClass","classPrefix","headerClass","titleClass","contentClass","insideClass","curtainClass","closeClass","classNames","document","createElement","title","display","_disposers","push","disablePointers","visibility","setAttribute","defaultStyles","loadDefaultCSS","createCurtainElement","applyEvents","applyReaderSettings","_left","_right","_top","_bottom","each","key","el","closable","element","disposers","body","isKey","event","sprite","_spriteInteractionsEnabled","interactionsEnabled","undefined","elements","readerTitle","copyFrom","source","classPrefixRaw"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/@amcharts/amcharts4/.internal/core/elements/Popup.js"],"sourcesContent":["/**\r\n * Popup class is used to display information over chart area.\r\n */\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport popupCSS from \"./PopupCSS\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { BaseObjectEvents } from \"../Base\";\r\nimport { getInteraction } from \"../interaction/Interaction\";\r\nimport { keyboard } from \"../utils/Keyboard\";\r\nimport { MultiDisposer } from \"../utils/Disposer\";\r\nimport { getShadowRoot } from \"../utils/DOM\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $object from \"../utils/Object\";\r\n/**\r\n * Shows an HTML popup which covers window or a chart area.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/popups-and-modals/} For examples and docs on Popups and Modals.\r\n * @todo Positioning over whole window\r\n */\r\nvar Popup = /** @class */ (function (_super) {\r\n    __extends(Popup, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function Popup() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Adapter.\r\n         */\r\n        _this.adapter = new Adapter(_this);\r\n        /**\r\n         * Holds references to various HTML elements, Popup consists of.\r\n         */\r\n        _this._elements = {};\r\n        /**\r\n         * Holdes Interaction objects for various Popup's elements.\r\n         */\r\n        _this._IOs = {};\r\n        /**\r\n         * Contents of popup window.\r\n         */\r\n        _this._content = \"\";\r\n        /**\r\n         * Title of the popup window.\r\n         */\r\n        _this._title = \"\";\r\n        /**\r\n         * Prefix to apply to class names for popup elements.\r\n         */\r\n        _this._classPrefix = \"ampopup\";\r\n        /**\r\n         * If set to `true` [[Popup]] will use default styles.\r\n         */\r\n        _this._defaultStyles = true;\r\n        /**\r\n         * If set to `true` [[Popup]] will dim out all chart content behind it by\r\n         * showing a semi-transparent fill. (curtain)\r\n         */\r\n        _this._showCurtain = false;\r\n        /**\r\n         * Indicates whether popup can be dragged.\r\n         */\r\n        _this._draggable = true;\r\n        /**\r\n         * Horizontal position of the content window.\r\n         */\r\n        _this._align = \"center\";\r\n        /**\r\n         * Resize popup as images are being loaded.\r\n         */\r\n        _this._dynamicResize = true;\r\n        /**\r\n         * Vertical position of the content window.\r\n         */\r\n        _this._verticalAlign = \"middle\";\r\n        /**\r\n         * Shift in position of the element. (used for dragging)\r\n         */\r\n        _this._shift = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        /**\r\n         * Temporary shift in position of the element. (used for dragging)\r\n         */\r\n        _this._tempShift = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        /**\r\n         * A title for screen readers. It is very highly recommended to set that title\r\n         * so that people using screen reader tools can get an immediate summary of\r\n         * the information in the popup.\r\n         */\r\n        _this._readerTitle = \"\";\r\n        /**\r\n         * Is popup closable?\r\n         */\r\n        _this._closable = true;\r\n        /**\r\n         * Was CSS already loaded?\r\n         */\r\n        _this._cssLoaded = false;\r\n        /**\r\n         * If set to other than \"none\" will try to re-adjust the position of the\r\n         * popop to fit within chart container or browser window.\r\n         *\r\n         * @ignore Feature not yet implemented\r\n         * @todo Implement\r\n         */\r\n        _this._fitTo = \"window\";\r\n        /**\r\n         * Identifies if this object is a \"template\" and should not be treated as\r\n         * real object that is drawn or actually used in the chart.\r\n         *\r\n         * @ignore Exclude from docs\r\n         */\r\n        _this.isTemplate = false;\r\n        /**\r\n         * Indicates if the element was already sized and should not be measured for\r\n         * size again, saving some precious resources.\r\n         */\r\n        _this._sized = false;\r\n        _this.className = \"Popup\";\r\n        return _this;\r\n    }\r\n    /**\r\n     * Shows popup window.\r\n     */\r\n    Popup.prototype.open = function () {\r\n        if (this.container) {\r\n            if (this._elements.wrapper) {\r\n                this.container.appendChild(this._elements.wrapper);\r\n            }\r\n            if (this._elements.curtain) {\r\n                this.container.appendChild(this._elements.curtain);\r\n                this.showCurtain = this.showCurtain;\r\n            }\r\n            this.positionElement();\r\n            this.dispatchImmediately(\"opened\");\r\n        }\r\n    };\r\n    /**\r\n     * Hides popup window.\r\n     */\r\n    Popup.prototype.close = function () {\r\n        if (this._elements.wrapper) {\r\n            if (this._elements.wrapper.parentElement) {\r\n                this._elements.wrapper.parentElement.removeChild(this._elements.wrapper);\r\n            }\r\n        }\r\n        if (this._elements.curtain) {\r\n            if (this._elements.curtain.parentElement) {\r\n                this._elements.curtain.parentElement.removeChild(this._elements.curtain);\r\n            }\r\n        }\r\n        this.dispatchImmediately(\"closed\");\r\n        this.releasePointers();\r\n    };\r\n    /**\r\n     * Destroy (dispose) popup.\r\n     */\r\n    Popup.prototype.dispose = function () {\r\n        this.close();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    /**\r\n     * Positions content element in the center of popup based on its actual size.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Popup.prototype.positionElement = function (forceResize) {\r\n        var _this = this;\r\n        if (forceResize === void 0) { forceResize = true; }\r\n        if (!this._elements.wrapper) {\r\n            return;\r\n        }\r\n        setTimeout(function () {\r\n            if (!_this._elements.wrapper) {\r\n                return;\r\n            }\r\n            if (forceResize || !_this._sized) {\r\n                _this._elements.wrapper.style.opacity = \"0.01\";\r\n                _this._elements.wrapper.style.left = \"0\";\r\n                _this._elements.wrapper.style.top = \"0\";\r\n                _this._elements.wrapper.style.margin = \"0 0 0 0\";\r\n                _this._elements.wrapper.style.width = \"\";\r\n                _this._elements.wrapper.style.height = \"\";\r\n                var bbox = _this._elements.wrapper.getBoundingClientRect();\r\n                _this._elements.wrapper.style.width = bbox.width + \"px\";\r\n                _this._elements.wrapper.style.height = bbox.height + \"px\";\r\n                _this._sized = true;\r\n            }\r\n            // Check for any images that are not yet loaded\r\n            if (_this.dynamicResize) {\r\n                var images = _this._elements.wrapper.getElementsByTagName(\"img\");\r\n                for (var i = 0; i < images.length; i++) {\r\n                    var image = images[i];\r\n                    if (!image.complete) {\r\n                        // Resize popup once again when image is loaded\r\n                        image.addEventListener(\"load\", function () {\r\n                            _this.positionElement(true);\r\n                        });\r\n                        // Do this for one image only as it will be checked again next time\r\n                        // anyway\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            setTimeout(function () {\r\n                if (!_this._elements.wrapper) {\r\n                    return;\r\n                }\r\n                var bbox;\r\n                if ((forceResize || !_this._sized) && _this._bbox) {\r\n                    bbox = _this._bbox;\r\n                }\r\n                else {\r\n                    bbox = _this._elements.wrapper.getBoundingClientRect();\r\n                    _this._elements.wrapper.style.opacity = \"\";\r\n                }\r\n                // Set horizontal positioning\r\n                switch (_this.align) {\r\n                    case \"left\":\r\n                        _this._elements.wrapper.style.left = \"0\";\r\n                        _this._elements.wrapper.style.right = \"auto\";\r\n                        _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\r\n                        break;\r\n                    case \"center\":\r\n                        _this._elements.wrapper.style.left = \"50%\";\r\n                        _this._elements.wrapper.style.right = \"auto\";\r\n                        _this._elements.wrapper.style.marginLeft = _this.toStyle(Math.round(-bbox.width / 2) + (_this._shift.x + _this._tempShift.x));\r\n                        break;\r\n                    case \"right\":\r\n                        _this._elements.wrapper.style.left = \"auto\";\r\n                        _this._elements.wrapper.style.right = \"0\";\r\n                        _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\r\n                        break;\r\n                    default:\r\n                        _this._elements.wrapper.style.left = _this.toStyle(_this.left) || \"auto\";\r\n                        _this._elements.wrapper.style.right = _this.toStyle(_this.right) || \"auto\";\r\n                        _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\r\n                        break;\r\n                }\r\n                // Set vertical positioning\r\n                switch (_this.verticalAlign) {\r\n                    case \"top\":\r\n                        _this._elements.wrapper.style.top = \"0\";\r\n                        _this._elements.wrapper.style.bottom = \"auto\";\r\n                        _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\r\n                        break;\r\n                    case \"middle\":\r\n                        _this._elements.wrapper.style.top = \"50%\";\r\n                        _this._elements.wrapper.style.bottom = \"auto\";\r\n                        _this._elements.wrapper.style.marginTop = _this.toStyle(Math.round(-bbox.height / 2) + (_this._shift.y + _this._tempShift.y));\r\n                        break;\r\n                    case \"bottom\":\r\n                        _this._elements.wrapper.style.top = \"auto\";\r\n                        _this._elements.wrapper.style.bottom = \"0\";\r\n                        _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\r\n                        break;\r\n                    default:\r\n                        _this._elements.wrapper.style.top = _this.toStyle(_this.top) || \"auto\";\r\n                        _this._elements.wrapper.style.bottom = _this.toStyle(_this.bottom) || \"auto\";\r\n                        _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\r\n                        break;\r\n                }\r\n            }, 1);\r\n        }, 1);\r\n    };\r\n    Popup.prototype.setupDragging = function () {\r\n        var _this = this;\r\n        if (this.draggable) {\r\n            if (!this._IOs.header.events.has(\"drag\")) {\r\n                this._IOs.header.events.on(\"drag\", function (ev) {\r\n                    _this._tempShift.x = ev.shift.x;\r\n                    _this._tempShift.y = ev.shift.y;\r\n                    _this.positionElement(false);\r\n                });\r\n            }\r\n            if (!this._IOs.header.events.has(\"dragstop\")) {\r\n                this._IOs.header.events.on(\"dragstop\", function (ev) {\r\n                    _this._shift.x += _this._tempShift.x;\r\n                    _this._shift.y += _this._tempShift.y;\r\n                    _this._tempShift.x = 0;\r\n                    _this._tempShift.y = 0;\r\n                    _this.positionElement(false);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (this._IOs.header) {\r\n                getInteraction().unprepElement(this._IOs.header);\r\n                if (this._IOs.header.events.has(\"drag\")) {\r\n                    this._IOs.header.events.off(\"drag\");\r\n                }\r\n                if (this._IOs.header.events.has(\"dragstop\")) {\r\n                    this._IOs.header.events.off(\"dragstop\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Popup.prototype.toStyle = function (value) {\r\n        if (!$type.hasValue(value)) {\r\n            return null;\r\n        }\r\n        else if ($type.isNumber(value)) {\r\n            return \"\" + value + \"px\";\r\n        }\r\n        else {\r\n            return value.toString();\r\n        }\r\n    };\r\n    Object.defineProperty(Popup.prototype, \"classPrefix\", {\r\n        /**\r\n         * A prefix that is applied to class names of various popup elements.\r\n         *\r\n         * @return Class name prefix\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"classPrefix\", this._classPrefix);\r\n        },\r\n        /**\r\n         * @param value Class name prefix\r\n         */\r\n        set: function (value) {\r\n            this._classPrefix = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"classPrefixRaw\", {\r\n        /**\r\n         * Returns raw prefix (without adapters applied).\r\n         *\r\n         * @ignore Exclude from docs\r\n         * @return Class name prefix\r\n         */\r\n        get: function () {\r\n            return this._classPrefix;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"content\", {\r\n        /**\r\n         * @return Popup content\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"content\", this._content);\r\n        },\r\n        /**\r\n         * Popup content.\r\n         *\r\n         * Popup content can be any valid HTML, including CSS.\r\n         *\r\n         * @param value Popup content\r\n         */\r\n        set: function (value) {\r\n            if (this._content != value) {\r\n                this._content = value;\r\n                if (!this._elements.content) {\r\n                    this.createContentElement();\r\n                }\r\n                this._elements.content.innerHTML = value;\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Popup.prototype.getClassNames = function () {\r\n        return this.adapter.apply(\"classNames\", {\r\n            wrapperClass: this.classPrefix + \"\",\r\n            headerClass: this.classPrefix + \"-header\",\r\n            titleClass: this.classPrefix + \"-title\",\r\n            contentClass: this.classPrefix + \"-content\",\r\n            insideClass: this.classPrefix + \"-inside\",\r\n            curtainClass: this.classPrefix + \"-curtain\",\r\n            closeClass: this.classPrefix + \"-close\"\r\n        });\r\n    };\r\n    /**\r\n     * Creates content element.\r\n     */\r\n    Popup.prototype.createContentElement = function () {\r\n        // Check if it's created already\r\n        if (this._elements.wrapper) {\r\n            return;\r\n        }\r\n        // Get class names for popup elements\r\n        var classNames = this.getClassNames();\r\n        // Create content element\r\n        var wrapper = document.createElement(\"div\");\r\n        wrapper.className = classNames.contentClass;\r\n        wrapper.style.opacity = \"0.01\";\r\n        // Create close button\r\n        var close = document.createElement(\"a\");\r\n        close.className = classNames.closeClass;\r\n        // header title\r\n        var header = document.createElement(\"div\");\r\n        header.className = classNames.headerClass;\r\n        // Content title\r\n        var title = document.createElement(\"div\");\r\n        title.innerHTML = this.title;\r\n        title.className = classNames.titleClass;\r\n        if (!this.title) {\r\n            title.style.display = \"none\";\r\n        }\r\n        // Content div\r\n        var content = document.createElement(\"div\");\r\n        content.className = classNames.insideClass;\r\n        content.innerHTML = this.content;\r\n        // Set up events for content\r\n        this._IOs.wrapper = getInteraction().getInteraction(wrapper);\r\n        this._IOs.header = getInteraction().getInteraction(header);\r\n        this._disposers.push(this._IOs.wrapper);\r\n        // Set hover/out events\r\n        this._IOs.wrapper.events.on(\"over\", this.disablePointers, this);\r\n        this._IOs.wrapper.events.on(\"out\", this.releasePointers, this);\r\n        // Create an InteractionObject for close\r\n        this._IOs.close = getInteraction().getInteraction(close);\r\n        this._disposers.push(this._IOs.close);\r\n        // Hide close for now\r\n        close.style.visibility = \"hidden\";\r\n        // Add accessible stuff\r\n        wrapper.setAttribute(\"role\", \"dialog\");\r\n        // Add to wrapper\r\n        header.appendChild(close);\r\n        header.appendChild(title);\r\n        wrapper.appendChild(header);\r\n        wrapper.appendChild(content);\r\n        this.container.appendChild(wrapper);\r\n        // Save for later access\r\n        this._elements.wrapper = wrapper;\r\n        this._elements.header = header;\r\n        this._elements.content = content;\r\n        this._elements.title = title;\r\n        this._elements.close = close;\r\n        // Load CSS\r\n        if (this.defaultStyles) {\r\n            this.loadDefaultCSS();\r\n        }\r\n        // Create curtain as well\r\n        this.createCurtainElement();\r\n        // Apply events\r\n        this.applyEvents();\r\n        this.applyReaderSettings();\r\n        // Draggable?\r\n        this.setupDragging();\r\n    };\r\n    Object.defineProperty(Popup.prototype, \"title\", {\r\n        /**\r\n         * @return Popup title\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"title\", this._title);\r\n        },\r\n        /**\r\n         * Popup title.\r\n         *\r\n         * Popup title can be any valid HTML, including CSS.\r\n         *\r\n         * @param value  Popup title\r\n         */\r\n        set: function (value) {\r\n            if (this._title != value) {\r\n                this._title = value;\r\n                if (!this._elements.content) {\r\n                    this.createContentElement();\r\n                }\r\n                this._elements.title.innerHTML = value;\r\n                this.positionElement();\r\n                this.applyReaderSettings();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"readerTitle\", {\r\n        /**\r\n         * @return Popup content\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"readerTitle\", this._readerTitle != \"\" ? this._readerTitle : this.title);\r\n        },\r\n        /**\r\n         * A title for screen readers. It is very highly recommended to set that title\r\n         * so that people using screen reader tools can get an immediate summary of\r\n         * the information in the popup.\r\n         *\r\n         * @param value  Reader title\r\n         */\r\n        set: function (value) {\r\n            if (this._readerTitle != value) {\r\n                this._readerTitle = value;\r\n                this.applyReaderSettings();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"closable\", {\r\n        /**\r\n         * @return Closable?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"closable\", this._closable);\r\n        },\r\n        /**\r\n         * Is popup closable?\r\n         *\r\n         * If it is, it can be closed in a number of ways, e.g. by hitting ESC key,\r\n         * clicking curtain, or clicking the close button.\r\n         *\r\n         * If it is not closable, the only way to close it is via `close()` call.\r\n         *\r\n         * @param value Closable?\r\n         */\r\n        set: function (value) {\r\n            if (value !== this._closable) {\r\n                this._closable = value;\r\n                this.applyEvents();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"fitTo\", {\r\n        /**\r\n         * @ignore\r\n         * @todo Implement\r\n         * @return Fit option\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"fitTo\", this._fitTo);\r\n        },\r\n        /**\r\n         * If set to other than \"none\" will try to re-adjust the position of the\r\n         * popop to fit within chart container or browser window.\r\n         *\r\n         * @ignore\r\n         * @todo Implement\r\n         * @default \"window\"\r\n         * @param value  Fit option\r\n         */\r\n        set: function (value) {\r\n            if (value != this._fitTo) {\r\n                this._fitTo = value;\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"defaultStyles\", {\r\n        /**\r\n         * @return Use default CSS?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"defaultStyles\", this._defaultStyles);\r\n        },\r\n        /**\r\n         * Should popup use default CSS?\r\n         *\r\n         * If default CSS is disabled, an external CSS should handle the look of the\r\n         * popup, since it will look quite out of place otherwise.\r\n         *\r\n         * @default true\r\n         * @param Use default CSS?\r\n         */\r\n        set: function (value) {\r\n            if (this._defaultStyles != value) {\r\n                this._defaultStyles = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"showCurtain\", {\r\n        /**\r\n         * @return Show curtain?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"showCurtain\", this._showCurtain);\r\n        },\r\n        /**\r\n         * Should popup use dim out all content behind it?\r\n         *\r\n         * @default false\r\n         * @param Show curtain?\r\n         */\r\n        set: function (value) {\r\n            if (this._showCurtain != value) {\r\n                this._showCurtain = value;\r\n                if (this._elements.curtain) {\r\n                    this._elements.curtain.style.display = value ? \"block\" : \"none\";\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates curtain element.\r\n     */\r\n    Popup.prototype.createCurtainElement = function () {\r\n        // Get class names for popup elements\r\n        var classNames = this.getClassNames();\r\n        // Create the curtain\r\n        var curtain = document.createElement(\"div\");\r\n        curtain.className = classNames.curtainClass;\r\n        // Append curtain to wrapper\r\n        this.container.appendChild(curtain);\r\n        // Create an InteractionObject for curtain because we might need to\r\n        // set interactions on it\r\n        this._IOs.curtain = getInteraction().getInteraction(curtain);\r\n        // Add Curtain IO to disposers\r\n        this._disposers.push(this._IOs.curtain);\r\n        // Set events to disable underlying interactivity\r\n        this._IOs.curtain.events.on(\"over\", this.disablePointers, this);\r\n        this._IOs.curtain.events.on(\"out\", this.releasePointers, this);\r\n        // Hide it?\r\n        curtain.style.display = this.showCurtain ? \"block\" : \"none\";\r\n        // Save for later\r\n        this._elements.curtain = curtain;\r\n    };\r\n    Object.defineProperty(Popup.prototype, \"draggable\", {\r\n        /**\r\n         * @return Show curtain?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"draggable\", this._draggable);\r\n        },\r\n        /**\r\n         * Can the popup be dragged with a pointer?\r\n         *\r\n         * @default false\r\n         * @param Show curtain?\r\n         */\r\n        set: function (value) {\r\n            if (this._draggable != value) {\r\n                this._draggable = value;\r\n                this.setupDragging();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"dynamicResize\", {\r\n        /**\r\n         * @return Resize dynamically?\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"dynamicResize\", this._dynamicResize);\r\n        },\r\n        /**\r\n         * Resize popup as images are being loaded.\r\n         *\r\n         * @default true\r\n         * @since 4.9.17\r\n         * @param Resize dynamically?\r\n         */\r\n        set: function (value) {\r\n            if (this._dynamicResize != value) {\r\n                this._dynamicResize = value;\r\n                this.positionElement(true);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"align\", {\r\n        /**\r\n         * @return Horizontal position\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"align\", this._align);\r\n        },\r\n        /**\r\n         * Horizontal positioning of the content window.\r\n         *\r\n         * Available options: \"left\", \"center\" (default), \"right\", and \"none\".\r\n         *\r\n         * @default \"center\"\r\n         * @param Horizontal position\r\n         */\r\n        set: function (value) {\r\n            if (this._align != value) {\r\n                this._align = value;\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"verticalAlign\", {\r\n        /**\r\n         * @return Vertical position\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"verticalAlign\", this._verticalAlign);\r\n        },\r\n        /**\r\n         * Vertical positioning of the content window.\r\n         *\r\n         * Available options: \"top\", \"middle\" (default), \"bottom\", and \"none\".\r\n         *\r\n         * @default \"middle\"\r\n         * @param Vertical position\r\n         */\r\n        set: function (value) {\r\n            if (this._verticalAlign != value) {\r\n                this._verticalAlign = value;\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"left\", {\r\n        /**\r\n         * @return Left\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"left\", this._left);\r\n        },\r\n        /**\r\n         * \"left\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n         *\r\n         * Can be either absolute pixel value, or relative (`Percent`).\r\n         *\r\n         * Setting this property will automatically set `align` to \"none\".\r\n         *\r\n         * NOTE: The position is relative to the chart container.\r\n         *\r\n         * @param Left\r\n         */\r\n        set: function (value) {\r\n            if (this.left != value) {\r\n                this._left = value;\r\n                this._align = \"none\";\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"right\", {\r\n        /**\r\n         * @return Right\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"right\", this._right);\r\n        },\r\n        /**\r\n         * \"right\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n         *\r\n         * Can be either absolute pixel value, or relative (`Percent`).\r\n         *\r\n         * Setting this property will automatically set `align` to \"none\".\r\n         *\r\n         * NOTE: The position is relative to the chart container.\r\n         *\r\n         * @param Right\r\n         */\r\n        set: function (value) {\r\n            if (this.right != value) {\r\n                this._right = value;\r\n                this._align = \"none\";\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"top\", {\r\n        /**\r\n         * @return Top\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"top\", this._top);\r\n        },\r\n        /**\r\n         * \"top\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n         *\r\n         * Can be either absolute pixel value, or relative (`Percent`).\r\n         *\r\n         * Setting this property will automatically set `verticalAlign` to \"none\".\r\n         *\r\n         * NOTE: The position is relative to the chart container.\r\n         *\r\n         * @param Top\r\n         */\r\n        set: function (value) {\r\n            if (this.top != value) {\r\n                this._top = value;\r\n                this._verticalAlign = \"none\";\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"bottom\", {\r\n        /**\r\n         * @return Bottom\r\n         */\r\n        get: function () {\r\n            return this.adapter.apply(\"bottom\", this._bottom);\r\n        },\r\n        /**\r\n         * \"bottom\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n         *\r\n         * Can be either absolute pixel value, or relative (`Percent`).\r\n         *\r\n         * Setting this property will automatically set `verticalAlign` to \"none\".\r\n         *\r\n         * NOTE: The position is relative to the chart container.\r\n         *\r\n         * @param Bottom\r\n         */\r\n        set: function (value) {\r\n            if (this.bottom != value) {\r\n                this._bottom = value;\r\n                this._verticalAlign = \"none\";\r\n                this.positionElement();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Popup.prototype, \"elements\", {\r\n        /**\r\n         * Returns an object with references to various elements of the Popup.\r\n         *\r\n         * * `wrapper`\r\n         * * `title`\r\n         * * `content`\r\n         * * `close`\r\n         * * `curtain`\r\n         */\r\n        get: function () {\r\n            return this._elements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Loads popup CSS.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\r\n    Popup.prototype.loadDefaultCSS = function () {\r\n        if (!this._cssLoaded) {\r\n            this._disposers.push(popupCSS(getShadowRoot(this.container), this.classPrefix));\r\n            $object.each(this._elements, function (key, el) {\r\n                el.style.display = \"\";\r\n            });\r\n            this._cssLoaded = true;\r\n        }\r\n    };\r\n    /**\r\n     * If popup is closable, this method adds various events to popup elements.\r\n     */\r\n    Popup.prototype.applyEvents = function () {\r\n        var _this = this;\r\n        if (this._IOs.close) {\r\n            if (this.closable) {\r\n                this._IOs.close.element.style.visibility = \"visible\";\r\n                var disposers = [\r\n                    getInteraction().body.events.on(\"keyup\", function (ev) {\r\n                        if (keyboard.isKey(ev.event, \"esc\") && _this.closable) {\r\n                            _this.close();\r\n                        }\r\n                    }),\r\n                    this._IOs.close.events.on(\"hit\", function (ev) {\r\n                        _this.close();\r\n                    })\r\n                ];\r\n                disposers.push(this._IOs.curtain.events.on(\"hit\", function (ev) {\r\n                    if (_this.showCurtain && _this.closable) {\r\n                        _this.close();\r\n                    }\r\n                }));\r\n                this._disposers.push(new MultiDisposer(disposers));\r\n            }\r\n            else {\r\n                this._IOs.close.element.style.visibility = \"hidden\";\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Disables interactivity on parent chart.\r\n     */\r\n    Popup.prototype.disablePointers = function () {\r\n        if (this.sprite) {\r\n            this._spriteInteractionsEnabled = this.sprite.interactionsEnabled;\r\n            this.sprite.interactionsEnabled = false;\r\n        }\r\n    };\r\n    /**\r\n     * Releases temporarily disabled pointers on parent chart.\r\n     */\r\n    Popup.prototype.releasePointers = function () {\r\n        if ($type.hasValue(this._spriteInteractionsEnabled)) {\r\n            this.sprite.interactionsEnabled = this._spriteInteractionsEnabled;\r\n            this._spriteInteractionsEnabled = undefined;\r\n        }\r\n    };\r\n    /**\r\n     * Sets screen reader related settings.\r\n     */\r\n    Popup.prototype.applyReaderSettings = function () {\r\n        this.elements.wrapper.setAttribute(\"aria-label\", this.readerTitle);\r\n    };\r\n    /**\r\n     * Copies all properties and related data from different element.\r\n     *\r\n     * @param object Source element\r\n     */\r\n    Popup.prototype.copyFrom = function (source) {\r\n        _super.prototype.copyFrom.call(this, source);\r\n        this.container = source.container;\r\n        this.sprite = source.sprite;\r\n        this.classPrefix = source.classPrefixRaw;\r\n        this.content = source.content;\r\n        this.title = source.title;\r\n        this.readerTitle = source.readerTitle;\r\n        this.defaultStyles = source.defaultStyles;\r\n        this.showCurtain = source.showCurtain;\r\n        this.align = source.align;\r\n        this.verticalAlign = source.verticalAlign;\r\n        this.left = source.left;\r\n        this.right = source.right;\r\n        this.top = source.top;\r\n        this.bottom = source.bottom;\r\n        this.adapter.copyFrom(source.adapter);\r\n    };\r\n    return Popup;\r\n}(BaseObjectEvents));\r\nexport { Popup };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}