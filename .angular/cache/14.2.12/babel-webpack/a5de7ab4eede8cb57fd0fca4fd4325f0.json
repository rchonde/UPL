{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/select_box.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport { noop, ensureDefined } from \"../core/utils/common\";\nimport { isDefined, isPromise } from \"../core/utils/type\";\nimport { extend } from \"../core/utils/extend\";\nimport { each } from \"../core/utils/iterator\";\nimport { Deferred, fromPromise } from \"../core/utils/deferred\";\nimport { getPublicElement } from \"../core/element\";\nimport errors from \"../core/errors\";\nimport domAdapter from \"../core/dom_adapter\";\nimport messageLocalization from \"../localization/message\";\nimport registerComponent from \"../core/component_registrator\";\nimport DropDownList from \"./drop_down_editor/ui.drop_down_list\";\nimport \"./list/modules/selection\";\nimport { normalizeKeyName } from \"../events/utils/index\";\nvar DISABLED_STATE_SELECTOR = \".dx-state-disabled\";\nvar SELECTBOX_CLASS = \"dx-selectbox\";\nvar SELECTBOX_POPUP_CLASS = \"dx-selectbox-popup\";\nvar SELECTBOX_CONTAINER_CLASS = \"dx-selectbox-container\";\nvar SELECTBOX_POPUP_WRAPPER_CLASS = \"dx-selectbox-popup-wrapper\";\nvar SelectBox = DropDownList.inherit({\n  _supportedKeys: function () {\n    var that = this;\n    var parent = this.callBase();\n\n    var clearSelectBox = function (e) {\n      var isEditable = this._isEditable();\n\n      if (!isEditable) {\n        if (this.option(\"showClearButton\")) {\n          e.preventDefault();\n          this.reset();\n        }\n      } else if (this._valueSubstituted()) {\n        this._preventFiltering = true;\n      }\n\n      this._savedTextRemoveEvent = e;\n      this._preventSubstitution = true;\n    };\n\n    var searchIfNeeded = function () {\n      if (that.option(\"searchEnabled\") && that._valueSubstituted()) {\n        that._searchHandler();\n      }\n    };\n\n    return extend({}, parent, {\n      tab: function () {\n        if (this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\")) {\n          this._resetCaretPosition(true);\n        }\n\n        parent.tab && parent.tab.apply(this, arguments);\n\n        this._cancelSearchIfNeed();\n      },\n      upArrow: function (e) {\n        if (parent.upArrow && parent.upArrow.apply(this, arguments)) {\n          if (!this.option(\"opened\")) {\n            this._setNextValue(e);\n          }\n\n          return true;\n        }\n      },\n      downArrow: function (e) {\n        if (parent.downArrow && parent.downArrow.apply(this, arguments)) {\n          if (!this.option(\"opened\")) {\n            this._setNextValue(e);\n          }\n\n          return true;\n        }\n      },\n      leftArrow: function () {\n        searchIfNeeded();\n        parent.leftArrow && parent.leftArrow.apply(this, arguments);\n      },\n      rightArrow: function () {\n        searchIfNeeded();\n        parent.rightArrow && parent.rightArrow.apply(this, arguments);\n      },\n      home: function () {\n        searchIfNeeded();\n        parent.home && parent.home.apply(this, arguments);\n      },\n      end: function () {\n        searchIfNeeded();\n        parent.end && parent.end.apply(this, arguments);\n      },\n      escape: function () {\n        var result = parent.escape && parent.escape.apply(this, arguments);\n\n        this._cancelEditing();\n\n        return null !== result && void 0 !== result ? result : true;\n      },\n      enter: function (e) {\n        var isOpened = this.option(\"opened\");\n\n        var inputText = this._input().val().trim();\n\n        var isCustomText = inputText && this._list && !this._list.option(\"focusedElement\");\n\n        if (!inputText && isDefined(this.option(\"value\")) && this.option(\"allowClearing\")) {\n          this._saveValueChangeEvent(e);\n\n          this.option({\n            selectedItem: null,\n            value: null\n          });\n          this.close();\n        } else {\n          if (this.option(\"acceptCustomValue\")) {\n            e.preventDefault();\n\n            if (isCustomText) {\n              if (isOpened) {\n                this._toggleOpenState();\n              }\n\n              this._valueChangeEventHandler(e);\n            }\n\n            return isOpened;\n          }\n\n          if (parent.enter && parent.enter.apply(this, arguments)) {\n            return isOpened;\n          }\n        }\n      },\n      space: function (e) {\n        var isOpened = this.option(\"opened\");\n        var isSearchEnabled = this.option(\"searchEnabled\");\n        var acceptCustomValue = this.option(\"acceptCustomValue\");\n\n        if (!isOpened || isSearchEnabled || acceptCustomValue) {\n          return;\n        }\n\n        e.preventDefault();\n\n        this._valueChangeEventHandler(e);\n\n        return true;\n      },\n      backspace: clearSelectBox,\n      del: clearSelectBox\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      placeholder: messageLocalization.format(\"Select\"),\n      fieldTemplate: null,\n      customItemCreateEvent: \"change\",\n      valueChangeEvent: \"change\",\n      acceptCustomValue: false,\n      onCustomItemCreating: function (e) {\n        if (!isDefined(e.customItem)) {\n          e.customItem = e.text;\n        }\n      },\n      showSelectionControls: false,\n      allowClearing: true,\n      tooltipEnabled: false,\n      openOnFieldClick: true,\n      showDropDownButton: true,\n      displayCustomValue: false,\n      useHiddenSubmitElement: true\n    });\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initCustomItemCreatingAction();\n  },\n  _initMarkup: function () {\n    this.$element().addClass(SELECTBOX_CLASS);\n\n    this._renderTooltip();\n\n    this.callBase();\n\n    this._$container.addClass(SELECTBOX_CONTAINER_CLASS);\n  },\n  _createPopup: function () {\n    this.callBase();\n\n    this._popup.$element().addClass(SELECTBOX_POPUP_CLASS);\n\n    this._popup.$overlayContent().attr(\"tabindex\", -1);\n  },\n  _popupWrapperClass: function () {\n    return this.callBase() + \" \" + SELECTBOX_POPUP_WRAPPER_CLASS;\n  },\n\n  _setDeprecatedOptions() {\n    this.callBase();\n    extend(this._deprecatedOptions, {\n      valueChangeEvent: {\n        since: \"22.2\",\n        alias: \"customItemCreateEvent\"\n      }\n    });\n  },\n\n  _cancelEditing: function () {\n    if (!this.option(\"searchEnabled\") && this._list) {\n      this._focusListElement(null);\n\n      this._updateField(this.option(\"selectedItem\"));\n    }\n  },\n  _renderOpenedState: function () {\n    this.callBase();\n\n    if (this.option(\"opened\")) {\n      this._scrollToSelectedItem();\n\n      this._focusSelectedElement();\n    }\n  },\n  _focusSelectedElement: function () {\n    var _items$indexOf;\n\n    var searchValue = this._searchValue();\n\n    if (!searchValue) {\n      this._focusListElement(null);\n\n      return;\n    }\n\n    var {\n      items: items,\n      selectedItem: selectedItem\n    } = this.option();\n\n    var $listItems = this._list._itemElements();\n\n    var index = null !== (_items$indexOf = null === items || void 0 === items ? void 0 : items.indexOf(selectedItem)) && void 0 !== _items$indexOf ? _items$indexOf : -1;\n    var focusedElement = -1 !== index && !this._isCustomItemSelected() ? $listItems.eq(index) : null;\n\n    this._focusListElement(focusedElement);\n  },\n  _renderFocusedElement: function () {\n    if (!this._list) {\n      return;\n    }\n\n    var searchValue = this._searchValue();\n\n    if (!searchValue || this.option(\"acceptCustomValue\")) {\n      this._focusListElement(null);\n\n      return;\n    }\n\n    var $listItems = this._list._itemElements();\n\n    var focusedElement = $listItems.not(DISABLED_STATE_SELECTOR).eq(0);\n\n    this._focusListElement(focusedElement);\n  },\n  _focusListElement: function (element) {\n    this._preventInputValueRender = true;\n\n    this._list.option(\"focusedElement\", getPublicElement(element));\n\n    delete this._preventInputValueRender;\n  },\n  _scrollToSelectedItem: function () {\n    this._list && this._list.scrollToItem(this._list.option(\"selectedItem\"));\n  },\n  _listContentReadyHandler: function () {\n    this.callBase();\n\n    var isPaginate = this._dataController.paginate();\n\n    if (isPaginate && this._needPopupRepaint()) {\n      return;\n    }\n\n    this._scrollToSelectedItem();\n  },\n  _renderValue: function () {\n    this._renderInputValue();\n\n    this._setSubmitValue();\n\n    return new Deferred().resolve();\n  },\n  _renderInputValue: function () {\n    return this.callBase().always(function () {\n      this._renderInputValueAsync();\n    }.bind(this));\n  },\n  _renderInputValueAsync: function () {\n    this._renderTooltip();\n\n    this._renderInputValueImpl().always(function () {\n      this._refreshSelected();\n    }.bind(this));\n  },\n  _renderInputValueImpl: function () {\n    this._renderField();\n\n    return new Deferred().resolve();\n  },\n  _setNextItem: function (step) {\n    var item = this._calcNextItem(step);\n\n    var value = this._valueGetter(item);\n\n    this._setValue(value);\n  },\n  _setNextValue: function (e) {\n    var dataSourceIsLoaded = this._dataController.isLoaded() ? new Deferred().resolve() : this._dataController.load();\n    dataSourceIsLoaded.done(function () {\n      var selectedIndex = this._getSelectedIndex();\n\n      var hasPages = this._dataController.pageSize();\n\n      var isLastPage = this._dataController.isLastPage();\n\n      var isLastItem = selectedIndex === this._items().length - 1;\n\n      this._saveValueChangeEvent(e);\n\n      var step = \"downArrow\" === normalizeKeyName(e) ? 1 : -1;\n\n      if (hasPages && !isLastPage && isLastItem && step > 0) {\n        if (!this._popup) {\n          this._createPopup();\n        }\n\n        if (!this._dataController.isLoading()) {\n          this._list._loadNextPage().done(this._setNextItem.bind(this, step));\n        }\n      } else {\n        this._setNextItem(step);\n      }\n    }.bind(this));\n  },\n  _setSelectedItem: function (item) {\n    var isUnknownItem = !this._isCustomValueAllowed() && void 0 === item;\n    this.callBase(isUnknownItem ? null : item);\n\n    if (!isUnknownItem && (!this._isEditable() || this._isCustomItemSelected())) {\n      this._setListOption(\"selectedItem\", this.option(\"selectedItem\"));\n    }\n  },\n  _isCustomValueAllowed: function () {\n    return this.option(\"acceptCustomValue\") || this.callBase();\n  },\n  _displayValue: function (item) {\n    item = !isDefined(item) && this._isCustomValueAllowed() ? this.option(\"value\") : item;\n    return this.callBase(item);\n  },\n  _listConfig: function () {\n    var result = extend(this.callBase(), {\n      pageLoadMode: \"scrollBottom\",\n      onSelectionChanged: this._getSelectionChangeHandler(),\n      selectedItem: this.option(\"selectedItem\"),\n      onFocusedItemChanged: this._listFocusedItemChangeHandler.bind(this)\n    });\n\n    if (this.option(\"showSelectionControls\")) {\n      extend(result, {\n        showSelectionControls: true,\n        selectionByClick: true\n      });\n    }\n\n    return result;\n  },\n  _listFocusedItemChangeHandler: function (e) {\n    if (this._preventInputValueRender) {\n      return;\n    }\n\n    var list = e.component;\n    var focusedElement = $(list.option(\"focusedElement\"));\n\n    var focusedItem = list._getItemData(focusedElement);\n\n    this._updateField(focusedItem);\n  },\n  _updateField: function (item) {\n    var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\n\n    if (!(fieldTemplate && this.option(\"fieldTemplate\"))) {\n      var text = this._displayGetter(item);\n\n      this.option(\"text\", text);\n\n      this._renderDisplayText(text);\n\n      return;\n    }\n\n    this._renderField();\n  },\n  _getSelectionChangeHandler: function () {\n    return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : noop;\n  },\n  _selectionChangeHandler: function (e) {\n    each(e.addedItems || [], function (_, addedItem) {\n      this._setValue(this._valueGetter(addedItem));\n    }.bind(this));\n  },\n  _getActualSearchValue: function () {\n    return this._dataController.searchValue();\n  },\n  _toggleOpenState: function (isVisible) {\n    if (this.option(\"disabled\")) {\n      return;\n    }\n\n    isVisible = arguments.length ? isVisible : !this.option(\"opened\");\n\n    if (!isVisible && !this._shouldClearFilter()) {\n      this._restoreInputText(true);\n    }\n\n    if (this._wasSearch() && isVisible) {\n      this._wasSearch(false);\n\n      var showDataImmediately = this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded();\n\n      if (showDataImmediately && this._dataController.getDataSource()) {\n        if (this._searchTimer) {\n          return;\n        }\n\n        var searchValue = this._getActualSearchValue();\n\n        searchValue && this._wasSearch(true);\n\n        this._filterDataSource(searchValue || null);\n      } else {\n        this._setListOption(\"items\", []);\n      }\n    }\n\n    if (isVisible) {\n      this._scrollToSelectedItem();\n    }\n\n    this.callBase(isVisible);\n  },\n  _renderTooltip: function () {\n    if (this.option(\"tooltipEnabled\")) {\n      this.$element().attr(\"title\", this.option(\"displayValue\"));\n    }\n  },\n  _renderDimensions: function () {\n    this.callBase();\n\n    this._updatePopupWidth();\n\n    this._updateListDimensions();\n  },\n  _isValueEqualInputText: function () {\n    var initialSelectedItem = this.option(\"selectedItem\");\n\n    if (null === initialSelectedItem) {\n      return false;\n    }\n\n    var value = this._displayGetter(initialSelectedItem);\n\n    var displayValue = value ? String(value) : \"\";\n\n    var inputText = this._searchValue();\n\n    return displayValue === inputText;\n  },\n  _popupHidingHandler: function () {\n    if (this._isValueEqualInputText()) {\n      this._cancelEditing();\n    }\n\n    this.callBase();\n  },\n  _popupHiddenHandler: function () {\n    this.callBase();\n\n    if (this._shouldCancelSearch()) {\n      this._wasSearch(false);\n\n      this._searchCanceled();\n\n      this._shouldCancelSearch(false);\n    }\n  },\n  _restoreInputText: function (saveEditingValue) {\n    if (this.option(\"readOnly\")) {\n      return;\n    }\n\n    this._loadItemDeferred && this._loadItemDeferred.always(function () {\n      var {\n        acceptCustomValue: acceptCustomValue,\n        text: text,\n        selectedItem: initialSelectedItem\n      } = this.option();\n\n      if (acceptCustomValue) {\n        if (!saveEditingValue && !this._isValueChanging) {\n          this._updateField(null !== initialSelectedItem && void 0 !== initialSelectedItem ? initialSelectedItem : this._createCustomItem(text));\n\n          this._clearFilter();\n        }\n\n        return;\n      }\n\n      if (this.option(\"searchEnabled\")) {\n        if (!this._searchValue() && this.option(\"allowClearing\")) {\n          this._clearTextValue();\n\n          return;\n        }\n      }\n\n      if (this._isValueEqualInputText()) {\n        return;\n      }\n\n      this._renderInputValue().always(function (selectedItem) {\n        var newSelectedItem = ensureDefined(selectedItem, initialSelectedItem);\n\n        this._setSelectedItem(newSelectedItem);\n\n        this._updateField(newSelectedItem);\n\n        this._clearFilter();\n      }.bind(this));\n    }.bind(this));\n  },\n  _valueChangeEventIncludesBlur: function () {\n    var valueChangeEvent = this.option(this._getValueChangeEventOptionName());\n    return valueChangeEvent.includes(\"blur\");\n  },\n  _isPreventedFocusOutEvent: function (e) {\n    return this._preventNestedFocusEvent(e) || this._valueChangeEventIncludesBlur();\n  },\n  _focusOutHandler: function (e) {\n    if (!this._isPreventedFocusOutEvent(e)) {\n      var isOverlayTarget = this._isOverlayNestedTarget(e.relatedTarget);\n\n      if (!isOverlayTarget) {\n        this._restoreInputText();\n\n        this._clearSearchTimer();\n      }\n\n      this._cancelSearchIfNeed(e);\n    }\n\n    e.target = this._input().get(0);\n    this.callBase(e);\n  },\n  _cancelSearchIfNeed: function (e) {\n    var {\n      searchEnabled: searchEnabled\n    } = this.option();\n\n    var isOverlayTarget = this._isOverlayNestedTarget(null === e || void 0 === e ? void 0 : e.relatedTarget);\n\n    var shouldCancelSearch = this._wasSearch() && searchEnabled && !isOverlayTarget;\n\n    if (shouldCancelSearch) {\n      var _this$_popup;\n\n      var isPopupVisible = null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup._hideAnimationProcessing;\n\n      this._clearSearchTimer();\n\n      if (isPopupVisible) {\n        this._shouldCancelSearch(true);\n      } else {\n        this._wasSearch(false);\n\n        this._searchCanceled();\n      }\n    }\n  },\n  _shouldCancelSearch: function (value) {\n    if (!arguments.length) {\n      return this._shouldCancelSearchValue;\n    }\n\n    this._shouldCancelSearchValue = value;\n  },\n  _isOverlayNestedTarget: function (target) {\n    return !!$(target).closest(\".\".concat(SELECTBOX_POPUP_WRAPPER_CLASS)).length;\n  },\n  _clearTextValue: function () {\n    if (this.option(\"selectedItem\")) {\n      if (this._savedTextRemoveEvent) {\n        this._saveValueChangeEvent(this._savedTextRemoveEvent);\n      }\n\n      this.option(\"value\", null);\n    }\n\n    delete this._savedTextRemoveEvent;\n  },\n  _shouldOpenPopup: function () {\n    return this._needPassDataSourceToList() && this._wasSearch();\n  },\n  _isFocused: function () {\n    var activeElement = domAdapter.getActiveElement(this.element());\n    return this.callBase() && $(activeElement).closest(this._input()).length > 0;\n  },\n  _getValueChangeEventOptionName: function () {\n    return \"customItemCreateEvent\";\n  },\n  _renderValueChangeEvent: function () {\n    if (this._isEditable()) {\n      this.callBase();\n    }\n  },\n  _fieldRenderData: function () {\n    var $listFocused = this._list && this.option(\"opened\") && $(this._list.option(\"focusedElement\"));\n\n    if ($listFocused && $listFocused.length) {\n      return this._list._getItemData($listFocused);\n    }\n\n    return this.option(\"selectedItem\");\n  },\n  _isSelectedValue: function (value) {\n    return this._isValueEquals(value, this.option(\"value\"));\n  },\n  _shouldCloseOnItemClick: function () {\n    return !(this.option(\"showSelectionControls\") && \"single\" !== this.option(\"selectionMode\"));\n  },\n  _listItemClickHandler: function (e) {\n    var previousValue = this._getCurrentValue();\n\n    this._focusListElement($(e.itemElement));\n\n    this._saveValueChangeEvent(e.event);\n\n    this._completeSelection(this._valueGetter(e.itemData));\n\n    if (this._shouldCloseOnItemClick()) {\n      this.option(\"opened\", false);\n    }\n\n    if (this.option(\"searchEnabled\") && previousValue === this._valueGetter(e.itemData)) {\n      this._updateField(e.itemData);\n    }\n\n    if (this._shouldClearFilter()) {\n      this._cancelSearchIfNeed();\n    }\n  },\n  _shouldClearFilter: function () {\n    return this._wasSearch();\n  },\n  _completeSelection: function (value) {\n    this._setValue(value);\n  },\n  _loadItem: function (value, cache) {\n    var that = this;\n    var deferred = new Deferred();\n    this.callBase(value, cache).done(function (item) {\n      deferred.resolve(item);\n    }.bind(this)).fail(function (args) {\n      if (null !== args && void 0 !== args && args.shouldSkipCallback) {\n        return;\n      }\n\n      var selectedItem = that.option(\"selectedItem\");\n\n      if (that.option(\"acceptCustomValue\") && value === that._valueGetter(selectedItem)) {\n        deferred.resolve(selectedItem);\n      } else {\n        deferred.reject();\n      }\n    }.bind(this));\n    return deferred.promise();\n  },\n  _loadInputValue: function (value, callback) {\n    this._loadItemDeferred = this._loadItem(value).always(callback);\n    return this._loadItemDeferred;\n  },\n  _isCustomItemSelected: function () {\n    var selectedItem = this.option(\"selectedItem\");\n\n    var searchValue = this._searchValue();\n\n    var selectedItemText = this._displayGetter(selectedItem);\n\n    return !selectedItemText || searchValue !== selectedItemText.toString();\n  },\n  _valueChangeEventHandler: function (e) {\n    if (this.option(\"acceptCustomValue\") && this._isCustomItemSelected() && !this._isValueChanging) {\n      this._isValueChanging = true;\n\n      this._customItemAddedHandler(e);\n    }\n  },\n  _initCustomItemCreatingAction: function () {\n    this._customItemCreatingAction = this._createActionByOption(\"onCustomItemCreating\");\n  },\n  _createCustomItem: function (text) {\n    var params = {\n      text: text\n    };\n\n    var actionResult = this._customItemCreatingAction(params);\n\n    var item = ensureDefined(actionResult, params.customItem);\n\n    if (isDefined(actionResult)) {\n      errors.log(\"W0015\", \"onCustomItemCreating\", \"customItem\");\n    }\n\n    return item;\n  },\n  _customItemAddedHandler: function (e) {\n    var searchValue = this._searchValue();\n\n    var item = this._createCustomItem(searchValue);\n\n    this._saveValueChangeEvent(e);\n\n    if (void 0 === item) {\n      this._renderValue();\n\n      throw errors.Error(\"E0121\");\n    }\n\n    if (isPromise(item)) {\n      fromPromise(item).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this, null));\n    } else {\n      this._setCustomItem(item);\n    }\n  },\n  _setCustomItem: function (item) {\n    if (this._disposed) {\n      return;\n    }\n\n    item = item || null;\n    this.option(\"selectedItem\", item);\n\n    this._cancelSearchIfNeed();\n\n    this._setValue(this._valueGetter(item));\n\n    this._renderDisplayText(this._displayGetter(item));\n\n    this._isValueChanging = false;\n  },\n  _clearValueHandler: function (e) {\n    this._preventFiltering = true;\n    this.callBase(e);\n\n    this._searchCanceled();\n\n    return false;\n  },\n  _wasSearch: function (value) {\n    if (!arguments.length) {\n      return !!this._wasSearchValue;\n    }\n\n    this._wasSearchValue = value;\n  },\n  _searchHandler: function () {\n    if (this._preventFiltering) {\n      delete this._preventFiltering;\n      return;\n    }\n\n    if (this._needPassDataSourceToList()) {\n      this._wasSearch(true);\n    }\n\n    this.callBase(arguments);\n  },\n  _dataSourceFiltered: function (searchValue) {\n    this.callBase();\n\n    if (null !== searchValue) {\n      this._renderInputSubstitution();\n\n      this._renderFocusedElement();\n    }\n  },\n  _valueSubstituted: function () {\n    var input = this._input().get(0);\n\n    var currentSearchLength = this._searchValue().length;\n\n    var isAllSelected = 0 === input.selectionStart && input.selectionEnd === currentSearchLength;\n    var inputHasSelection = input.selectionStart !== input.selectionEnd;\n    var isLastSymbolSelected = currentSearchLength === input.selectionEnd;\n    return this._wasSearch() && inputHasSelection && !isAllSelected && isLastSymbolSelected && this._shouldSubstitutionBeRendered();\n  },\n  _shouldSubstitutionBeRendered: function () {\n    return !this._preventSubstitution && this.option(\"searchEnabled\") && !this.option(\"acceptCustomValue\") && \"startswith\" === this.option(\"searchMode\");\n  },\n  _renderInputSubstitution: function () {\n    if (!this._shouldSubstitutionBeRendered()) {\n      delete this._preventSubstitution;\n      return;\n    }\n\n    var item = this._list && this._getPlainItems(this._list.option(\"items\"))[0];\n\n    if (!item) {\n      return;\n    }\n\n    var $input = this._input();\n\n    var valueLength = $input.val().length;\n\n    if (0 === valueLength) {\n      return;\n    }\n\n    var inputElement = $input.get(0);\n\n    var displayValue = this._displayGetter(item).toString();\n\n    inputElement.value = displayValue;\n\n    this._caret({\n      start: valueLength,\n      end: displayValue.length\n    });\n  },\n  _dispose: function () {\n    this._renderInputValueAsync = noop;\n    delete this._loadItemDeferred;\n    this.callBase();\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"customItemCreateEvent\":\n        this._refreshValueChangeEvent();\n\n        this._refreshFocusEvent();\n\n        this._refreshEvents();\n\n        break;\n\n      case \"onCustomItemCreating\":\n        this._initCustomItemCreatingAction();\n\n        break;\n\n      case \"tooltipEnabled\":\n        this._renderTooltip();\n\n        break;\n\n      case \"displayCustomValue\":\n      case \"acceptCustomValue\":\n      case \"showSelectionControls\":\n        this._invalidate();\n\n        break;\n\n      case \"allowClearing\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxSelectBox\", SelectBox);\nexport default SelectBox;","map":{"version":3,"names":["$","noop","ensureDefined","isDefined","isPromise","extend","each","Deferred","fromPromise","getPublicElement","errors","domAdapter","messageLocalization","registerComponent","DropDownList","normalizeKeyName","DISABLED_STATE_SELECTOR","SELECTBOX_CLASS","SELECTBOX_POPUP_CLASS","SELECTBOX_CONTAINER_CLASS","SELECTBOX_POPUP_WRAPPER_CLASS","SelectBox","inherit","_supportedKeys","that","parent","callBase","clearSelectBox","e","isEditable","_isEditable","option","preventDefault","reset","_valueSubstituted","_preventFiltering","_savedTextRemoveEvent","_preventSubstitution","searchIfNeeded","_searchHandler","tab","_resetCaretPosition","apply","arguments","_cancelSearchIfNeed","upArrow","_setNextValue","downArrow","leftArrow","rightArrow","home","end","escape","result","_cancelEditing","enter","isOpened","inputText","_input","val","trim","isCustomText","_list","_saveValueChangeEvent","selectedItem","value","close","_toggleOpenState","_valueChangeEventHandler","space","isSearchEnabled","acceptCustomValue","backspace","del","_getDefaultOptions","placeholder","format","fieldTemplate","customItemCreateEvent","valueChangeEvent","onCustomItemCreating","customItem","text","showSelectionControls","allowClearing","tooltipEnabled","openOnFieldClick","showDropDownButton","displayCustomValue","useHiddenSubmitElement","_init","_initCustomItemCreatingAction","_initMarkup","$element","addClass","_renderTooltip","_$container","_createPopup","_popup","$overlayContent","attr","_popupWrapperClass","_setDeprecatedOptions","_deprecatedOptions","since","alias","_focusListElement","_updateField","_renderOpenedState","_scrollToSelectedItem","_focusSelectedElement","_items$indexOf","searchValue","_searchValue","items","$listItems","_itemElements","index","indexOf","focusedElement","_isCustomItemSelected","eq","_renderFocusedElement","not","element","_preventInputValueRender","scrollToItem","_listContentReadyHandler","isPaginate","_dataController","paginate","_needPopupRepaint","_renderValue","_renderInputValue","_setSubmitValue","resolve","always","_renderInputValueAsync","bind","_renderInputValueImpl","_refreshSelected","_renderField","_setNextItem","step","item","_calcNextItem","_valueGetter","_setValue","dataSourceIsLoaded","isLoaded","load","done","selectedIndex","_getSelectedIndex","hasPages","pageSize","isLastPage","isLastItem","_items","length","isLoading","_loadNextPage","_setSelectedItem","isUnknownItem","_isCustomValueAllowed","_setListOption","_displayValue","_listConfig","pageLoadMode","onSelectionChanged","_getSelectionChangeHandler","onFocusedItemChanged","_listFocusedItemChangeHandler","selectionByClick","list","component","focusedItem","_getItemData","_getTemplateByOption","_displayGetter","_renderDisplayText","_selectionChangeHandler","addedItems","_","addedItem","_getActualSearchValue","isVisible","_shouldClearFilter","_restoreInputText","_wasSearch","showDataImmediately","_isMinSearchLengthExceeded","getDataSource","_searchTimer","_filterDataSource","_renderDimensions","_updatePopupWidth","_updateListDimensions","_isValueEqualInputText","initialSelectedItem","displayValue","String","_popupHidingHandler","_popupHiddenHandler","_shouldCancelSearch","_searchCanceled","saveEditingValue","_loadItemDeferred","_isValueChanging","_createCustomItem","_clearFilter","_clearTextValue","newSelectedItem","_valueChangeEventIncludesBlur","_getValueChangeEventOptionName","includes","_isPreventedFocusOutEvent","_preventNestedFocusEvent","_focusOutHandler","isOverlayTarget","_isOverlayNestedTarget","relatedTarget","_clearSearchTimer","target","get","searchEnabled","shouldCancelSearch","_this$_popup","isPopupVisible","_hideAnimationProcessing","_shouldCancelSearchValue","closest","concat","_shouldOpenPopup","_needPassDataSourceToList","_isFocused","activeElement","getActiveElement","_renderValueChangeEvent","_fieldRenderData","$listFocused","_isSelectedValue","_isValueEquals","_shouldCloseOnItemClick","_listItemClickHandler","previousValue","_getCurrentValue","itemElement","event","_completeSelection","itemData","_loadItem","cache","deferred","fail","args","shouldSkipCallback","reject","promise","_loadInputValue","callback","selectedItemText","toString","_customItemAddedHandler","_customItemCreatingAction","_createActionByOption","params","actionResult","log","Error","_setCustomItem","_disposed","_clearValueHandler","_wasSearchValue","_dataSourceFiltered","_renderInputSubstitution","input","currentSearchLength","isAllSelected","selectionStart","selectionEnd","inputHasSelection","isLastSymbolSelected","_shouldSubstitutionBeRendered","_getPlainItems","$input","valueLength","inputElement","_caret","start","_dispose","_optionChanged","name","_refreshValueChangeEvent","_refreshFocusEvent","_refreshEvents","_invalidate"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/devextreme/esm/ui/select_box.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/select_box.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport {\r\n    noop,\r\n    ensureDefined\r\n} from \"../core/utils/common\";\r\nimport {\r\n    isDefined,\r\n    isPromise\r\n} from \"../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    Deferred,\r\n    fromPromise\r\n} from \"../core/utils/deferred\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport errors from \"../core/errors\";\r\nimport domAdapter from \"../core/dom_adapter\";\r\nimport messageLocalization from \"../localization/message\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport DropDownList from \"./drop_down_editor/ui.drop_down_list\";\r\nimport \"./list/modules/selection\";\r\nimport {\r\n    normalizeKeyName\r\n} from \"../events/utils/index\";\r\nvar DISABLED_STATE_SELECTOR = \".dx-state-disabled\";\r\nvar SELECTBOX_CLASS = \"dx-selectbox\";\r\nvar SELECTBOX_POPUP_CLASS = \"dx-selectbox-popup\";\r\nvar SELECTBOX_CONTAINER_CLASS = \"dx-selectbox-container\";\r\nvar SELECTBOX_POPUP_WRAPPER_CLASS = \"dx-selectbox-popup-wrapper\";\r\nvar SelectBox = DropDownList.inherit({\r\n    _supportedKeys: function() {\r\n        var that = this;\r\n        var parent = this.callBase();\r\n        var clearSelectBox = function(e) {\r\n            var isEditable = this._isEditable();\r\n            if (!isEditable) {\r\n                if (this.option(\"showClearButton\")) {\r\n                    e.preventDefault();\r\n                    this.reset()\r\n                }\r\n            } else if (this._valueSubstituted()) {\r\n                this._preventFiltering = true\r\n            }\r\n            this._savedTextRemoveEvent = e;\r\n            this._preventSubstitution = true\r\n        };\r\n        var searchIfNeeded = function() {\r\n            if (that.option(\"searchEnabled\") && that._valueSubstituted()) {\r\n                that._searchHandler()\r\n            }\r\n        };\r\n        return extend({}, parent, {\r\n            tab: function() {\r\n                if (this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\")) {\r\n                    this._resetCaretPosition(true)\r\n                }\r\n                parent.tab && parent.tab.apply(this, arguments);\r\n                this._cancelSearchIfNeed()\r\n            },\r\n            upArrow: function(e) {\r\n                if (parent.upArrow && parent.upArrow.apply(this, arguments)) {\r\n                    if (!this.option(\"opened\")) {\r\n                        this._setNextValue(e)\r\n                    }\r\n                    return true\r\n                }\r\n            },\r\n            downArrow: function(e) {\r\n                if (parent.downArrow && parent.downArrow.apply(this, arguments)) {\r\n                    if (!this.option(\"opened\")) {\r\n                        this._setNextValue(e)\r\n                    }\r\n                    return true\r\n                }\r\n            },\r\n            leftArrow: function() {\r\n                searchIfNeeded();\r\n                parent.leftArrow && parent.leftArrow.apply(this, arguments)\r\n            },\r\n            rightArrow: function() {\r\n                searchIfNeeded();\r\n                parent.rightArrow && parent.rightArrow.apply(this, arguments)\r\n            },\r\n            home: function() {\r\n                searchIfNeeded();\r\n                parent.home && parent.home.apply(this, arguments)\r\n            },\r\n            end: function() {\r\n                searchIfNeeded();\r\n                parent.end && parent.end.apply(this, arguments)\r\n            },\r\n            escape: function() {\r\n                var result = parent.escape && parent.escape.apply(this, arguments);\r\n                this._cancelEditing();\r\n                return null !== result && void 0 !== result ? result : true\r\n            },\r\n            enter: function(e) {\r\n                var isOpened = this.option(\"opened\");\r\n                var inputText = this._input().val().trim();\r\n                var isCustomText = inputText && this._list && !this._list.option(\"focusedElement\");\r\n                if (!inputText && isDefined(this.option(\"value\")) && this.option(\"allowClearing\")) {\r\n                    this._saveValueChangeEvent(e);\r\n                    this.option({\r\n                        selectedItem: null,\r\n                        value: null\r\n                    });\r\n                    this.close()\r\n                } else {\r\n                    if (this.option(\"acceptCustomValue\")) {\r\n                        e.preventDefault();\r\n                        if (isCustomText) {\r\n                            if (isOpened) {\r\n                                this._toggleOpenState()\r\n                            }\r\n                            this._valueChangeEventHandler(e)\r\n                        }\r\n                        return isOpened\r\n                    }\r\n                    if (parent.enter && parent.enter.apply(this, arguments)) {\r\n                        return isOpened\r\n                    }\r\n                }\r\n            },\r\n            space: function(e) {\r\n                var isOpened = this.option(\"opened\");\r\n                var isSearchEnabled = this.option(\"searchEnabled\");\r\n                var acceptCustomValue = this.option(\"acceptCustomValue\");\r\n                if (!isOpened || isSearchEnabled || acceptCustomValue) {\r\n                    return\r\n                }\r\n                e.preventDefault();\r\n                this._valueChangeEventHandler(e);\r\n                return true\r\n            },\r\n            backspace: clearSelectBox,\r\n            del: clearSelectBox\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            placeholder: messageLocalization.format(\"Select\"),\r\n            fieldTemplate: null,\r\n            customItemCreateEvent: \"change\",\r\n            valueChangeEvent: \"change\",\r\n            acceptCustomValue: false,\r\n            onCustomItemCreating: function(e) {\r\n                if (!isDefined(e.customItem)) {\r\n                    e.customItem = e.text\r\n                }\r\n            },\r\n            showSelectionControls: false,\r\n            allowClearing: true,\r\n            tooltipEnabled: false,\r\n            openOnFieldClick: true,\r\n            showDropDownButton: true,\r\n            displayCustomValue: false,\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initCustomItemCreatingAction()\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(SELECTBOX_CLASS);\r\n        this._renderTooltip();\r\n        this.callBase();\r\n        this._$container.addClass(SELECTBOX_CONTAINER_CLASS)\r\n    },\r\n    _createPopup: function() {\r\n        this.callBase();\r\n        this._popup.$element().addClass(SELECTBOX_POPUP_CLASS);\r\n        this._popup.$overlayContent().attr(\"tabindex\", -1)\r\n    },\r\n    _popupWrapperClass: function() {\r\n        return this.callBase() + \" \" + SELECTBOX_POPUP_WRAPPER_CLASS\r\n    },\r\n    _setDeprecatedOptions() {\r\n        this.callBase();\r\n        extend(this._deprecatedOptions, {\r\n            valueChangeEvent: {\r\n                since: \"22.2\",\r\n                alias: \"customItemCreateEvent\"\r\n            }\r\n        })\r\n    },\r\n    _cancelEditing: function() {\r\n        if (!this.option(\"searchEnabled\") && this._list) {\r\n            this._focusListElement(null);\r\n            this._updateField(this.option(\"selectedItem\"))\r\n        }\r\n    },\r\n    _renderOpenedState: function() {\r\n        this.callBase();\r\n        if (this.option(\"opened\")) {\r\n            this._scrollToSelectedItem();\r\n            this._focusSelectedElement()\r\n        }\r\n    },\r\n    _focusSelectedElement: function() {\r\n        var _items$indexOf;\r\n        var searchValue = this._searchValue();\r\n        if (!searchValue) {\r\n            this._focusListElement(null);\r\n            return\r\n        }\r\n        var {\r\n            items: items,\r\n            selectedItem: selectedItem\r\n        } = this.option();\r\n        var $listItems = this._list._itemElements();\r\n        var index = null !== (_items$indexOf = null === items || void 0 === items ? void 0 : items.indexOf(selectedItem)) && void 0 !== _items$indexOf ? _items$indexOf : -1;\r\n        var focusedElement = -1 !== index && !this._isCustomItemSelected() ? $listItems.eq(index) : null;\r\n        this._focusListElement(focusedElement)\r\n    },\r\n    _renderFocusedElement: function() {\r\n        if (!this._list) {\r\n            return\r\n        }\r\n        var searchValue = this._searchValue();\r\n        if (!searchValue || this.option(\"acceptCustomValue\")) {\r\n            this._focusListElement(null);\r\n            return\r\n        }\r\n        var $listItems = this._list._itemElements();\r\n        var focusedElement = $listItems.not(DISABLED_STATE_SELECTOR).eq(0);\r\n        this._focusListElement(focusedElement)\r\n    },\r\n    _focusListElement: function(element) {\r\n        this._preventInputValueRender = true;\r\n        this._list.option(\"focusedElement\", getPublicElement(element));\r\n        delete this._preventInputValueRender\r\n    },\r\n    _scrollToSelectedItem: function() {\r\n        this._list && this._list.scrollToItem(this._list.option(\"selectedItem\"))\r\n    },\r\n    _listContentReadyHandler: function() {\r\n        this.callBase();\r\n        var isPaginate = this._dataController.paginate();\r\n        if (isPaginate && this._needPopupRepaint()) {\r\n            return\r\n        }\r\n        this._scrollToSelectedItem()\r\n    },\r\n    _renderValue: function() {\r\n        this._renderInputValue();\r\n        this._setSubmitValue();\r\n        return (new Deferred).resolve()\r\n    },\r\n    _renderInputValue: function() {\r\n        return this.callBase().always(function() {\r\n            this._renderInputValueAsync()\r\n        }.bind(this))\r\n    },\r\n    _renderInputValueAsync: function() {\r\n        this._renderTooltip();\r\n        this._renderInputValueImpl().always(function() {\r\n            this._refreshSelected()\r\n        }.bind(this))\r\n    },\r\n    _renderInputValueImpl: function() {\r\n        this._renderField();\r\n        return (new Deferred).resolve()\r\n    },\r\n    _setNextItem: function(step) {\r\n        var item = this._calcNextItem(step);\r\n        var value = this._valueGetter(item);\r\n        this._setValue(value)\r\n    },\r\n    _setNextValue: function(e) {\r\n        var dataSourceIsLoaded = this._dataController.isLoaded() ? (new Deferred).resolve() : this._dataController.load();\r\n        dataSourceIsLoaded.done(function() {\r\n            var selectedIndex = this._getSelectedIndex();\r\n            var hasPages = this._dataController.pageSize();\r\n            var isLastPage = this._dataController.isLastPage();\r\n            var isLastItem = selectedIndex === this._items().length - 1;\r\n            this._saveValueChangeEvent(e);\r\n            var step = \"downArrow\" === normalizeKeyName(e) ? 1 : -1;\r\n            if (hasPages && !isLastPage && isLastItem && step > 0) {\r\n                if (!this._popup) {\r\n                    this._createPopup()\r\n                }\r\n                if (!this._dataController.isLoading()) {\r\n                    this._list._loadNextPage().done(this._setNextItem.bind(this, step))\r\n                }\r\n            } else {\r\n                this._setNextItem(step)\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _setSelectedItem: function(item) {\r\n        var isUnknownItem = !this._isCustomValueAllowed() && void 0 === item;\r\n        this.callBase(isUnknownItem ? null : item);\r\n        if (!isUnknownItem && (!this._isEditable() || this._isCustomItemSelected())) {\r\n            this._setListOption(\"selectedItem\", this.option(\"selectedItem\"))\r\n        }\r\n    },\r\n    _isCustomValueAllowed: function() {\r\n        return this.option(\"acceptCustomValue\") || this.callBase()\r\n    },\r\n    _displayValue: function(item) {\r\n        item = !isDefined(item) && this._isCustomValueAllowed() ? this.option(\"value\") : item;\r\n        return this.callBase(item)\r\n    },\r\n    _listConfig: function() {\r\n        var result = extend(this.callBase(), {\r\n            pageLoadMode: \"scrollBottom\",\r\n            onSelectionChanged: this._getSelectionChangeHandler(),\r\n            selectedItem: this.option(\"selectedItem\"),\r\n            onFocusedItemChanged: this._listFocusedItemChangeHandler.bind(this)\r\n        });\r\n        if (this.option(\"showSelectionControls\")) {\r\n            extend(result, {\r\n                showSelectionControls: true,\r\n                selectionByClick: true\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _listFocusedItemChangeHandler: function(e) {\r\n        if (this._preventInputValueRender) {\r\n            return\r\n        }\r\n        var list = e.component;\r\n        var focusedElement = $(list.option(\"focusedElement\"));\r\n        var focusedItem = list._getItemData(focusedElement);\r\n        this._updateField(focusedItem)\r\n    },\r\n    _updateField: function(item) {\r\n        var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\r\n        if (!(fieldTemplate && this.option(\"fieldTemplate\"))) {\r\n            var text = this._displayGetter(item);\r\n            this.option(\"text\", text);\r\n            this._renderDisplayText(text);\r\n            return\r\n        }\r\n        this._renderField()\r\n    },\r\n    _getSelectionChangeHandler: function() {\r\n        return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : noop\r\n    },\r\n    _selectionChangeHandler: function(e) {\r\n        each(e.addedItems || [], function(_, addedItem) {\r\n            this._setValue(this._valueGetter(addedItem))\r\n        }.bind(this))\r\n    },\r\n    _getActualSearchValue: function() {\r\n        return this._dataController.searchValue()\r\n    },\r\n    _toggleOpenState: function(isVisible) {\r\n        if (this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        isVisible = arguments.length ? isVisible : !this.option(\"opened\");\r\n        if (!isVisible && !this._shouldClearFilter()) {\r\n            this._restoreInputText(true)\r\n        }\r\n        if (this._wasSearch() && isVisible) {\r\n            this._wasSearch(false);\r\n            var showDataImmediately = this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded();\r\n            if (showDataImmediately && this._dataController.getDataSource()) {\r\n                if (this._searchTimer) {\r\n                    return\r\n                }\r\n                var searchValue = this._getActualSearchValue();\r\n                searchValue && this._wasSearch(true);\r\n                this._filterDataSource(searchValue || null)\r\n            } else {\r\n                this._setListOption(\"items\", [])\r\n            }\r\n        }\r\n        if (isVisible) {\r\n            this._scrollToSelectedItem()\r\n        }\r\n        this.callBase(isVisible)\r\n    },\r\n    _renderTooltip: function() {\r\n        if (this.option(\"tooltipEnabled\")) {\r\n            this.$element().attr(\"title\", this.option(\"displayValue\"))\r\n        }\r\n    },\r\n    _renderDimensions: function() {\r\n        this.callBase();\r\n        this._updatePopupWidth();\r\n        this._updateListDimensions()\r\n    },\r\n    _isValueEqualInputText: function() {\r\n        var initialSelectedItem = this.option(\"selectedItem\");\r\n        if (null === initialSelectedItem) {\r\n            return false\r\n        }\r\n        var value = this._displayGetter(initialSelectedItem);\r\n        var displayValue = value ? String(value) : \"\";\r\n        var inputText = this._searchValue();\r\n        return displayValue === inputText\r\n    },\r\n    _popupHidingHandler: function() {\r\n        if (this._isValueEqualInputText()) {\r\n            this._cancelEditing()\r\n        }\r\n        this.callBase()\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this.callBase();\r\n        if (this._shouldCancelSearch()) {\r\n            this._wasSearch(false);\r\n            this._searchCanceled();\r\n            this._shouldCancelSearch(false)\r\n        }\r\n    },\r\n    _restoreInputText: function(saveEditingValue) {\r\n        if (this.option(\"readOnly\")) {\r\n            return\r\n        }\r\n        this._loadItemDeferred && this._loadItemDeferred.always(function() {\r\n            var {\r\n                acceptCustomValue: acceptCustomValue,\r\n                text: text,\r\n                selectedItem: initialSelectedItem\r\n            } = this.option();\r\n            if (acceptCustomValue) {\r\n                if (!saveEditingValue && !this._isValueChanging) {\r\n                    this._updateField(null !== initialSelectedItem && void 0 !== initialSelectedItem ? initialSelectedItem : this._createCustomItem(text));\r\n                    this._clearFilter()\r\n                }\r\n                return\r\n            }\r\n            if (this.option(\"searchEnabled\")) {\r\n                if (!this._searchValue() && this.option(\"allowClearing\")) {\r\n                    this._clearTextValue();\r\n                    return\r\n                }\r\n            }\r\n            if (this._isValueEqualInputText()) {\r\n                return\r\n            }\r\n            this._renderInputValue().always(function(selectedItem) {\r\n                var newSelectedItem = ensureDefined(selectedItem, initialSelectedItem);\r\n                this._setSelectedItem(newSelectedItem);\r\n                this._updateField(newSelectedItem);\r\n                this._clearFilter()\r\n            }.bind(this))\r\n        }.bind(this))\r\n    },\r\n    _valueChangeEventIncludesBlur: function() {\r\n        var valueChangeEvent = this.option(this._getValueChangeEventOptionName());\r\n        return valueChangeEvent.includes(\"blur\")\r\n    },\r\n    _isPreventedFocusOutEvent: function(e) {\r\n        return this._preventNestedFocusEvent(e) || this._valueChangeEventIncludesBlur()\r\n    },\r\n    _focusOutHandler: function(e) {\r\n        if (!this._isPreventedFocusOutEvent(e)) {\r\n            var isOverlayTarget = this._isOverlayNestedTarget(e.relatedTarget);\r\n            if (!isOverlayTarget) {\r\n                this._restoreInputText();\r\n                this._clearSearchTimer()\r\n            }\r\n            this._cancelSearchIfNeed(e)\r\n        }\r\n        e.target = this._input().get(0);\r\n        this.callBase(e)\r\n    },\r\n    _cancelSearchIfNeed: function(e) {\r\n        var {\r\n            searchEnabled: searchEnabled\r\n        } = this.option();\r\n        var isOverlayTarget = this._isOverlayNestedTarget(null === e || void 0 === e ? void 0 : e.relatedTarget);\r\n        var shouldCancelSearch = this._wasSearch() && searchEnabled && !isOverlayTarget;\r\n        if (shouldCancelSearch) {\r\n            var _this$_popup;\r\n            var isPopupVisible = null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup._hideAnimationProcessing;\r\n            this._clearSearchTimer();\r\n            if (isPopupVisible) {\r\n                this._shouldCancelSearch(true)\r\n            } else {\r\n                this._wasSearch(false);\r\n                this._searchCanceled()\r\n            }\r\n        }\r\n    },\r\n    _shouldCancelSearch: function(value) {\r\n        if (!arguments.length) {\r\n            return this._shouldCancelSearchValue\r\n        }\r\n        this._shouldCancelSearchValue = value\r\n    },\r\n    _isOverlayNestedTarget: function(target) {\r\n        return !!$(target).closest(\".\".concat(SELECTBOX_POPUP_WRAPPER_CLASS)).length\r\n    },\r\n    _clearTextValue: function() {\r\n        if (this.option(\"selectedItem\")) {\r\n            if (this._savedTextRemoveEvent) {\r\n                this._saveValueChangeEvent(this._savedTextRemoveEvent)\r\n            }\r\n            this.option(\"value\", null)\r\n        }\r\n        delete this._savedTextRemoveEvent\r\n    },\r\n    _shouldOpenPopup: function() {\r\n        return this._needPassDataSourceToList() && this._wasSearch()\r\n    },\r\n    _isFocused: function() {\r\n        var activeElement = domAdapter.getActiveElement(this.element());\r\n        return this.callBase() && $(activeElement).closest(this._input()).length > 0\r\n    },\r\n    _getValueChangeEventOptionName: function() {\r\n        return \"customItemCreateEvent\"\r\n    },\r\n    _renderValueChangeEvent: function() {\r\n        if (this._isEditable()) {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _fieldRenderData: function() {\r\n        var $listFocused = this._list && this.option(\"opened\") && $(this._list.option(\"focusedElement\"));\r\n        if ($listFocused && $listFocused.length) {\r\n            return this._list._getItemData($listFocused)\r\n        }\r\n        return this.option(\"selectedItem\")\r\n    },\r\n    _isSelectedValue: function(value) {\r\n        return this._isValueEquals(value, this.option(\"value\"))\r\n    },\r\n    _shouldCloseOnItemClick: function() {\r\n        return !(this.option(\"showSelectionControls\") && \"single\" !== this.option(\"selectionMode\"))\r\n    },\r\n    _listItemClickHandler: function(e) {\r\n        var previousValue = this._getCurrentValue();\r\n        this._focusListElement($(e.itemElement));\r\n        this._saveValueChangeEvent(e.event);\r\n        this._completeSelection(this._valueGetter(e.itemData));\r\n        if (this._shouldCloseOnItemClick()) {\r\n            this.option(\"opened\", false)\r\n        }\r\n        if (this.option(\"searchEnabled\") && previousValue === this._valueGetter(e.itemData)) {\r\n            this._updateField(e.itemData)\r\n        }\r\n        if (this._shouldClearFilter()) {\r\n            this._cancelSearchIfNeed()\r\n        }\r\n    },\r\n    _shouldClearFilter: function() {\r\n        return this._wasSearch()\r\n    },\r\n    _completeSelection: function(value) {\r\n        this._setValue(value)\r\n    },\r\n    _loadItem: function(value, cache) {\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        this.callBase(value, cache).done(function(item) {\r\n            deferred.resolve(item)\r\n        }.bind(this)).fail(function(args) {\r\n            if (null !== args && void 0 !== args && args.shouldSkipCallback) {\r\n                return\r\n            }\r\n            var selectedItem = that.option(\"selectedItem\");\r\n            if (that.option(\"acceptCustomValue\") && value === that._valueGetter(selectedItem)) {\r\n                deferred.resolve(selectedItem)\r\n            } else {\r\n                deferred.reject()\r\n            }\r\n        }.bind(this));\r\n        return deferred.promise()\r\n    },\r\n    _loadInputValue: function(value, callback) {\r\n        this._loadItemDeferred = this._loadItem(value).always(callback);\r\n        return this._loadItemDeferred\r\n    },\r\n    _isCustomItemSelected: function() {\r\n        var selectedItem = this.option(\"selectedItem\");\r\n        var searchValue = this._searchValue();\r\n        var selectedItemText = this._displayGetter(selectedItem);\r\n        return !selectedItemText || searchValue !== selectedItemText.toString()\r\n    },\r\n    _valueChangeEventHandler: function(e) {\r\n        if (this.option(\"acceptCustomValue\") && this._isCustomItemSelected() && !this._isValueChanging) {\r\n            this._isValueChanging = true;\r\n            this._customItemAddedHandler(e)\r\n        }\r\n    },\r\n    _initCustomItemCreatingAction: function() {\r\n        this._customItemCreatingAction = this._createActionByOption(\"onCustomItemCreating\")\r\n    },\r\n    _createCustomItem: function(text) {\r\n        var params = {\r\n            text: text\r\n        };\r\n        var actionResult = this._customItemCreatingAction(params);\r\n        var item = ensureDefined(actionResult, params.customItem);\r\n        if (isDefined(actionResult)) {\r\n            errors.log(\"W0015\", \"onCustomItemCreating\", \"customItem\")\r\n        }\r\n        return item\r\n    },\r\n    _customItemAddedHandler: function(e) {\r\n        var searchValue = this._searchValue();\r\n        var item = this._createCustomItem(searchValue);\r\n        this._saveValueChangeEvent(e);\r\n        if (void 0 === item) {\r\n            this._renderValue();\r\n            throw errors.Error(\"E0121\")\r\n        }\r\n        if (isPromise(item)) {\r\n            fromPromise(item).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this, null))\r\n        } else {\r\n            this._setCustomItem(item)\r\n        }\r\n    },\r\n    _setCustomItem: function(item) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        item = item || null;\r\n        this.option(\"selectedItem\", item);\r\n        this._cancelSearchIfNeed();\r\n        this._setValue(this._valueGetter(item));\r\n        this._renderDisplayText(this._displayGetter(item));\r\n        this._isValueChanging = false\r\n    },\r\n    _clearValueHandler: function(e) {\r\n        this._preventFiltering = true;\r\n        this.callBase(e);\r\n        this._searchCanceled();\r\n        return false\r\n    },\r\n    _wasSearch: function(value) {\r\n        if (!arguments.length) {\r\n            return !!this._wasSearchValue\r\n        }\r\n        this._wasSearchValue = value\r\n    },\r\n    _searchHandler: function() {\r\n        if (this._preventFiltering) {\r\n            delete this._preventFiltering;\r\n            return\r\n        }\r\n        if (this._needPassDataSourceToList()) {\r\n            this._wasSearch(true)\r\n        }\r\n        this.callBase(arguments)\r\n    },\r\n    _dataSourceFiltered: function(searchValue) {\r\n        this.callBase();\r\n        if (null !== searchValue) {\r\n            this._renderInputSubstitution();\r\n            this._renderFocusedElement()\r\n        }\r\n    },\r\n    _valueSubstituted: function() {\r\n        var input = this._input().get(0);\r\n        var currentSearchLength = this._searchValue().length;\r\n        var isAllSelected = 0 === input.selectionStart && input.selectionEnd === currentSearchLength;\r\n        var inputHasSelection = input.selectionStart !== input.selectionEnd;\r\n        var isLastSymbolSelected = currentSearchLength === input.selectionEnd;\r\n        return this._wasSearch() && inputHasSelection && !isAllSelected && isLastSymbolSelected && this._shouldSubstitutionBeRendered()\r\n    },\r\n    _shouldSubstitutionBeRendered: function() {\r\n        return !this._preventSubstitution && this.option(\"searchEnabled\") && !this.option(\"acceptCustomValue\") && \"startswith\" === this.option(\"searchMode\")\r\n    },\r\n    _renderInputSubstitution: function() {\r\n        if (!this._shouldSubstitutionBeRendered()) {\r\n            delete this._preventSubstitution;\r\n            return\r\n        }\r\n        var item = this._list && this._getPlainItems(this._list.option(\"items\"))[0];\r\n        if (!item) {\r\n            return\r\n        }\r\n        var $input = this._input();\r\n        var valueLength = $input.val().length;\r\n        if (0 === valueLength) {\r\n            return\r\n        }\r\n        var inputElement = $input.get(0);\r\n        var displayValue = this._displayGetter(item).toString();\r\n        inputElement.value = displayValue;\r\n        this._caret({\r\n            start: valueLength,\r\n            end: displayValue.length\r\n        })\r\n    },\r\n    _dispose: function() {\r\n        this._renderInputValueAsync = noop;\r\n        delete this._loadItemDeferred;\r\n        this.callBase()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"customItemCreateEvent\":\r\n                this._refreshValueChangeEvent();\r\n                this._refreshFocusEvent();\r\n                this._refreshEvents();\r\n                break;\r\n            case \"onCustomItemCreating\":\r\n                this._initCustomItemCreatingAction();\r\n                break;\r\n            case \"tooltipEnabled\":\r\n                this._renderTooltip();\r\n                break;\r\n            case \"displayCustomValue\":\r\n            case \"acceptCustomValue\":\r\n            case \"showSelectionControls\":\r\n                this._invalidate();\r\n                break;\r\n            case \"allowClearing\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nregisterComponent(\"dxSelectBox\", SelectBox);\r\nexport default SelectBox;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,kBAAd;AACA,SACIC,IADJ,EAEIC,aAFJ,QAGO,sBAHP;AAIA,SACIC,SADJ,EAEIC,SAFJ,QAGO,oBAHP;AAIA,SACIC,MADJ,QAEO,sBAFP;AAGA,SACIC,IADJ,QAEO,wBAFP;AAGA,SACIC,QADJ,EAEIC,WAFJ,QAGO,wBAHP;AAIA,SACIC,gBADJ,QAEO,iBAFP;AAGA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,mBAAP,MAAgC,yBAAhC;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAO,0BAAP;AACA,SACIC,gBADJ,QAEO,uBAFP;AAGA,IAAIC,uBAAuB,GAAG,oBAA9B;AACA,IAAIC,eAAe,GAAG,cAAtB;AACA,IAAIC,qBAAqB,GAAG,oBAA5B;AACA,IAAIC,yBAAyB,GAAG,wBAAhC;AACA,IAAIC,6BAA6B,GAAG,4BAApC;AACA,IAAIC,SAAS,GAAGP,YAAY,CAACQ,OAAb,CAAqB;EACjCC,cAAc,EAAE,YAAW;IACvB,IAAIC,IAAI,GAAG,IAAX;IACA,IAAIC,MAAM,GAAG,KAAKC,QAAL,EAAb;;IACA,IAAIC,cAAc,GAAG,UAASC,CAAT,EAAY;MAC7B,IAAIC,UAAU,GAAG,KAAKC,WAAL,EAAjB;;MACA,IAAI,CAACD,UAAL,EAAiB;QACb,IAAI,KAAKE,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;UAChCH,CAAC,CAACI,cAAF;UACA,KAAKC,KAAL;QACH;MACJ,CALD,MAKO,IAAI,KAAKC,iBAAL,EAAJ,EAA8B;QACjC,KAAKC,iBAAL,GAAyB,IAAzB;MACH;;MACD,KAAKC,qBAAL,GAA6BR,CAA7B;MACA,KAAKS,oBAAL,GAA4B,IAA5B;IACH,CAZD;;IAaA,IAAIC,cAAc,GAAG,YAAW;MAC5B,IAAId,IAAI,CAACO,MAAL,CAAY,eAAZ,KAAgCP,IAAI,CAACU,iBAAL,EAApC,EAA8D;QAC1DV,IAAI,CAACe,cAAL;MACH;IACJ,CAJD;;IAKA,OAAOlC,MAAM,CAAC,EAAD,EAAKoB,MAAL,EAAa;MACtBe,GAAG,EAAE,YAAW;QACZ,IAAI,KAAKT,MAAL,CAAY,QAAZ,KAAyB,gBAAgB,KAAKA,MAAL,CAAY,gBAAZ,CAA7C,EAA4E;UACxE,KAAKU,mBAAL,CAAyB,IAAzB;QACH;;QACDhB,MAAM,CAACe,GAAP,IAAcf,MAAM,CAACe,GAAP,CAAWE,KAAX,CAAiB,IAAjB,EAAuBC,SAAvB,CAAd;;QACA,KAAKC,mBAAL;MACH,CAPqB;MAQtBC,OAAO,EAAE,UAASjB,CAAT,EAAY;QACjB,IAAIH,MAAM,CAACoB,OAAP,IAAkBpB,MAAM,CAACoB,OAAP,CAAeH,KAAf,CAAqB,IAArB,EAA2BC,SAA3B,CAAtB,EAA6D;UACzD,IAAI,CAAC,KAAKZ,MAAL,CAAY,QAAZ,CAAL,EAA4B;YACxB,KAAKe,aAAL,CAAmBlB,CAAnB;UACH;;UACD,OAAO,IAAP;QACH;MACJ,CAfqB;MAgBtBmB,SAAS,EAAE,UAASnB,CAAT,EAAY;QACnB,IAAIH,MAAM,CAACsB,SAAP,IAAoBtB,MAAM,CAACsB,SAAP,CAAiBL,KAAjB,CAAuB,IAAvB,EAA6BC,SAA7B,CAAxB,EAAiE;UAC7D,IAAI,CAAC,KAAKZ,MAAL,CAAY,QAAZ,CAAL,EAA4B;YACxB,KAAKe,aAAL,CAAmBlB,CAAnB;UACH;;UACD,OAAO,IAAP;QACH;MACJ,CAvBqB;MAwBtBoB,SAAS,EAAE,YAAW;QAClBV,cAAc;QACdb,MAAM,CAACuB,SAAP,IAAoBvB,MAAM,CAACuB,SAAP,CAAiBN,KAAjB,CAAuB,IAAvB,EAA6BC,SAA7B,CAApB;MACH,CA3BqB;MA4BtBM,UAAU,EAAE,YAAW;QACnBX,cAAc;QACdb,MAAM,CAACwB,UAAP,IAAqBxB,MAAM,CAACwB,UAAP,CAAkBP,KAAlB,CAAwB,IAAxB,EAA8BC,SAA9B,CAArB;MACH,CA/BqB;MAgCtBO,IAAI,EAAE,YAAW;QACbZ,cAAc;QACdb,MAAM,CAACyB,IAAP,IAAezB,MAAM,CAACyB,IAAP,CAAYR,KAAZ,CAAkB,IAAlB,EAAwBC,SAAxB,CAAf;MACH,CAnCqB;MAoCtBQ,GAAG,EAAE,YAAW;QACZb,cAAc;QACdb,MAAM,CAAC0B,GAAP,IAAc1B,MAAM,CAAC0B,GAAP,CAAWT,KAAX,CAAiB,IAAjB,EAAuBC,SAAvB,CAAd;MACH,CAvCqB;MAwCtBS,MAAM,EAAE,YAAW;QACf,IAAIC,MAAM,GAAG5B,MAAM,CAAC2B,MAAP,IAAiB3B,MAAM,CAAC2B,MAAP,CAAcV,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAA9B;;QACA,KAAKW,cAAL;;QACA,OAAO,SAASD,MAAT,IAAmB,KAAK,CAAL,KAAWA,MAA9B,GAAuCA,MAAvC,GAAgD,IAAvD;MACH,CA5CqB;MA6CtBE,KAAK,EAAE,UAAS3B,CAAT,EAAY;QACf,IAAI4B,QAAQ,GAAG,KAAKzB,MAAL,CAAY,QAAZ,CAAf;;QACA,IAAI0B,SAAS,GAAG,KAAKC,MAAL,GAAcC,GAAd,GAAoBC,IAApB,EAAhB;;QACA,IAAIC,YAAY,GAAGJ,SAAS,IAAI,KAAKK,KAAlB,IAA2B,CAAC,KAAKA,KAAL,CAAW/B,MAAX,CAAkB,gBAAlB,CAA/C;;QACA,IAAI,CAAC0B,SAAD,IAActD,SAAS,CAAC,KAAK4B,MAAL,CAAY,OAAZ,CAAD,CAAvB,IAAiD,KAAKA,MAAL,CAAY,eAAZ,CAArD,EAAmF;UAC/E,KAAKgC,qBAAL,CAA2BnC,CAA3B;;UACA,KAAKG,MAAL,CAAY;YACRiC,YAAY,EAAE,IADN;YAERC,KAAK,EAAE;UAFC,CAAZ;UAIA,KAAKC,KAAL;QACH,CAPD,MAOO;UACH,IAAI,KAAKnC,MAAL,CAAY,mBAAZ,CAAJ,EAAsC;YAClCH,CAAC,CAACI,cAAF;;YACA,IAAI6B,YAAJ,EAAkB;cACd,IAAIL,QAAJ,EAAc;gBACV,KAAKW,gBAAL;cACH;;cACD,KAAKC,wBAAL,CAA8BxC,CAA9B;YACH;;YACD,OAAO4B,QAAP;UACH;;UACD,IAAI/B,MAAM,CAAC8B,KAAP,IAAgB9B,MAAM,CAAC8B,KAAP,CAAab,KAAb,CAAmB,IAAnB,EAAyBC,SAAzB,CAApB,EAAyD;YACrD,OAAOa,QAAP;UACH;QACJ;MACJ,CAvEqB;MAwEtBa,KAAK,EAAE,UAASzC,CAAT,EAAY;QACf,IAAI4B,QAAQ,GAAG,KAAKzB,MAAL,CAAY,QAAZ,CAAf;QACA,IAAIuC,eAAe,GAAG,KAAKvC,MAAL,CAAY,eAAZ,CAAtB;QACA,IAAIwC,iBAAiB,GAAG,KAAKxC,MAAL,CAAY,mBAAZ,CAAxB;;QACA,IAAI,CAACyB,QAAD,IAAac,eAAb,IAAgCC,iBAApC,EAAuD;UACnD;QACH;;QACD3C,CAAC,CAACI,cAAF;;QACA,KAAKoC,wBAAL,CAA8BxC,CAA9B;;QACA,OAAO,IAAP;MACH,CAlFqB;MAmFtB4C,SAAS,EAAE7C,cAnFW;MAoFtB8C,GAAG,EAAE9C;IApFiB,CAAb,CAAb;EAsFH,CA5GgC;EA6GjC+C,kBAAkB,EAAE,YAAW;IAC3B,OAAOrE,MAAM,CAAC,KAAKqB,QAAL,EAAD,EAAkB;MAC3BiD,WAAW,EAAE/D,mBAAmB,CAACgE,MAApB,CAA2B,QAA3B,CADc;MAE3BC,aAAa,EAAE,IAFY;MAG3BC,qBAAqB,EAAE,QAHI;MAI3BC,gBAAgB,EAAE,QAJS;MAK3BR,iBAAiB,EAAE,KALQ;MAM3BS,oBAAoB,EAAE,UAASpD,CAAT,EAAY;QAC9B,IAAI,CAACzB,SAAS,CAACyB,CAAC,CAACqD,UAAH,CAAd,EAA8B;UAC1BrD,CAAC,CAACqD,UAAF,GAAerD,CAAC,CAACsD,IAAjB;QACH;MACJ,CAV0B;MAW3BC,qBAAqB,EAAE,KAXI;MAY3BC,aAAa,EAAE,IAZY;MAa3BC,cAAc,EAAE,KAbW;MAc3BC,gBAAgB,EAAE,IAdS;MAe3BC,kBAAkB,EAAE,IAfO;MAgB3BC,kBAAkB,EAAE,KAhBO;MAiB3BC,sBAAsB,EAAE;IAjBG,CAAlB,CAAb;EAmBH,CAjIgC;EAkIjCC,KAAK,EAAE,YAAW;IACd,KAAKhE,QAAL;;IACA,KAAKiE,6BAAL;EACH,CArIgC;EAsIjCC,WAAW,EAAE,YAAW;IACpB,KAAKC,QAAL,GAAgBC,QAAhB,CAAyB7E,eAAzB;;IACA,KAAK8E,cAAL;;IACA,KAAKrE,QAAL;;IACA,KAAKsE,WAAL,CAAiBF,QAAjB,CAA0B3E,yBAA1B;EACH,CA3IgC;EA4IjC8E,YAAY,EAAE,YAAW;IACrB,KAAKvE,QAAL;;IACA,KAAKwE,MAAL,CAAYL,QAAZ,GAAuBC,QAAvB,CAAgC5E,qBAAhC;;IACA,KAAKgF,MAAL,CAAYC,eAAZ,GAA8BC,IAA9B,CAAmC,UAAnC,EAA+C,CAAC,CAAhD;EACH,CAhJgC;EAiJjCC,kBAAkB,EAAE,YAAW;IAC3B,OAAO,KAAK3E,QAAL,KAAkB,GAAlB,GAAwBN,6BAA/B;EACH,CAnJgC;;EAoJjCkF,qBAAqB,GAAG;IACpB,KAAK5E,QAAL;IACArB,MAAM,CAAC,KAAKkG,kBAAN,EAA0B;MAC5BxB,gBAAgB,EAAE;QACdyB,KAAK,EAAE,MADO;QAEdC,KAAK,EAAE;MAFO;IADU,CAA1B,CAAN;EAMH,CA5JgC;;EA6JjCnD,cAAc,EAAE,YAAW;IACvB,IAAI,CAAC,KAAKvB,MAAL,CAAY,eAAZ,CAAD,IAAiC,KAAK+B,KAA1C,EAAiD;MAC7C,KAAK4C,iBAAL,CAAuB,IAAvB;;MACA,KAAKC,YAAL,CAAkB,KAAK5E,MAAL,CAAY,cAAZ,CAAlB;IACH;EACJ,CAlKgC;EAmKjC6E,kBAAkB,EAAE,YAAW;IAC3B,KAAKlF,QAAL;;IACA,IAAI,KAAKK,MAAL,CAAY,QAAZ,CAAJ,EAA2B;MACvB,KAAK8E,qBAAL;;MACA,KAAKC,qBAAL;IACH;EACJ,CAzKgC;EA0KjCA,qBAAqB,EAAE,YAAW;IAC9B,IAAIC,cAAJ;;IACA,IAAIC,WAAW,GAAG,KAAKC,YAAL,EAAlB;;IACA,IAAI,CAACD,WAAL,EAAkB;MACd,KAAKN,iBAAL,CAAuB,IAAvB;;MACA;IACH;;IACD,IAAI;MACAQ,KAAK,EAAEA,KADP;MAEAlD,YAAY,EAAEA;IAFd,IAGA,KAAKjC,MAAL,EAHJ;;IAIA,IAAIoF,UAAU,GAAG,KAAKrD,KAAL,CAAWsD,aAAX,EAAjB;;IACA,IAAIC,KAAK,GAAG,UAAUN,cAAc,GAAG,SAASG,KAAT,IAAkB,KAAK,CAAL,KAAWA,KAA7B,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACI,OAAN,CAActD,YAAd,CAAzE,KAAyG,KAAK,CAAL,KAAW+C,cAApH,GAAqIA,cAArI,GAAsJ,CAAC,CAAnK;IACA,IAAIQ,cAAc,GAAG,CAAC,CAAD,KAAOF,KAAP,IAAgB,CAAC,KAAKG,qBAAL,EAAjB,GAAgDL,UAAU,CAACM,EAAX,CAAcJ,KAAd,CAAhD,GAAuE,IAA5F;;IACA,KAAKX,iBAAL,CAAuBa,cAAvB;EACH,CAzLgC;EA0LjCG,qBAAqB,EAAE,YAAW;IAC9B,IAAI,CAAC,KAAK5D,KAAV,EAAiB;MACb;IACH;;IACD,IAAIkD,WAAW,GAAG,KAAKC,YAAL,EAAlB;;IACA,IAAI,CAACD,WAAD,IAAgB,KAAKjF,MAAL,CAAY,mBAAZ,CAApB,EAAsD;MAClD,KAAK2E,iBAAL,CAAuB,IAAvB;;MACA;IACH;;IACD,IAAIS,UAAU,GAAG,KAAKrD,KAAL,CAAWsD,aAAX,EAAjB;;IACA,IAAIG,cAAc,GAAGJ,UAAU,CAACQ,GAAX,CAAe3G,uBAAf,EAAwCyG,EAAxC,CAA2C,CAA3C,CAArB;;IACA,KAAKf,iBAAL,CAAuBa,cAAvB;EACH,CAtMgC;EAuMjCb,iBAAiB,EAAE,UAASkB,OAAT,EAAkB;IACjC,KAAKC,wBAAL,GAAgC,IAAhC;;IACA,KAAK/D,KAAL,CAAW/B,MAAX,CAAkB,gBAAlB,EAAoCtB,gBAAgB,CAACmH,OAAD,CAApD;;IACA,OAAO,KAAKC,wBAAZ;EACH,CA3MgC;EA4MjChB,qBAAqB,EAAE,YAAW;IAC9B,KAAK/C,KAAL,IAAc,KAAKA,KAAL,CAAWgE,YAAX,CAAwB,KAAKhE,KAAL,CAAW/B,MAAX,CAAkB,cAAlB,CAAxB,CAAd;EACH,CA9MgC;EA+MjCgG,wBAAwB,EAAE,YAAW;IACjC,KAAKrG,QAAL;;IACA,IAAIsG,UAAU,GAAG,KAAKC,eAAL,CAAqBC,QAArB,EAAjB;;IACA,IAAIF,UAAU,IAAI,KAAKG,iBAAL,EAAlB,EAA4C;MACxC;IACH;;IACD,KAAKtB,qBAAL;EACH,CAtNgC;EAuNjCuB,YAAY,EAAE,YAAW;IACrB,KAAKC,iBAAL;;IACA,KAAKC,eAAL;;IACA,OAAQ,IAAI/H,QAAJ,EAAD,CAAegI,OAAf,EAAP;EACH,CA3NgC;EA4NjCF,iBAAiB,EAAE,YAAW;IAC1B,OAAO,KAAK3G,QAAL,GAAgB8G,MAAhB,CAAuB,YAAW;MACrC,KAAKC,sBAAL;IACH,CAF6B,CAE5BC,IAF4B,CAEvB,IAFuB,CAAvB,CAAP;EAGH,CAhOgC;EAiOjCD,sBAAsB,EAAE,YAAW;IAC/B,KAAK1C,cAAL;;IACA,KAAK4C,qBAAL,GAA6BH,MAA7B,CAAoC,YAAW;MAC3C,KAAKI,gBAAL;IACH,CAFmC,CAElCF,IAFkC,CAE7B,IAF6B,CAApC;EAGH,CAtOgC;EAuOjCC,qBAAqB,EAAE,YAAW;IAC9B,KAAKE,YAAL;;IACA,OAAQ,IAAItI,QAAJ,EAAD,CAAegI,OAAf,EAAP;EACH,CA1OgC;EA2OjCO,YAAY,EAAE,UAASC,IAAT,EAAe;IACzB,IAAIC,IAAI,GAAG,KAAKC,aAAL,CAAmBF,IAAnB,CAAX;;IACA,IAAI9E,KAAK,GAAG,KAAKiF,YAAL,CAAkBF,IAAlB,CAAZ;;IACA,KAAKG,SAAL,CAAelF,KAAf;EACH,CA/OgC;EAgPjCnB,aAAa,EAAE,UAASlB,CAAT,EAAY;IACvB,IAAIwH,kBAAkB,GAAG,KAAKnB,eAAL,CAAqBoB,QAArB,KAAmC,IAAI9I,QAAJ,EAAD,CAAegI,OAAf,EAAlC,GAA6D,KAAKN,eAAL,CAAqBqB,IAArB,EAAtF;IACAF,kBAAkB,CAACG,IAAnB,CAAwB,YAAW;MAC/B,IAAIC,aAAa,GAAG,KAAKC,iBAAL,EAApB;;MACA,IAAIC,QAAQ,GAAG,KAAKzB,eAAL,CAAqB0B,QAArB,EAAf;;MACA,IAAIC,UAAU,GAAG,KAAK3B,eAAL,CAAqB2B,UAArB,EAAjB;;MACA,IAAIC,UAAU,GAAGL,aAAa,KAAK,KAAKM,MAAL,GAAcC,MAAd,GAAuB,CAA1D;;MACA,KAAKhG,qBAAL,CAA2BnC,CAA3B;;MACA,IAAImH,IAAI,GAAG,gBAAgBhI,gBAAgB,CAACa,CAAD,CAAhC,GAAsC,CAAtC,GAA0C,CAAC,CAAtD;;MACA,IAAI8H,QAAQ,IAAI,CAACE,UAAb,IAA2BC,UAA3B,IAAyCd,IAAI,GAAG,CAApD,EAAuD;QACnD,IAAI,CAAC,KAAK7C,MAAV,EAAkB;UACd,KAAKD,YAAL;QACH;;QACD,IAAI,CAAC,KAAKgC,eAAL,CAAqB+B,SAArB,EAAL,EAAuC;UACnC,KAAKlG,KAAL,CAAWmG,aAAX,GAA2BV,IAA3B,CAAgC,KAAKT,YAAL,CAAkBJ,IAAlB,CAAuB,IAAvB,EAA6BK,IAA7B,CAAhC;QACH;MACJ,CAPD,MAOO;QACH,KAAKD,YAAL,CAAkBC,IAAlB;MACH;IACJ,CAjBuB,CAiBtBL,IAjBsB,CAiBjB,IAjBiB,CAAxB;EAkBH,CApQgC;EAqQjCwB,gBAAgB,EAAE,UAASlB,IAAT,EAAe;IAC7B,IAAImB,aAAa,GAAG,CAAC,KAAKC,qBAAL,EAAD,IAAiC,KAAK,CAAL,KAAWpB,IAAhE;IACA,KAAKtH,QAAL,CAAcyI,aAAa,GAAG,IAAH,GAAUnB,IAArC;;IACA,IAAI,CAACmB,aAAD,KAAmB,CAAC,KAAKrI,WAAL,EAAD,IAAuB,KAAK0F,qBAAL,EAA1C,CAAJ,EAA6E;MACzE,KAAK6C,cAAL,CAAoB,cAApB,EAAoC,KAAKtI,MAAL,CAAY,cAAZ,CAApC;IACH;EACJ,CA3QgC;EA4QjCqI,qBAAqB,EAAE,YAAW;IAC9B,OAAO,KAAKrI,MAAL,CAAY,mBAAZ,KAAoC,KAAKL,QAAL,EAA3C;EACH,CA9QgC;EA+QjC4I,aAAa,EAAE,UAAStB,IAAT,EAAe;IAC1BA,IAAI,GAAG,CAAC7I,SAAS,CAAC6I,IAAD,CAAV,IAAoB,KAAKoB,qBAAL,EAApB,GAAmD,KAAKrI,MAAL,CAAY,OAAZ,CAAnD,GAA0EiH,IAAjF;IACA,OAAO,KAAKtH,QAAL,CAAcsH,IAAd,CAAP;EACH,CAlRgC;EAmRjCuB,WAAW,EAAE,YAAW;IACpB,IAAIlH,MAAM,GAAGhD,MAAM,CAAC,KAAKqB,QAAL,EAAD,EAAkB;MACjC8I,YAAY,EAAE,cADmB;MAEjCC,kBAAkB,EAAE,KAAKC,0BAAL,EAFa;MAGjC1G,YAAY,EAAE,KAAKjC,MAAL,CAAY,cAAZ,CAHmB;MAIjC4I,oBAAoB,EAAE,KAAKC,6BAAL,CAAmClC,IAAnC,CAAwC,IAAxC;IAJW,CAAlB,CAAnB;;IAMA,IAAI,KAAK3G,MAAL,CAAY,uBAAZ,CAAJ,EAA0C;MACtC1B,MAAM,CAACgD,MAAD,EAAS;QACX8B,qBAAqB,EAAE,IADZ;QAEX0F,gBAAgB,EAAE;MAFP,CAAT,CAAN;IAIH;;IACD,OAAOxH,MAAP;EACH,CAjSgC;EAkSjCuH,6BAA6B,EAAE,UAAShJ,CAAT,EAAY;IACvC,IAAI,KAAKiG,wBAAT,EAAmC;MAC/B;IACH;;IACD,IAAIiD,IAAI,GAAGlJ,CAAC,CAACmJ,SAAb;IACA,IAAIxD,cAAc,GAAGvH,CAAC,CAAC8K,IAAI,CAAC/I,MAAL,CAAY,gBAAZ,CAAD,CAAtB;;IACA,IAAIiJ,WAAW,GAAGF,IAAI,CAACG,YAAL,CAAkB1D,cAAlB,CAAlB;;IACA,KAAKZ,YAAL,CAAkBqE,WAAlB;EACH,CA1SgC;EA2SjCrE,YAAY,EAAE,UAASqC,IAAT,EAAe;IACzB,IAAInE,aAAa,GAAG,KAAKqG,oBAAL,CAA0B,eAA1B,CAApB;;IACA,IAAI,EAAErG,aAAa,IAAI,KAAK9C,MAAL,CAAY,eAAZ,CAAnB,CAAJ,EAAsD;MAClD,IAAImD,IAAI,GAAG,KAAKiG,cAAL,CAAoBnC,IAApB,CAAX;;MACA,KAAKjH,MAAL,CAAY,MAAZ,EAAoBmD,IAApB;;MACA,KAAKkG,kBAAL,CAAwBlG,IAAxB;;MACA;IACH;;IACD,KAAK2D,YAAL;EACH,CApTgC;EAqTjC6B,0BAA0B,EAAE,YAAW;IACnC,OAAO,KAAK3I,MAAL,CAAY,uBAAZ,IAAuC,KAAKsJ,uBAAL,CAA6B3C,IAA7B,CAAkC,IAAlC,CAAvC,GAAiFzI,IAAxF;EACH,CAvTgC;EAwTjCoL,uBAAuB,EAAE,UAASzJ,CAAT,EAAY;IACjCtB,IAAI,CAACsB,CAAC,CAAC0J,UAAF,IAAgB,EAAjB,EAAqB,UAASC,CAAT,EAAYC,SAAZ,EAAuB;MAC5C,KAAKrC,SAAL,CAAe,KAAKD,YAAL,CAAkBsC,SAAlB,CAAf;IACH,CAFwB,CAEvB9C,IAFuB,CAElB,IAFkB,CAArB,CAAJ;EAGH,CA5TgC;EA6TjC+C,qBAAqB,EAAE,YAAW;IAC9B,OAAO,KAAKxD,eAAL,CAAqBjB,WAArB,EAAP;EACH,CA/TgC;EAgUjC7C,gBAAgB,EAAE,UAASuH,SAAT,EAAoB;IAClC,IAAI,KAAK3J,MAAL,CAAY,UAAZ,CAAJ,EAA6B;MACzB;IACH;;IACD2J,SAAS,GAAG/I,SAAS,CAACoH,MAAV,GAAmB2B,SAAnB,GAA+B,CAAC,KAAK3J,MAAL,CAAY,QAAZ,CAA5C;;IACA,IAAI,CAAC2J,SAAD,IAAc,CAAC,KAAKC,kBAAL,EAAnB,EAA8C;MAC1C,KAAKC,iBAAL,CAAuB,IAAvB;IACH;;IACD,IAAI,KAAKC,UAAL,MAAqBH,SAAzB,EAAoC;MAChC,KAAKG,UAAL,CAAgB,KAAhB;;MACA,IAAIC,mBAAmB,GAAG,KAAK/J,MAAL,CAAY,sBAAZ,KAAuC,KAAKgK,0BAAL,EAAjE;;MACA,IAAID,mBAAmB,IAAI,KAAK7D,eAAL,CAAqB+D,aAArB,EAA3B,EAAiE;QAC7D,IAAI,KAAKC,YAAT,EAAuB;UACnB;QACH;;QACD,IAAIjF,WAAW,GAAG,KAAKyE,qBAAL,EAAlB;;QACAzE,WAAW,IAAI,KAAK6E,UAAL,CAAgB,IAAhB,CAAf;;QACA,KAAKK,iBAAL,CAAuBlF,WAAW,IAAI,IAAtC;MACH,CAPD,MAOO;QACH,KAAKqD,cAAL,CAAoB,OAApB,EAA6B,EAA7B;MACH;IACJ;;IACD,IAAIqB,SAAJ,EAAe;MACX,KAAK7E,qBAAL;IACH;;IACD,KAAKnF,QAAL,CAAcgK,SAAd;EACH,CA1VgC;EA2VjC3F,cAAc,EAAE,YAAW;IACvB,IAAI,KAAKhE,MAAL,CAAY,gBAAZ,CAAJ,EAAmC;MAC/B,KAAK8D,QAAL,GAAgBO,IAAhB,CAAqB,OAArB,EAA8B,KAAKrE,MAAL,CAAY,cAAZ,CAA9B;IACH;EACJ,CA/VgC;EAgWjCoK,iBAAiB,EAAE,YAAW;IAC1B,KAAKzK,QAAL;;IACA,KAAK0K,iBAAL;;IACA,KAAKC,qBAAL;EACH,CApWgC;EAqWjCC,sBAAsB,EAAE,YAAW;IAC/B,IAAIC,mBAAmB,GAAG,KAAKxK,MAAL,CAAY,cAAZ,CAA1B;;IACA,IAAI,SAASwK,mBAAb,EAAkC;MAC9B,OAAO,KAAP;IACH;;IACD,IAAItI,KAAK,GAAG,KAAKkH,cAAL,CAAoBoB,mBAApB,CAAZ;;IACA,IAAIC,YAAY,GAAGvI,KAAK,GAAGwI,MAAM,CAACxI,KAAD,CAAT,GAAmB,EAA3C;;IACA,IAAIR,SAAS,GAAG,KAAKwD,YAAL,EAAhB;;IACA,OAAOuF,YAAY,KAAK/I,SAAxB;EACH,CA9WgC;EA+WjCiJ,mBAAmB,EAAE,YAAW;IAC5B,IAAI,KAAKJ,sBAAL,EAAJ,EAAmC;MAC/B,KAAKhJ,cAAL;IACH;;IACD,KAAK5B,QAAL;EACH,CApXgC;EAqXjCiL,mBAAmB,EAAE,YAAW;IAC5B,KAAKjL,QAAL;;IACA,IAAI,KAAKkL,mBAAL,EAAJ,EAAgC;MAC5B,KAAKf,UAAL,CAAgB,KAAhB;;MACA,KAAKgB,eAAL;;MACA,KAAKD,mBAAL,CAAyB,KAAzB;IACH;EACJ,CA5XgC;EA6XjChB,iBAAiB,EAAE,UAASkB,gBAAT,EAA2B;IAC1C,IAAI,KAAK/K,MAAL,CAAY,UAAZ,CAAJ,EAA6B;MACzB;IACH;;IACD,KAAKgL,iBAAL,IAA0B,KAAKA,iBAAL,CAAuBvE,MAAvB,CAA8B,YAAW;MAC/D,IAAI;QACAjE,iBAAiB,EAAEA,iBADnB;QAEAW,IAAI,EAAEA,IAFN;QAGAlB,YAAY,EAAEuI;MAHd,IAIA,KAAKxK,MAAL,EAJJ;;MAKA,IAAIwC,iBAAJ,EAAuB;QACnB,IAAI,CAACuI,gBAAD,IAAqB,CAAC,KAAKE,gBAA/B,EAAiD;UAC7C,KAAKrG,YAAL,CAAkB,SAAS4F,mBAAT,IAAgC,KAAK,CAAL,KAAWA,mBAA3C,GAAiEA,mBAAjE,GAAuF,KAAKU,iBAAL,CAAuB/H,IAAvB,CAAzG;;UACA,KAAKgI,YAAL;QACH;;QACD;MACH;;MACD,IAAI,KAAKnL,MAAL,CAAY,eAAZ,CAAJ,EAAkC;QAC9B,IAAI,CAAC,KAAKkF,YAAL,EAAD,IAAwB,KAAKlF,MAAL,CAAY,eAAZ,CAA5B,EAA0D;UACtD,KAAKoL,eAAL;;UACA;QACH;MACJ;;MACD,IAAI,KAAKb,sBAAL,EAAJ,EAAmC;QAC/B;MACH;;MACD,KAAKjE,iBAAL,GAAyBG,MAAzB,CAAgC,UAASxE,YAAT,EAAuB;QACnD,IAAIoJ,eAAe,GAAGlN,aAAa,CAAC8D,YAAD,EAAeuI,mBAAf,CAAnC;;QACA,KAAKrC,gBAAL,CAAsBkD,eAAtB;;QACA,KAAKzG,YAAL,CAAkByG,eAAlB;;QACA,KAAKF,YAAL;MACH,CAL+B,CAK9BxE,IAL8B,CAKzB,IALyB,CAAhC;IAMH,CA5BuD,CA4BtDA,IA5BsD,CA4BjD,IA5BiD,CAA9B,CAA1B;EA6BH,CA9ZgC;EA+ZjC2E,6BAA6B,EAAE,YAAW;IACtC,IAAItI,gBAAgB,GAAG,KAAKhD,MAAL,CAAY,KAAKuL,8BAAL,EAAZ,CAAvB;IACA,OAAOvI,gBAAgB,CAACwI,QAAjB,CAA0B,MAA1B,CAAP;EACH,CAlagC;EAmajCC,yBAAyB,EAAE,UAAS5L,CAAT,EAAY;IACnC,OAAO,KAAK6L,wBAAL,CAA8B7L,CAA9B,KAAoC,KAAKyL,6BAAL,EAA3C;EACH,CAragC;EAsajCK,gBAAgB,EAAE,UAAS9L,CAAT,EAAY;IAC1B,IAAI,CAAC,KAAK4L,yBAAL,CAA+B5L,CAA/B,CAAL,EAAwC;MACpC,IAAI+L,eAAe,GAAG,KAAKC,sBAAL,CAA4BhM,CAAC,CAACiM,aAA9B,CAAtB;;MACA,IAAI,CAACF,eAAL,EAAsB;QAClB,KAAK/B,iBAAL;;QACA,KAAKkC,iBAAL;MACH;;MACD,KAAKlL,mBAAL,CAAyBhB,CAAzB;IACH;;IACDA,CAAC,CAACmM,MAAF,GAAW,KAAKrK,MAAL,GAAcsK,GAAd,CAAkB,CAAlB,CAAX;IACA,KAAKtM,QAAL,CAAcE,CAAd;EACH,CAjbgC;EAkbjCgB,mBAAmB,EAAE,UAAShB,CAAT,EAAY;IAC7B,IAAI;MACAqM,aAAa,EAAEA;IADf,IAEA,KAAKlM,MAAL,EAFJ;;IAGA,IAAI4L,eAAe,GAAG,KAAKC,sBAAL,CAA4B,SAAShM,CAAT,IAAc,KAAK,CAAL,KAAWA,CAAzB,GAA6B,KAAK,CAAlC,GAAsCA,CAAC,CAACiM,aAApE,CAAtB;;IACA,IAAIK,kBAAkB,GAAG,KAAKrC,UAAL,MAAqBoC,aAArB,IAAsC,CAACN,eAAhE;;IACA,IAAIO,kBAAJ,EAAwB;MACpB,IAAIC,YAAJ;;MACA,IAAIC,cAAc,GAAG,UAAUD,YAAY,GAAG,KAAKjI,MAA9B,KAAyC,KAAK,CAAL,KAAWiI,YAApD,GAAmE,KAAK,CAAxE,GAA4EA,YAAY,CAACE,wBAA9G;;MACA,KAAKP,iBAAL;;MACA,IAAIM,cAAJ,EAAoB;QAChB,KAAKxB,mBAAL,CAAyB,IAAzB;MACH,CAFD,MAEO;QACH,KAAKf,UAAL,CAAgB,KAAhB;;QACA,KAAKgB,eAAL;MACH;IACJ;EACJ,CAncgC;EAocjCD,mBAAmB,EAAE,UAAS3I,KAAT,EAAgB;IACjC,IAAI,CAACtB,SAAS,CAACoH,MAAf,EAAuB;MACnB,OAAO,KAAKuE,wBAAZ;IACH;;IACD,KAAKA,wBAAL,GAAgCrK,KAAhC;EACH,CAzcgC;EA0cjC2J,sBAAsB,EAAE,UAASG,MAAT,EAAiB;IACrC,OAAO,CAAC,CAAC/N,CAAC,CAAC+N,MAAD,CAAD,CAAUQ,OAAV,CAAkB,IAAIC,MAAJ,CAAWpN,6BAAX,CAAlB,EAA6D2I,MAAtE;EACH,CA5cgC;EA6cjCoD,eAAe,EAAE,YAAW;IACxB,IAAI,KAAKpL,MAAL,CAAY,cAAZ,CAAJ,EAAiC;MAC7B,IAAI,KAAKK,qBAAT,EAAgC;QAC5B,KAAK2B,qBAAL,CAA2B,KAAK3B,qBAAhC;MACH;;MACD,KAAKL,MAAL,CAAY,OAAZ,EAAqB,IAArB;IACH;;IACD,OAAO,KAAKK,qBAAZ;EACH,CArdgC;EAsdjCqM,gBAAgB,EAAE,YAAW;IACzB,OAAO,KAAKC,yBAAL,MAAoC,KAAK7C,UAAL,EAA3C;EACH,CAxdgC;EAydjC8C,UAAU,EAAE,YAAW;IACnB,IAAIC,aAAa,GAAGjO,UAAU,CAACkO,gBAAX,CAA4B,KAAKjH,OAAL,EAA5B,CAApB;IACA,OAAO,KAAKlG,QAAL,MAAmB1B,CAAC,CAAC4O,aAAD,CAAD,CAAiBL,OAAjB,CAAyB,KAAK7K,MAAL,EAAzB,EAAwCqG,MAAxC,GAAiD,CAA3E;EACH,CA5dgC;EA6djCuD,8BAA8B,EAAE,YAAW;IACvC,OAAO,uBAAP;EACH,CA/dgC;EAgejCwB,uBAAuB,EAAE,YAAW;IAChC,IAAI,KAAKhN,WAAL,EAAJ,EAAwB;MACpB,KAAKJ,QAAL;IACH;EACJ,CApegC;EAqejCqN,gBAAgB,EAAE,YAAW;IACzB,IAAIC,YAAY,GAAG,KAAKlL,KAAL,IAAc,KAAK/B,MAAL,CAAY,QAAZ,CAAd,IAAuC/B,CAAC,CAAC,KAAK8D,KAAL,CAAW/B,MAAX,CAAkB,gBAAlB,CAAD,CAA3D;;IACA,IAAIiN,YAAY,IAAIA,YAAY,CAACjF,MAAjC,EAAyC;MACrC,OAAO,KAAKjG,KAAL,CAAWmH,YAAX,CAAwB+D,YAAxB,CAAP;IACH;;IACD,OAAO,KAAKjN,MAAL,CAAY,cAAZ,CAAP;EACH,CA3egC;EA4ejCkN,gBAAgB,EAAE,UAAShL,KAAT,EAAgB;IAC9B,OAAO,KAAKiL,cAAL,CAAoBjL,KAApB,EAA2B,KAAKlC,MAAL,CAAY,OAAZ,CAA3B,CAAP;EACH,CA9egC;EA+ejCoN,uBAAuB,EAAE,YAAW;IAChC,OAAO,EAAE,KAAKpN,MAAL,CAAY,uBAAZ,KAAwC,aAAa,KAAKA,MAAL,CAAY,eAAZ,CAAvD,CAAP;EACH,CAjfgC;EAkfjCqN,qBAAqB,EAAE,UAASxN,CAAT,EAAY;IAC/B,IAAIyN,aAAa,GAAG,KAAKC,gBAAL,EAApB;;IACA,KAAK5I,iBAAL,CAAuB1G,CAAC,CAAC4B,CAAC,CAAC2N,WAAH,CAAxB;;IACA,KAAKxL,qBAAL,CAA2BnC,CAAC,CAAC4N,KAA7B;;IACA,KAAKC,kBAAL,CAAwB,KAAKvG,YAAL,CAAkBtH,CAAC,CAAC8N,QAApB,CAAxB;;IACA,IAAI,KAAKP,uBAAL,EAAJ,EAAoC;MAChC,KAAKpN,MAAL,CAAY,QAAZ,EAAsB,KAAtB;IACH;;IACD,IAAI,KAAKA,MAAL,CAAY,eAAZ,KAAgCsN,aAAa,KAAK,KAAKnG,YAAL,CAAkBtH,CAAC,CAAC8N,QAApB,CAAtD,EAAqF;MACjF,KAAK/I,YAAL,CAAkB/E,CAAC,CAAC8N,QAApB;IACH;;IACD,IAAI,KAAK/D,kBAAL,EAAJ,EAA+B;MAC3B,KAAK/I,mBAAL;IACH;EACJ,CAhgBgC;EAigBjC+I,kBAAkB,EAAE,YAAW;IAC3B,OAAO,KAAKE,UAAL,EAAP;EACH,CAngBgC;EAogBjC4D,kBAAkB,EAAE,UAASxL,KAAT,EAAgB;IAChC,KAAKkF,SAAL,CAAelF,KAAf;EACH,CAtgBgC;EAugBjC0L,SAAS,EAAE,UAAS1L,KAAT,EAAgB2L,KAAhB,EAAuB;IAC9B,IAAIpO,IAAI,GAAG,IAAX;IACA,IAAIqO,QAAQ,GAAG,IAAItP,QAAJ,EAAf;IACA,KAAKmB,QAAL,CAAcuC,KAAd,EAAqB2L,KAArB,EAA4BrG,IAA5B,CAAiC,UAASP,IAAT,EAAe;MAC5C6G,QAAQ,CAACtH,OAAT,CAAiBS,IAAjB;IACH,CAFgC,CAE/BN,IAF+B,CAE1B,IAF0B,CAAjC,EAEcoH,IAFd,CAEmB,UAASC,IAAT,EAAe;MAC9B,IAAI,SAASA,IAAT,IAAiB,KAAK,CAAL,KAAWA,IAA5B,IAAoCA,IAAI,CAACC,kBAA7C,EAAiE;QAC7D;MACH;;MACD,IAAIhM,YAAY,GAAGxC,IAAI,CAACO,MAAL,CAAY,cAAZ,CAAnB;;MACA,IAAIP,IAAI,CAACO,MAAL,CAAY,mBAAZ,KAAoCkC,KAAK,KAAKzC,IAAI,CAAC0H,YAAL,CAAkBlF,YAAlB,CAAlD,EAAmF;QAC/E6L,QAAQ,CAACtH,OAAT,CAAiBvE,YAAjB;MACH,CAFD,MAEO;QACH6L,QAAQ,CAACI,MAAT;MACH;IACJ,CAVkB,CAUjBvH,IAViB,CAUZ,IAVY,CAFnB;IAaA,OAAOmH,QAAQ,CAACK,OAAT,EAAP;EACH,CAxhBgC;EAyhBjCC,eAAe,EAAE,UAASlM,KAAT,EAAgBmM,QAAhB,EAA0B;IACvC,KAAKrD,iBAAL,GAAyB,KAAK4C,SAAL,CAAe1L,KAAf,EAAsBuE,MAAtB,CAA6B4H,QAA7B,CAAzB;IACA,OAAO,KAAKrD,iBAAZ;EACH,CA5hBgC;EA6hBjCvF,qBAAqB,EAAE,YAAW;IAC9B,IAAIxD,YAAY,GAAG,KAAKjC,MAAL,CAAY,cAAZ,CAAnB;;IACA,IAAIiF,WAAW,GAAG,KAAKC,YAAL,EAAlB;;IACA,IAAIoJ,gBAAgB,GAAG,KAAKlF,cAAL,CAAoBnH,YAApB,CAAvB;;IACA,OAAO,CAACqM,gBAAD,IAAqBrJ,WAAW,KAAKqJ,gBAAgB,CAACC,QAAjB,EAA5C;EACH,CAliBgC;EAmiBjClM,wBAAwB,EAAE,UAASxC,CAAT,EAAY;IAClC,IAAI,KAAKG,MAAL,CAAY,mBAAZ,KAAoC,KAAKyF,qBAAL,EAApC,IAAoE,CAAC,KAAKwF,gBAA9E,EAAgG;MAC5F,KAAKA,gBAAL,GAAwB,IAAxB;;MACA,KAAKuD,uBAAL,CAA6B3O,CAA7B;IACH;EACJ,CAxiBgC;EAyiBjC+D,6BAA6B,EAAE,YAAW;IACtC,KAAK6K,yBAAL,GAAiC,KAAKC,qBAAL,CAA2B,sBAA3B,CAAjC;EACH,CA3iBgC;EA4iBjCxD,iBAAiB,EAAE,UAAS/H,IAAT,EAAe;IAC9B,IAAIwL,MAAM,GAAG;MACTxL,IAAI,EAAEA;IADG,CAAb;;IAGA,IAAIyL,YAAY,GAAG,KAAKH,yBAAL,CAA+BE,MAA/B,CAAnB;;IACA,IAAI1H,IAAI,GAAG9I,aAAa,CAACyQ,YAAD,EAAeD,MAAM,CAACzL,UAAtB,CAAxB;;IACA,IAAI9E,SAAS,CAACwQ,YAAD,CAAb,EAA6B;MACzBjQ,MAAM,CAACkQ,GAAP,CAAW,OAAX,EAAoB,sBAApB,EAA4C,YAA5C;IACH;;IACD,OAAO5H,IAAP;EACH,CAtjBgC;EAujBjCuH,uBAAuB,EAAE,UAAS3O,CAAT,EAAY;IACjC,IAAIoF,WAAW,GAAG,KAAKC,YAAL,EAAlB;;IACA,IAAI+B,IAAI,GAAG,KAAKiE,iBAAL,CAAuBjG,WAAvB,CAAX;;IACA,KAAKjD,qBAAL,CAA2BnC,CAA3B;;IACA,IAAI,KAAK,CAAL,KAAWoH,IAAf,EAAqB;MACjB,KAAKZ,YAAL;;MACA,MAAM1H,MAAM,CAACmQ,KAAP,CAAa,OAAb,CAAN;IACH;;IACD,IAAIzQ,SAAS,CAAC4I,IAAD,CAAb,EAAqB;MACjBxI,WAAW,CAACwI,IAAD,CAAX,CAAkBO,IAAlB,CAAuB,KAAKuH,cAAL,CAAoBpI,IAApB,CAAyB,IAAzB,CAAvB,EAAuDoH,IAAvD,CAA4D,KAAKgB,cAAL,CAAoBpI,IAApB,CAAyB,IAAzB,EAA+B,IAA/B,CAA5D;IACH,CAFD,MAEO;MACH,KAAKoI,cAAL,CAAoB9H,IAApB;IACH;EACJ,CApkBgC;EAqkBjC8H,cAAc,EAAE,UAAS9H,IAAT,EAAe;IAC3B,IAAI,KAAK+H,SAAT,EAAoB;MAChB;IACH;;IACD/H,IAAI,GAAGA,IAAI,IAAI,IAAf;IACA,KAAKjH,MAAL,CAAY,cAAZ,EAA4BiH,IAA5B;;IACA,KAAKpG,mBAAL;;IACA,KAAKuG,SAAL,CAAe,KAAKD,YAAL,CAAkBF,IAAlB,CAAf;;IACA,KAAKoC,kBAAL,CAAwB,KAAKD,cAAL,CAAoBnC,IAApB,CAAxB;;IACA,KAAKgE,gBAAL,GAAwB,KAAxB;EACH,CA/kBgC;EAglBjCgE,kBAAkB,EAAE,UAASpP,CAAT,EAAY;IAC5B,KAAKO,iBAAL,GAAyB,IAAzB;IACA,KAAKT,QAAL,CAAcE,CAAd;;IACA,KAAKiL,eAAL;;IACA,OAAO,KAAP;EACH,CArlBgC;EAslBjChB,UAAU,EAAE,UAAS5H,KAAT,EAAgB;IACxB,IAAI,CAACtB,SAAS,CAACoH,MAAf,EAAuB;MACnB,OAAO,CAAC,CAAC,KAAKkH,eAAd;IACH;;IACD,KAAKA,eAAL,GAAuBhN,KAAvB;EACH,CA3lBgC;EA4lBjC1B,cAAc,EAAE,YAAW;IACvB,IAAI,KAAKJ,iBAAT,EAA4B;MACxB,OAAO,KAAKA,iBAAZ;MACA;IACH;;IACD,IAAI,KAAKuM,yBAAL,EAAJ,EAAsC;MAClC,KAAK7C,UAAL,CAAgB,IAAhB;IACH;;IACD,KAAKnK,QAAL,CAAciB,SAAd;EACH,CArmBgC;EAsmBjCuO,mBAAmB,EAAE,UAASlK,WAAT,EAAsB;IACvC,KAAKtF,QAAL;;IACA,IAAI,SAASsF,WAAb,EAA0B;MACtB,KAAKmK,wBAAL;;MACA,KAAKzJ,qBAAL;IACH;EACJ,CA5mBgC;EA6mBjCxF,iBAAiB,EAAE,YAAW;IAC1B,IAAIkP,KAAK,GAAG,KAAK1N,MAAL,GAAcsK,GAAd,CAAkB,CAAlB,CAAZ;;IACA,IAAIqD,mBAAmB,GAAG,KAAKpK,YAAL,GAAoB8C,MAA9C;;IACA,IAAIuH,aAAa,GAAG,MAAMF,KAAK,CAACG,cAAZ,IAA8BH,KAAK,CAACI,YAAN,KAAuBH,mBAAzE;IACA,IAAII,iBAAiB,GAAGL,KAAK,CAACG,cAAN,KAAyBH,KAAK,CAACI,YAAvD;IACA,IAAIE,oBAAoB,GAAGL,mBAAmB,KAAKD,KAAK,CAACI,YAAzD;IACA,OAAO,KAAK3F,UAAL,MAAqB4F,iBAArB,IAA0C,CAACH,aAA3C,IAA4DI,oBAA5D,IAAoF,KAAKC,6BAAL,EAA3F;EACH,CApnBgC;EAqnBjCA,6BAA6B,EAAE,YAAW;IACtC,OAAO,CAAC,KAAKtP,oBAAN,IAA8B,KAAKN,MAAL,CAAY,eAAZ,CAA9B,IAA8D,CAAC,KAAKA,MAAL,CAAY,mBAAZ,CAA/D,IAAmG,iBAAiB,KAAKA,MAAL,CAAY,YAAZ,CAA3H;EACH,CAvnBgC;EAwnBjCoP,wBAAwB,EAAE,YAAW;IACjC,IAAI,CAAC,KAAKQ,6BAAL,EAAL,EAA2C;MACvC,OAAO,KAAKtP,oBAAZ;MACA;IACH;;IACD,IAAI2G,IAAI,GAAG,KAAKlF,KAAL,IAAc,KAAK8N,cAAL,CAAoB,KAAK9N,KAAL,CAAW/B,MAAX,CAAkB,OAAlB,CAApB,EAAgD,CAAhD,CAAzB;;IACA,IAAI,CAACiH,IAAL,EAAW;MACP;IACH;;IACD,IAAI6I,MAAM,GAAG,KAAKnO,MAAL,EAAb;;IACA,IAAIoO,WAAW,GAAGD,MAAM,CAAClO,GAAP,GAAaoG,MAA/B;;IACA,IAAI,MAAM+H,WAAV,EAAuB;MACnB;IACH;;IACD,IAAIC,YAAY,GAAGF,MAAM,CAAC7D,GAAP,CAAW,CAAX,CAAnB;;IACA,IAAIxB,YAAY,GAAG,KAAKrB,cAAL,CAAoBnC,IAApB,EAA0BsH,QAA1B,EAAnB;;IACAyB,YAAY,CAAC9N,KAAb,GAAqBuI,YAArB;;IACA,KAAKwF,MAAL,CAAY;MACRC,KAAK,EAAEH,WADC;MAER3O,GAAG,EAAEqJ,YAAY,CAACzC;IAFV,CAAZ;EAIH,CA7oBgC;EA8oBjCmI,QAAQ,EAAE,YAAW;IACjB,KAAKzJ,sBAAL,GAA8BxI,IAA9B;IACA,OAAO,KAAK8M,iBAAZ;IACA,KAAKrL,QAAL;EACH,CAlpBgC;EAmpBjCyQ,cAAc,EAAE,UAASpC,IAAT,EAAe;IAC3B,QAAQA,IAAI,CAACqC,IAAb;MACI,KAAK,uBAAL;QACI,KAAKC,wBAAL;;QACA,KAAKC,kBAAL;;QACA,KAAKC,cAAL;;QACA;;MACJ,KAAK,sBAAL;QACI,KAAK5M,6BAAL;;QACA;;MACJ,KAAK,gBAAL;QACI,KAAKI,cAAL;;QACA;;MACJ,KAAK,oBAAL;MACA,KAAK,mBAAL;MACA,KAAK,uBAAL;QACI,KAAKyM,WAAL;;QACA;;MACJ,KAAK,eAAL;QACI;;MACJ;QACI,KAAK9Q,QAAL,CAAcqO,IAAd;IApBR;EAsBH;AA1qBgC,CAArB,CAAhB;AA4qBAlP,iBAAiB,CAAC,aAAD,EAAgBQ,SAAhB,CAAjB;AACA,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}