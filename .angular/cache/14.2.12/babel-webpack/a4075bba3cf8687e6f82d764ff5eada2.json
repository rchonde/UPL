{"ast":null,"code":"/**\r\n * A collection of DOM-related functions.\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport { Disposer } from \"./Disposer\";\nimport { readFrame, writeFrame } from \"./AsyncPending\";\nimport { options } from \"../Options\";\nimport * as $object from \"./Object\";\nimport * as $array from \"./Array\";\nimport * as $type from \"./Type\";\n/**\r\n * SVG namespace.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport var SVGNS = \"http://www.w3.org/2000/svg\";\n/**\r\n * XML namespace.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport var XMLNS = \"http://www.w3.org/2000/xmlns/\";\n/**\r\n * XLINK namespace.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport var XLINK = \"http://www.w3.org/1999/xlink\";\n/**\r\n * Function that adds a disposable event listener directly to a DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param dom       A DOM element to add event to\r\n * @param type      Event type\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\n\nexport function addEventListener(dom, type, listener, options) {\n  //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\n  //console.log(type, dom);\n  dom.addEventListener(type, listener, options || false);\n  return new Disposer(function () {\n    dom.removeEventListener(type, listener, options || false);\n  });\n}\n/**\r\n * Finds and returns an element reference using following logic:\r\n * * If we pass in an element instance, we just return it back.\r\n * * If we pass in a string, the function looks for an element with such id.\r\n * * If no element with such id is found, we grab the first element with a tag name like this.\r\n *\r\n * @ignore Exclude from docs\r\n * @param el  Element definition (reference, or id, or tag name)\r\n * @return Element reference\r\n * @todo Review this function as it seems pretty fuzzy and hacky\r\n */\n\nexport function getElement(el) {\n  if ($type.isString(el)) {\n    var e = document.getElementById(el);\n\n    if (e == null) {\n      e = document.getElementsByClassName(el)[0];\n    }\n\n    if (e instanceof HTMLElement) {\n      return e;\n    }\n  } else if (el instanceof HTMLElement) {\n    return el;\n  }\n}\n/**\r\n * Adds a class name to an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\n\nexport function addClass(element, className) {\n  if (!element) {\n    return;\n  }\n\n  if (element.classList) {\n    var classes = className.split(\" \");\n    $array.each(classes, function (name) {\n      element.classList.add(name);\n    });\n  } else {\n    var currentClassName = element.getAttribute(\"class\");\n\n    if (currentClassName) {\n      element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\n        return item !== className;\n      }).join(\" \") + \" \" + className);\n    } else {\n      element.setAttribute(\"class\", className);\n    } //element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\") + \" \" + className;\n\n  }\n}\n/**\r\n * Removes a class name from an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\n\nexport function removeClass(element, className) {\n  if (!element) {\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var currentClassName = element.getAttribute(\"class\");\n\n    if (currentClassName) {\n      element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\n        return item !== className;\n      }).join(\" \"));\n    } //element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\");\n\n  }\n}\n/**\r\n * Sets style property on DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Still needed?\r\n */\n\nexport function setStyle(element, property, value) {\n  element.style[property] = value;\n}\n/**\r\n * Gets the computed style value for an element.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport function getComputedStyle(element, property) {\n  if (element.currentStyle) {\n    return element.currentStyle[property];\n  }\n\n  return document.defaultView.getComputedStyle(element, null).getPropertyValue(property);\n}\n/**\r\n * Removes focus from any element by shifting focus to body.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport function blur() {\n  if (document.activeElement && document.activeElement != document.body) {\n    if (document.activeElement.blur) {\n      document.activeElement.blur();\n    } else {\n      var input = document.createElement(\"button\");\n      input.style.position = \"fixed\";\n      input.style.top = \"0px\";\n      input.style.left = \"-10000px\";\n      document.body.appendChild(input);\n      input.focus();\n      input.blur();\n      document.body.removeChild(input);\n    }\n  }\n}\n/**\r\n * Tries to focus the element.\r\n *\r\n * @ignore Exlude from docs\r\n * @param element  Element to focus\r\n */\n\nexport function focus(element) {\n  if (element instanceof HTMLElement) {\n    element.focus();\n  } else {\n    var input = document.createElement(\"input\");\n    var fo = document.createElementNS(SVGNS, \"foreignObject\");\n    fo.appendChild(input);\n    element.appendChild(fo);\n    input.focus();\n    input.disabled = true;\n    fo.remove();\n  }\n  /*if ((<any>element).focus != undefined) {\r\n      (<any>element).focus();\r\n  }\r\n  else if (element instanceof SVGSVGElement) {\r\n      // Not implemented\r\n      // @todo implement focus fallback\r\n  }*/\n\n}\n/**\r\n * Returns markup for the element including the element tag itself.\r\n * SVG elements do not support `outerHTML` so this functions applies of\r\n * a workaround which creates a new temporary wrapper, clones element and uses\r\n * wrapper's `innerHTML`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element  Element to get full markup for\r\n * @return Markup\r\n * @deprecated Not in use anywhere\r\n */\n\nexport function outerHTML(element) {\n  if (element.outerHTML) {\n    return element.outerHTML;\n  } else {\n    var twrap = document.createElement(\"div\");\n    var tnode = element.cloneNode(true);\n    twrap.appendChild(tnode);\n    var content = twrap.innerHTML;\n    return content;\n  }\n}\n/**\r\n * Checks if element is a valid DOM node.\r\n *\r\n * @ignore Exclude from docs\r\n * @param el  Element\r\n * @return `true` if element is a valid DOM node\r\n */\n\nexport function isElement(el) {\n  return el instanceof Object && el && el.nodeType === 1;\n}\n/**\r\n * Checks of element `a` contains element `b`.\r\n *\r\n * @param a  Aleged ascendant\r\n * @param b  Aleged descendant\r\n * @return Contains?\r\n */\n\nexport function contains(a, b) {\n  var cursor = b;\n\n  while (true) {\n    if (a === cursor) {\n      return true;\n    } else if (cursor.parentNode == null) {\n      // TODO better ShadowRoot detection\n      if (cursor.host == null) {\n        return false;\n      } else {\n        cursor = cursor.host;\n      }\n    } else {\n      cursor = cursor.parentNode;\n    }\n  }\n}\n/**\r\n * Returns the shadow root of the element or null\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\n\nexport function getShadowRoot(a) {\n  var cursor = a;\n\n  while (true) {\n    if (cursor.parentNode == null) {\n      // TODO better ShadowRoot detection\n      if (cursor.host != null) {\n        return cursor;\n      } else {\n        return null;\n      }\n    } else {\n      cursor = cursor.parentNode;\n    }\n  }\n}\n/**\r\n * Returns the root of the element (either the Document or the ShadowRoot)\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\n\nexport function getRoot(a) {\n  // TODO replace with Node.prototype.getRootNode\n  var owner = a.ownerDocument;\n  var cursor = a;\n\n  while (true) {\n    if (cursor.parentNode == null) {\n      // If the cursor is the document, or it is a ShadowRoot\n      // TODO better ShadowRoot detection\n      if (cursor === owner || cursor.host != null) {\n        return cursor;\n      } else {\n        return null;\n      }\n    } else {\n      cursor = cursor.parentNode;\n    }\n  }\n}\n/**\r\n * Gets the true target of the Event.\r\n *\r\n * This is needed to make events work with the shadow DOM.\r\n *\r\n * @param event  Event\r\n * @return EventTarget\r\n */\n\nexport function eventTarget(event) {\n  if (typeof event.composedPath === \"function\") {\n    return event.composedPath()[0];\n  } else {\n    return event.target;\n  }\n}\n/**\r\n * Copies attributes from one element to another.\r\n *\r\n * @ignore Exclude from docs\r\n * @param source  Element to copy attributes from\r\n * @param target  Element to copy attributes to\r\n */\n\nexport function copyAttributes(source, target) {\n  $array.each(source.attributes, function (attr) {\n    // TODO what if it's null ?\n    if (attr.value != null) {\n      target.setAttribute(attr.name, attr.value);\n    }\n  });\n}\n/**\r\n * [fixPixelPerfect description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param el  Element\r\n */\n\nexport function fixPixelPerfect(el) {\n  readFrame(function () {\n    // sometimes IE doesn't like this\n    // TODO figure out a way to remove this\n    try {\n      var rect = el.getBoundingClientRect();\n      var left_1 = rect.left - Math.round(rect.left);\n      var top_1 = rect.top - Math.round(rect.top);\n\n      if (left_1 !== 0) {\n        writeFrame(function () {\n          el.style.left = left_1 + \"px\";\n        });\n      }\n\n      if (top_1 !== 0) {\n        writeFrame(function () {\n          el.style.top = top_1 + \"px\";\n        });\n      }\n    } catch (e) {}\n  });\n}\n/**\r\n * [rootStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nvar rootStylesheet;\n/**\r\n * [getStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @return [description]\r\n */\n\nfunction getStylesheet(element) {\n  if (element == null) {\n    if (!$type.hasValue(rootStylesheet)) {\n      // TODO use createElementNS ?\n      var e = document.createElement(\"style\");\n      e.type = \"text/css\";\n\n      if (options.nonce != \"\") {\n        e.setAttribute(\"nonce\", options.nonce);\n      }\n\n      document.head.appendChild(e);\n      rootStylesheet = e.sheet;\n    }\n\n    return rootStylesheet;\n  } else {\n    // TODO use createElementNS ?\n    var e = document.createElement(\"style\");\n    e.type = \"text/css\";\n\n    if (options.nonce != \"\") {\n      e.setAttribute(\"nonce\", options.nonce);\n    }\n\n    element.appendChild(e);\n    return e.sheet;\n  }\n}\n/**\r\n * [makeStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param selector  [description]\r\n * @return [description]\r\n */\n\n\nfunction appendStylesheet(root, selector) {\n  var index = root.cssRules.length;\n  root.insertRule(selector + \"{}\", index);\n  return root.cssRules[index];\n}\n/**\r\n * Defines a class for a CSS rule.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\n\n\nvar StyleRule =\n/** @class */\nfunction (_super) {\n  __extends(StyleRule, _super);\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param selector  CSS selector\r\n   * @param styles    An object of style attribute - value pairs\r\n   */\n\n\n  function StyleRule(element, selector, styles) {\n    var _this = this;\n\n    var root = getStylesheet(element); // TODO test this\n\n    _this = _super.call(this, function () {\n      // TODO a bit hacky\n      var index = $array.indexOf(root.cssRules, _this._rule);\n\n      if (index === -1) {\n        throw new Error(\"Could not dispose StyleRule\");\n      } else {\n        // TODO if it's empty remove it from the DOM ?\n        root.deleteRule(index);\n      }\n    }) || this;\n    _this._rule = appendStylesheet(root, selector);\n    $object.each(styles, function (key, value) {\n      _this.setStyle(key, value);\n    });\n    return _this;\n  }\n\n  Object.defineProperty(StyleRule.prototype, \"selector\", {\n    /**\r\n     * @return CSS selector\r\n     */\n    get: function () {\n      return this._rule.selectorText;\n    },\n\n    /**\r\n     * A CSS selector text.\r\n     *\r\n     * E.g.: `.myClass p`\r\n     *\r\n     * @param selector  CSS selector\r\n     */\n    set: function (selector) {\n      this._rule.selectorText = selector;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Sets the same style properties with browser-specific prefixes.\r\n   *\r\n   * @param name   Attribute name\r\n   * @param value  Attribute value\r\n   */\n\n  StyleRule.prototype._setVendorPrefixName = function (name, value) {\n    var style = this._rule.style;\n    style.setProperty(\"-webkit-\" + name, value, \"\");\n    style.setProperty(\"-moz-\" + name, value, \"\");\n    style.setProperty(\"-ms-\" + name, value, \"\");\n    style.setProperty(\"-o-\" + name, value, \"\");\n    style.setProperty(name, value, \"\");\n  };\n  /**\r\n   * Sets a value for specific style attribute.\r\n   *\r\n   * @param name   Attribute\r\n   * @param value  Value\r\n   */\n\n\n  StyleRule.prototype.setStyle = function (name, value) {\n    if (name === \"transition\") {\n      this._setVendorPrefixName(name, value);\n    } else {\n      this._rule.style.setProperty(name, value, \"\");\n    }\n  };\n\n  return StyleRule;\n}(Disposer);\n\nexport { StyleRule };\n/**\r\n * An internal counter for unique style ids.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nvar styleId = 0;\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nvar StyleClass =\n/** @class */\nfunction (_super) {\n  __extends(StyleClass, _super);\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param styles  An object of style attribute - value pairs\r\n   * @param name    Class name\r\n   */\n\n\n  function StyleClass(element, styles, name) {\n    var _this = this;\n\n    var className = !$type.hasValue(name) // TODO generate the classname randomly\n    ? \"__style_\" + ++styleId + \"__\" : name;\n    _this = _super.call(this, element, \".\" + className, styles) || this;\n    _this._className = className;\n    return _this;\n  }\n\n  Object.defineProperty(StyleClass.prototype, \"className\", {\n    /**\r\n     * @return Class name\r\n     */\n    get: function () {\n      return this._className;\n    },\n\n    /**\r\n     * Class name.\r\n     *\r\n     * @param name  Class name\r\n     */\n    set: function (name) {\n      this._className = name;\n      this.selector = \".\" + name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Converts the whole class to\r\n   * @ignore Exclude from docs\r\n   */\n\n  StyleClass.prototype.toString = function () {\n    return this._className;\n  };\n\n  return StyleClass;\n}(StyleRule);\n\nexport { StyleClass };\nexport function ready(f) {\n  if (document.readyState !== \"loading\") {\n    f();\n  } else {\n    var listener_1 = function () {\n      if (document.readyState !== \"loading\") {\n        document.removeEventListener(\"readystatechange\", listener_1);\n        f();\n      }\n    };\n\n    document.addEventListener(\"readystatechange\", listener_1);\n  }\n}\n/**\r\n * Returns a font fmaily name for the element (directly set or\r\n * computed/inherited).\r\n *\r\n * @ignore Exclude from docs\r\n * @param element  Element\r\n * @return Font family\r\n */\n\nexport function findFont(element) {\n  // Check if element has styles set\n  var font = getComputedStyle(element, \"font-family\");\n\n  if (!font) {\n    // Completely transparent. Look for a parent\n    var parent_1 = element.parentElement || element.parentNode;\n\n    if (parent_1) {\n      return findFont(parent_1);\n    } else {\n      return undefined;\n    }\n  } else {\n    return font;\n  }\n}\n/**\r\n * Returns a font fmaily name for the element (directly set or\r\n * computed/inherited).\r\n *\r\n * @ignore Exclude from docs\r\n * @param element  Element\r\n * @return Font family\r\n */\n\nexport function findFontSize(element) {\n  // Check if element has styles set\n  var font = getComputedStyle(element, \"font-size\");\n\n  if (!font) {\n    // Completely transparent. Look for a parent\n    var parent_2 = element.parentElement || element.parentNode;\n\n    if (parent_2) {\n      return findFontSize(parent_2);\n    } else {\n      return undefined;\n    }\n  } else {\n    return font;\n  }\n}\n/**\r\n * Checks whether element is not visible, whether directly or via its\r\n * ascendants.\r\n *\r\n * @param   element  Target element\r\n * @return           Hidden?\r\n */\n\nexport function isHidden(element) {\n  return element.offsetParent === null;\n}\n/**\r\n * Checks wthether element is in the current viewport.\r\n *\r\n * @since 2.5.5\r\n * @param   el Element\r\n * @return     Within viewport?\r\n */\n\nexport function isElementInViewport(el, viewportTarget) {\n  // Get position data of the element\n  var rect = el.getBoundingClientRect(); // Convert to array\n\n  var targets = $type.isArray(viewportTarget) ? viewportTarget : viewportTarget ? [viewportTarget] : []; // Should we measure against specific viewport element?\n\n  if (targets.length) {\n    for (var i = 0; i < targets.length; i++) {\n      var target = targets[i]; // Check if viewport itself is visible\n\n      if (!isElementInViewport(target)) {\n        return false;\n      } // Check if element is visible within the viewport\n\n\n      var viewportRect = target.getBoundingClientRect();\n\n      if (rect.top >= 0 && rect.left >= 0 && rect.top <= viewportRect.top + viewportRect.height && rect.left <= viewportRect.left + viewportRect.width) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  return rect.top >= 0 && rect.left >= 0 && rect.top <= (window.innerHeight || document.documentElement.clientHeight) && rect.left <= (window.innerWidth || document.documentElement.clientWidth);\n}","map":{"version":3,"names":["__extends","Disposer","readFrame","writeFrame","options","$object","$array","$type","SVGNS","XMLNS","XLINK","addEventListener","dom","type","listener","removeEventListener","getElement","el","isString","e","document","getElementById","getElementsByClassName","HTMLElement","addClass","element","className","classList","classes","split","each","name","add","currentClassName","getAttribute","setAttribute","filter","item","join","removeClass","remove","setStyle","property","value","style","getComputedStyle","currentStyle","defaultView","getPropertyValue","blur","activeElement","body","input","createElement","position","top","left","appendChild","focus","removeChild","fo","createElementNS","disabled","outerHTML","twrap","tnode","cloneNode","content","innerHTML","isElement","Object","nodeType","contains","a","b","cursor","parentNode","host","getShadowRoot","getRoot","owner","ownerDocument","eventTarget","event","composedPath","target","copyAttributes","source","attributes","attr","fixPixelPerfect","rect","getBoundingClientRect","left_1","Math","round","top_1","rootStylesheet","getStylesheet","hasValue","nonce","head","sheet","appendStylesheet","root","selector","index","cssRules","length","insertRule","StyleRule","_super","styles","_this","call","indexOf","_rule","Error","deleteRule","key","defineProperty","prototype","get","selectorText","set","enumerable","configurable","_setVendorPrefixName","setProperty","styleId","StyleClass","_className","toString","ready","f","readyState","listener_1","findFont","font","parent_1","parentElement","undefined","findFontSize","parent_2","isHidden","offsetParent","isElementInViewport","viewportTarget","targets","isArray","i","viewportRect","height","width","window","innerHeight","documentElement","clientHeight","innerWidth","clientWidth"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/@amcharts/amcharts4/.internal/core/utils/DOM.js"],"sourcesContent":["/**\r\n * A collection of DOM-related functions.\r\n */\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Disposer } from \"./Disposer\";\r\nimport { readFrame, writeFrame } from \"./AsyncPending\";\r\nimport { options } from \"../Options\";\r\nimport * as $object from \"./Object\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * SVG namespace.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport var SVGNS = \"http://www.w3.org/2000/svg\";\r\n/**\r\n * XML namespace.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport var XMLNS = \"http://www.w3.org/2000/xmlns/\";\r\n/**\r\n * XLINK namespace.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport var XLINK = \"http://www.w3.org/1999/xlink\";\r\n/**\r\n * Function that adds a disposable event listener directly to a DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param dom       A DOM element to add event to\r\n * @param type      Event type\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function addEventListener(dom, type, listener, options) {\r\n    //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\r\n    //console.log(type, dom);\r\n    dom.addEventListener(type, listener, options || false);\r\n    return new Disposer(function () {\r\n        dom.removeEventListener(type, listener, options || false);\r\n    });\r\n}\r\n/**\r\n * Finds and returns an element reference using following logic:\r\n * * If we pass in an element instance, we just return it back.\r\n * * If we pass in a string, the function looks for an element with such id.\r\n * * If no element with such id is found, we grab the first element with a tag name like this.\r\n *\r\n * @ignore Exclude from docs\r\n * @param el  Element definition (reference, or id, or tag name)\r\n * @return Element reference\r\n * @todo Review this function as it seems pretty fuzzy and hacky\r\n */\r\nexport function getElement(el) {\r\n    if ($type.isString(el)) {\r\n        var e = document.getElementById(el);\r\n        if (e == null) {\r\n            e = document.getElementsByClassName(el)[0];\r\n        }\r\n        if (e instanceof HTMLElement) {\r\n            return e;\r\n        }\r\n    }\r\n    else if (el instanceof HTMLElement) {\r\n        return el;\r\n    }\r\n}\r\n/**\r\n * Adds a class name to an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function addClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        var classes = className.split(\" \");\r\n        $array.each(classes, function (name) {\r\n            element.classList.add(name);\r\n        });\r\n    }\r\n    else {\r\n        var currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\r\n                return item !== className;\r\n            }).join(\" \") + \" \" + className);\r\n        }\r\n        else {\r\n            element.setAttribute(\"class\", className);\r\n        }\r\n        //element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\") + \" \" + className;\r\n    }\r\n}\r\n/**\r\n * Removes a class name from an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function removeClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        element.classList.remove(className);\r\n    }\r\n    else {\r\n        var currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\r\n                return item !== className;\r\n            }).join(\" \"));\r\n        }\r\n        //element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\");\r\n    }\r\n}\r\n/**\r\n * Sets style property on DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Still needed?\r\n */\r\nexport function setStyle(element, property, value) {\r\n    element.style[property] = value;\r\n}\r\n/**\r\n * Gets the computed style value for an element.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport function getComputedStyle(element, property) {\r\n    if (element.currentStyle) {\r\n        return element.currentStyle[property];\r\n    }\r\n    return document.defaultView.getComputedStyle(element, null).getPropertyValue(property);\r\n}\r\n/**\r\n * Removes focus from any element by shifting focus to body.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport function blur() {\r\n    if (document.activeElement && document.activeElement != document.body) {\r\n        if (document.activeElement.blur) {\r\n            document.activeElement.blur();\r\n        }\r\n        else {\r\n            var input = document.createElement(\"button\");\r\n            input.style.position = \"fixed\";\r\n            input.style.top = \"0px\";\r\n            input.style.left = \"-10000px\";\r\n            document.body.appendChild(input);\r\n            input.focus();\r\n            input.blur();\r\n            document.body.removeChild(input);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Tries to focus the element.\r\n *\r\n * @ignore Exlude from docs\r\n * @param element  Element to focus\r\n */\r\nexport function focus(element) {\r\n    if (element instanceof HTMLElement) {\r\n        element.focus();\r\n    }\r\n    else {\r\n        var input = document.createElement(\"input\");\r\n        var fo = document.createElementNS(SVGNS, \"foreignObject\");\r\n        fo.appendChild(input);\r\n        element.appendChild(fo);\r\n        input.focus();\r\n        input.disabled = true;\r\n        fo.remove();\r\n    }\r\n    /*if ((<any>element).focus != undefined) {\r\n        (<any>element).focus();\r\n    }\r\n    else if (element instanceof SVGSVGElement) {\r\n        // Not implemented\r\n        // @todo implement focus fallback\r\n    }*/\r\n}\r\n/**\r\n * Returns markup for the element including the element tag itself.\r\n * SVG elements do not support `outerHTML` so this functions applies of\r\n * a workaround which creates a new temporary wrapper, clones element and uses\r\n * wrapper's `innerHTML`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element  Element to get full markup for\r\n * @return Markup\r\n * @deprecated Not in use anywhere\r\n */\r\nexport function outerHTML(element) {\r\n    if (element.outerHTML) {\r\n        return element.outerHTML;\r\n    }\r\n    else {\r\n        var twrap = document.createElement(\"div\");\r\n        var tnode = element.cloneNode(true);\r\n        twrap.appendChild(tnode);\r\n        var content = twrap.innerHTML;\r\n        return content;\r\n    }\r\n}\r\n/**\r\n * Checks if element is a valid DOM node.\r\n *\r\n * @ignore Exclude from docs\r\n * @param el  Element\r\n * @return `true` if element is a valid DOM node\r\n */\r\nexport function isElement(el) {\r\n    return el instanceof Object && el && el.nodeType === 1;\r\n}\r\n/**\r\n * Checks of element `a` contains element `b`.\r\n *\r\n * @param a  Aleged ascendant\r\n * @param b  Aleged descendant\r\n * @return Contains?\r\n */\r\nexport function contains(a, b) {\r\n    var cursor = b;\r\n    while (true) {\r\n        if (a === cursor) {\r\n            return true;\r\n        }\r\n        else if (cursor.parentNode == null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host == null) {\r\n                return false;\r\n            }\r\n            else {\r\n                cursor = cursor.host;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns the shadow root of the element or null\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\r\nexport function getShadowRoot(a) {\r\n    var cursor = a;\r\n    while (true) {\r\n        if (cursor.parentNode == null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host != null) {\r\n                return cursor;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns the root of the element (either the Document or the ShadowRoot)\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\r\nexport function getRoot(a) {\r\n    // TODO replace with Node.prototype.getRootNode\r\n    var owner = a.ownerDocument;\r\n    var cursor = a;\r\n    while (true) {\r\n        if (cursor.parentNode == null) {\r\n            // If the cursor is the document, or it is a ShadowRoot\r\n            // TODO better ShadowRoot detection\r\n            if (cursor === owner || cursor.host != null) {\r\n                return cursor;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Gets the true target of the Event.\r\n *\r\n * This is needed to make events work with the shadow DOM.\r\n *\r\n * @param event  Event\r\n * @return EventTarget\r\n */\r\nexport function eventTarget(event) {\r\n    if (typeof event.composedPath === \"function\") {\r\n        return event.composedPath()[0];\r\n    }\r\n    else {\r\n        return event.target;\r\n    }\r\n}\r\n/**\r\n * Copies attributes from one element to another.\r\n *\r\n * @ignore Exclude from docs\r\n * @param source  Element to copy attributes from\r\n * @param target  Element to copy attributes to\r\n */\r\nexport function copyAttributes(source, target) {\r\n    $array.each(source.attributes, function (attr) {\r\n        // TODO what if it's null ?\r\n        if (attr.value != null) {\r\n            target.setAttribute(attr.name, attr.value);\r\n        }\r\n    });\r\n}\r\n/**\r\n * [fixPixelPerfect description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param el  Element\r\n */\r\nexport function fixPixelPerfect(el) {\r\n    readFrame(function () {\r\n        // sometimes IE doesn't like this\r\n        // TODO figure out a way to remove this\r\n        try {\r\n            var rect = el.getBoundingClientRect();\r\n            var left_1 = rect.left - Math.round(rect.left);\r\n            var top_1 = rect.top - Math.round(rect.top);\r\n            if (left_1 !== 0) {\r\n                writeFrame(function () {\r\n                    el.style.left = left_1 + \"px\";\r\n                });\r\n            }\r\n            if (top_1 !== 0) {\r\n                writeFrame(function () {\r\n                    el.style.top = top_1 + \"px\";\r\n                });\r\n            }\r\n        }\r\n        catch (e) { }\r\n    });\r\n}\r\n/**\r\n * [rootStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nvar rootStylesheet;\r\n/**\r\n * [getStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @return [description]\r\n */\r\nfunction getStylesheet(element) {\r\n    if (element == null) {\r\n        if (!$type.hasValue(rootStylesheet)) {\r\n            // TODO use createElementNS ?\r\n            var e = document.createElement(\"style\");\r\n            e.type = \"text/css\";\r\n            if (options.nonce != \"\") {\r\n                e.setAttribute(\"nonce\", options.nonce);\r\n            }\r\n            document.head.appendChild(e);\r\n            rootStylesheet = e.sheet;\r\n        }\r\n        return rootStylesheet;\r\n    }\r\n    else {\r\n        // TODO use createElementNS ?\r\n        var e = document.createElement(\"style\");\r\n        e.type = \"text/css\";\r\n        if (options.nonce != \"\") {\r\n            e.setAttribute(\"nonce\", options.nonce);\r\n        }\r\n        element.appendChild(e);\r\n        return e.sheet;\r\n    }\r\n}\r\n/**\r\n * [makeStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param selector  [description]\r\n * @return [description]\r\n */\r\nfunction appendStylesheet(root, selector) {\r\n    var index = root.cssRules.length;\r\n    root.insertRule(selector + \"{}\", index);\r\n    return root.cssRules[index];\r\n}\r\n/**\r\n * Defines a class for a CSS rule.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nvar StyleRule = /** @class */ (function (_super) {\r\n    __extends(StyleRule, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param selector  CSS selector\r\n     * @param styles    An object of style attribute - value pairs\r\n     */\r\n    function StyleRule(element, selector, styles) {\r\n        var _this = this;\r\n        var root = getStylesheet(element);\r\n        // TODO test this\r\n        _this = _super.call(this, function () {\r\n            // TODO a bit hacky\r\n            var index = $array.indexOf(root.cssRules, _this._rule);\r\n            if (index === -1) {\r\n                throw new Error(\"Could not dispose StyleRule\");\r\n            }\r\n            else {\r\n                // TODO if it's empty remove it from the DOM ?\r\n                root.deleteRule(index);\r\n            }\r\n        }) || this;\r\n        _this._rule = appendStylesheet(root, selector);\r\n        $object.each(styles, function (key, value) {\r\n            _this.setStyle(key, value);\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StyleRule.prototype, \"selector\", {\r\n        /**\r\n         * @return CSS selector\r\n         */\r\n        get: function () {\r\n            return this._rule.selectorText;\r\n        },\r\n        /**\r\n         * A CSS selector text.\r\n         *\r\n         * E.g.: `.myClass p`\r\n         *\r\n         * @param selector  CSS selector\r\n         */\r\n        set: function (selector) {\r\n            this._rule.selectorText = selector;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets the same style properties with browser-specific prefixes.\r\n     *\r\n     * @param name   Attribute name\r\n     * @param value  Attribute value\r\n     */\r\n    StyleRule.prototype._setVendorPrefixName = function (name, value) {\r\n        var style = this._rule.style;\r\n        style.setProperty(\"-webkit-\" + name, value, \"\");\r\n        style.setProperty(\"-moz-\" + name, value, \"\");\r\n        style.setProperty(\"-ms-\" + name, value, \"\");\r\n        style.setProperty(\"-o-\" + name, value, \"\");\r\n        style.setProperty(name, value, \"\");\r\n    };\r\n    /**\r\n     * Sets a value for specific style attribute.\r\n     *\r\n     * @param name   Attribute\r\n     * @param value  Value\r\n     */\r\n    StyleRule.prototype.setStyle = function (name, value) {\r\n        if (name === \"transition\") {\r\n            this._setVendorPrefixName(name, value);\r\n        }\r\n        else {\r\n            this._rule.style.setProperty(name, value, \"\");\r\n        }\r\n    };\r\n    return StyleRule;\r\n}(Disposer));\r\nexport { StyleRule };\r\n/**\r\n * An internal counter for unique style ids.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nvar styleId = 0;\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nvar StyleClass = /** @class */ (function (_super) {\r\n    __extends(StyleClass, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param styles  An object of style attribute - value pairs\r\n     * @param name    Class name\r\n     */\r\n    function StyleClass(element, styles, name) {\r\n        var _this = this;\r\n        var className = (!$type.hasValue(name)\r\n            // TODO generate the classname randomly\r\n            ? \"__style_\" + (++styleId) + \"__\"\r\n            : name);\r\n        _this = _super.call(this, element, \".\" + className, styles) || this;\r\n        _this._className = className;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StyleClass.prototype, \"className\", {\r\n        /**\r\n         * @return Class name\r\n         */\r\n        get: function () {\r\n            return this._className;\r\n        },\r\n        /**\r\n         * Class name.\r\n         *\r\n         * @param name  Class name\r\n         */\r\n        set: function (name) {\r\n            this._className = name;\r\n            this.selector = \".\" + name;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Converts the whole class to\r\n     * @ignore Exclude from docs\r\n     */\r\n    StyleClass.prototype.toString = function () {\r\n        return this._className;\r\n    };\r\n    return StyleClass;\r\n}(StyleRule));\r\nexport { StyleClass };\r\nexport function ready(f) {\r\n    if (document.readyState !== \"loading\") {\r\n        f();\r\n    }\r\n    else {\r\n        var listener_1 = function () {\r\n            if (document.readyState !== \"loading\") {\r\n                document.removeEventListener(\"readystatechange\", listener_1);\r\n                f();\r\n            }\r\n        };\r\n        document.addEventListener(\"readystatechange\", listener_1);\r\n    }\r\n}\r\n/**\r\n * Returns a font fmaily name for the element (directly set or\r\n * computed/inherited).\r\n *\r\n * @ignore Exclude from docs\r\n * @param element  Element\r\n * @return Font family\r\n */\r\nexport function findFont(element) {\r\n    // Check if element has styles set\r\n    var font = getComputedStyle(element, \"font-family\");\r\n    if (!font) {\r\n        // Completely transparent. Look for a parent\r\n        var parent_1 = element.parentElement || element.parentNode;\r\n        if (parent_1) {\r\n            return findFont(parent_1);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    else {\r\n        return font;\r\n    }\r\n}\r\n/**\r\n * Returns a font fmaily name for the element (directly set or\r\n * computed/inherited).\r\n *\r\n * @ignore Exclude from docs\r\n * @param element  Element\r\n * @return Font family\r\n */\r\nexport function findFontSize(element) {\r\n    // Check if element has styles set\r\n    var font = getComputedStyle(element, \"font-size\");\r\n    if (!font) {\r\n        // Completely transparent. Look for a parent\r\n        var parent_2 = element.parentElement || element.parentNode;\r\n        if (parent_2) {\r\n            return findFontSize(parent_2);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    else {\r\n        return font;\r\n    }\r\n}\r\n/**\r\n * Checks whether element is not visible, whether directly or via its\r\n * ascendants.\r\n *\r\n * @param   element  Target element\r\n * @return           Hidden?\r\n */\r\nexport function isHidden(element) {\r\n    return (element.offsetParent === null);\r\n}\r\n/**\r\n * Checks wthether element is in the current viewport.\r\n *\r\n * @since 2.5.5\r\n * @param   el Element\r\n * @return     Within viewport?\r\n */\r\nexport function isElementInViewport(el, viewportTarget) {\r\n    // Get position data of the element\r\n    var rect = el.getBoundingClientRect();\r\n    // Convert to array\r\n    var targets = $type.isArray(viewportTarget) ? viewportTarget : viewportTarget ? [viewportTarget] : [];\r\n    // Should we measure against specific viewport element?\r\n    if (targets.length) {\r\n        for (var i = 0; i < targets.length; i++) {\r\n            var target = targets[i];\r\n            // Check if viewport itself is visible\r\n            if (!isElementInViewport(target)) {\r\n                return false;\r\n            }\r\n            // Check if element is visible within the viewport\r\n            var viewportRect = target.getBoundingClientRect();\r\n            if (rect.top >= 0 &&\r\n                rect.left >= 0 &&\r\n                rect.top <= (viewportRect.top + viewportRect.height) &&\r\n                rect.left <= (viewportRect.left + viewportRect.width)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    return (rect.top >= 0 &&\r\n        rect.left >= 0 &&\r\n        rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n        rect.left <= (window.innerWidth || document.documentElement.clientWidth));\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,gBAAtC;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,UAAzB;AACA,OAAO,KAAKC,MAAZ,MAAwB,SAAxB;AACA,OAAO,KAAKC,KAAZ,MAAuB,QAAvB;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAIC,KAAK,GAAG,4BAAZ;AACP;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAIC,KAAK,GAAG,+BAAZ;AACP;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAIC,KAAK,GAAG,8BAAZ;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,IAA/B,EAAqCC,QAArC,EAA+CV,OAA/C,EAAwD;EAC3D;EACA;EACAQ,GAAG,CAACD,gBAAJ,CAAqBE,IAArB,EAA2BC,QAA3B,EAAqCV,OAAO,IAAI,KAAhD;EACA,OAAO,IAAIH,QAAJ,CAAa,YAAY;IAC5BW,GAAG,CAACG,mBAAJ,CAAwBF,IAAxB,EAA8BC,QAA9B,EAAwCV,OAAO,IAAI,KAAnD;EACH,CAFM,CAAP;AAGH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASY,UAAT,CAAoBC,EAApB,EAAwB;EAC3B,IAAIV,KAAK,CAACW,QAAN,CAAeD,EAAf,CAAJ,EAAwB;IACpB,IAAIE,CAAC,GAAGC,QAAQ,CAACC,cAAT,CAAwBJ,EAAxB,CAAR;;IACA,IAAIE,CAAC,IAAI,IAAT,EAAe;MACXA,CAAC,GAAGC,QAAQ,CAACE,sBAAT,CAAgCL,EAAhC,EAAoC,CAApC,CAAJ;IACH;;IACD,IAAIE,CAAC,YAAYI,WAAjB,EAA8B;MAC1B,OAAOJ,CAAP;IACH;EACJ,CARD,MASK,IAAIF,EAAE,YAAYM,WAAlB,EAA+B;IAChC,OAAON,EAAP;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASO,QAAT,CAAkBC,OAAlB,EAA2BC,SAA3B,EAAsC;EACzC,IAAI,CAACD,OAAL,EAAc;IACV;EACH;;EACD,IAAIA,OAAO,CAACE,SAAZ,EAAuB;IACnB,IAAIC,OAAO,GAAGF,SAAS,CAACG,KAAV,CAAgB,GAAhB,CAAd;IACAvB,MAAM,CAACwB,IAAP,CAAYF,OAAZ,EAAqB,UAAUG,IAAV,EAAgB;MACjCN,OAAO,CAACE,SAAR,CAAkBK,GAAlB,CAAsBD,IAAtB;IACH,CAFD;EAGH,CALD,MAMK;IACD,IAAIE,gBAAgB,GAAGR,OAAO,CAACS,YAAR,CAAqB,OAArB,CAAvB;;IACA,IAAID,gBAAJ,EAAsB;MAClBR,OAAO,CAACU,YAAR,CAAqB,OAArB,EAA8BF,gBAAgB,CAACJ,KAAjB,CAAuB,GAAvB,EAA4BO,MAA5B,CAAmC,UAAUC,IAAV,EAAgB;QAC7E,OAAOA,IAAI,KAAKX,SAAhB;MACH,CAF6B,EAE3BY,IAF2B,CAEtB,GAFsB,IAEf,GAFe,GAETZ,SAFrB;IAGH,CAJD,MAKK;MACDD,OAAO,CAACU,YAAR,CAAqB,OAArB,EAA8BT,SAA9B;IACH,CATA,CAUD;;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASa,WAAT,CAAqBd,OAArB,EAA8BC,SAA9B,EAAyC;EAC5C,IAAI,CAACD,OAAL,EAAc;IACV;EACH;;EACD,IAAIA,OAAO,CAACE,SAAZ,EAAuB;IACnBF,OAAO,CAACE,SAAR,CAAkBa,MAAlB,CAAyBd,SAAzB;EACH,CAFD,MAGK;IACD,IAAIO,gBAAgB,GAAGR,OAAO,CAACS,YAAR,CAAqB,OAArB,CAAvB;;IACA,IAAID,gBAAJ,EAAsB;MAClBR,OAAO,CAACU,YAAR,CAAqB,OAArB,EAA8BF,gBAAgB,CAACJ,KAAjB,CAAuB,GAAvB,EAA4BO,MAA5B,CAAmC,UAAUC,IAAV,EAAgB;QAC7E,OAAOA,IAAI,KAAKX,SAAhB;MACH,CAF6B,EAE3BY,IAF2B,CAEtB,GAFsB,CAA9B;IAGH,CANA,CAOD;;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,QAAT,CAAkBhB,OAAlB,EAA2BiB,QAA3B,EAAqCC,KAArC,EAA4C;EAC/ClB,OAAO,CAACmB,KAAR,CAAcF,QAAd,IAA0BC,KAA1B;AACH;AACD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASE,gBAAT,CAA0BpB,OAA1B,EAAmCiB,QAAnC,EAA6C;EAChD,IAAIjB,OAAO,CAACqB,YAAZ,EAA0B;IACtB,OAAOrB,OAAO,CAACqB,YAAR,CAAqBJ,QAArB,CAAP;EACH;;EACD,OAAOtB,QAAQ,CAAC2B,WAAT,CAAqBF,gBAArB,CAAsCpB,OAAtC,EAA+C,IAA/C,EAAqDuB,gBAArD,CAAsEN,QAAtE,CAAP;AACH;AACD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASO,IAAT,GAAgB;EACnB,IAAI7B,QAAQ,CAAC8B,aAAT,IAA0B9B,QAAQ,CAAC8B,aAAT,IAA0B9B,QAAQ,CAAC+B,IAAjE,EAAuE;IACnE,IAAI/B,QAAQ,CAAC8B,aAAT,CAAuBD,IAA3B,EAAiC;MAC7B7B,QAAQ,CAAC8B,aAAT,CAAuBD,IAAvB;IACH,CAFD,MAGK;MACD,IAAIG,KAAK,GAAGhC,QAAQ,CAACiC,aAAT,CAAuB,QAAvB,CAAZ;MACAD,KAAK,CAACR,KAAN,CAAYU,QAAZ,GAAuB,OAAvB;MACAF,KAAK,CAACR,KAAN,CAAYW,GAAZ,GAAkB,KAAlB;MACAH,KAAK,CAACR,KAAN,CAAYY,IAAZ,GAAmB,UAAnB;MACApC,QAAQ,CAAC+B,IAAT,CAAcM,WAAd,CAA0BL,KAA1B;MACAA,KAAK,CAACM,KAAN;MACAN,KAAK,CAACH,IAAN;MACA7B,QAAQ,CAAC+B,IAAT,CAAcQ,WAAd,CAA0BP,KAA1B;IACH;EACJ;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASM,KAAT,CAAejC,OAAf,EAAwB;EAC3B,IAAIA,OAAO,YAAYF,WAAvB,EAAoC;IAChCE,OAAO,CAACiC,KAAR;EACH,CAFD,MAGK;IACD,IAAIN,KAAK,GAAGhC,QAAQ,CAACiC,aAAT,CAAuB,OAAvB,CAAZ;IACA,IAAIO,EAAE,GAAGxC,QAAQ,CAACyC,eAAT,CAAyBrD,KAAzB,EAAgC,eAAhC,CAAT;IACAoD,EAAE,CAACH,WAAH,CAAeL,KAAf;IACA3B,OAAO,CAACgC,WAAR,CAAoBG,EAApB;IACAR,KAAK,CAACM,KAAN;IACAN,KAAK,CAACU,QAAN,GAAiB,IAAjB;IACAF,EAAE,CAACpB,MAAH;EACH;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;;AACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASuB,SAAT,CAAmBtC,OAAnB,EAA4B;EAC/B,IAAIA,OAAO,CAACsC,SAAZ,EAAuB;IACnB,OAAOtC,OAAO,CAACsC,SAAf;EACH,CAFD,MAGK;IACD,IAAIC,KAAK,GAAG5C,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAAZ;IACA,IAAIY,KAAK,GAAGxC,OAAO,CAACyC,SAAR,CAAkB,IAAlB,CAAZ;IACAF,KAAK,CAACP,WAAN,CAAkBQ,KAAlB;IACA,IAAIE,OAAO,GAAGH,KAAK,CAACI,SAApB;IACA,OAAOD,OAAP;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASE,SAAT,CAAmBpD,EAAnB,EAAuB;EAC1B,OAAOA,EAAE,YAAYqD,MAAd,IAAwBrD,EAAxB,IAA8BA,EAAE,CAACsD,QAAH,KAAgB,CAArD;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,QAAT,CAAkBC,CAAlB,EAAqBC,CAArB,EAAwB;EAC3B,IAAIC,MAAM,GAAGD,CAAb;;EACA,OAAO,IAAP,EAAa;IACT,IAAID,CAAC,KAAKE,MAAV,EAAkB;MACd,OAAO,IAAP;IACH,CAFD,MAGK,IAAIA,MAAM,CAACC,UAAP,IAAqB,IAAzB,EAA+B;MAChC;MACA,IAAID,MAAM,CAACE,IAAP,IAAe,IAAnB,EAAyB;QACrB,OAAO,KAAP;MACH,CAFD,MAGK;QACDF,MAAM,GAAGA,MAAM,CAACE,IAAhB;MACH;IACJ,CARI,MASA;MACDF,MAAM,GAAGA,MAAM,CAACC,UAAhB;IACH;EACJ;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASE,aAAT,CAAuBL,CAAvB,EAA0B;EAC7B,IAAIE,MAAM,GAAGF,CAAb;;EACA,OAAO,IAAP,EAAa;IACT,IAAIE,MAAM,CAACC,UAAP,IAAqB,IAAzB,EAA+B;MAC3B;MACA,IAAID,MAAM,CAACE,IAAP,IAAe,IAAnB,EAAyB;QACrB,OAAOF,MAAP;MACH,CAFD,MAGK;QACD,OAAO,IAAP;MACH;IACJ,CARD,MASK;MACDA,MAAM,GAAGA,MAAM,CAACC,UAAhB;IACH;EACJ;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,OAAT,CAAiBN,CAAjB,EAAoB;EACvB;EACA,IAAIO,KAAK,GAAGP,CAAC,CAACQ,aAAd;EACA,IAAIN,MAAM,GAAGF,CAAb;;EACA,OAAO,IAAP,EAAa;IACT,IAAIE,MAAM,CAACC,UAAP,IAAqB,IAAzB,EAA+B;MAC3B;MACA;MACA,IAAID,MAAM,KAAKK,KAAX,IAAoBL,MAAM,CAACE,IAAP,IAAe,IAAvC,EAA6C;QACzC,OAAOF,MAAP;MACH,CAFD,MAGK;QACD,OAAO,IAAP;MACH;IACJ,CATD,MAUK;MACDA,MAAM,GAAGA,MAAM,CAACC,UAAhB;IACH;EACJ;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASM,WAAT,CAAqBC,KAArB,EAA4B;EAC/B,IAAI,OAAOA,KAAK,CAACC,YAAb,KAA8B,UAAlC,EAA8C;IAC1C,OAAOD,KAAK,CAACC,YAAN,GAAqB,CAArB,CAAP;EACH,CAFD,MAGK;IACD,OAAOD,KAAK,CAACE,MAAb;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,cAAT,CAAwBC,MAAxB,EAAgCF,MAAhC,EAAwC;EAC3C/E,MAAM,CAACwB,IAAP,CAAYyD,MAAM,CAACC,UAAnB,EAA+B,UAAUC,IAAV,EAAgB;IAC3C;IACA,IAAIA,IAAI,CAAC9C,KAAL,IAAc,IAAlB,EAAwB;MACpB0C,MAAM,CAAClD,YAAP,CAAoBsD,IAAI,CAAC1D,IAAzB,EAA+B0D,IAAI,CAAC9C,KAApC;IACH;EACJ,CALD;AAMH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAAS+C,eAAT,CAAyBzE,EAAzB,EAA6B;EAChCf,SAAS,CAAC,YAAY;IAClB;IACA;IACA,IAAI;MACA,IAAIyF,IAAI,GAAG1E,EAAE,CAAC2E,qBAAH,EAAX;MACA,IAAIC,MAAM,GAAGF,IAAI,CAACnC,IAAL,GAAYsC,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACnC,IAAhB,CAAzB;MACA,IAAIwC,KAAK,GAAGL,IAAI,CAACpC,GAAL,GAAWuC,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACpC,GAAhB,CAAvB;;MACA,IAAIsC,MAAM,KAAK,CAAf,EAAkB;QACd1F,UAAU,CAAC,YAAY;UACnBc,EAAE,CAAC2B,KAAH,CAASY,IAAT,GAAgBqC,MAAM,GAAG,IAAzB;QACH,CAFS,CAAV;MAGH;;MACD,IAAIG,KAAK,KAAK,CAAd,EAAiB;QACb7F,UAAU,CAAC,YAAY;UACnBc,EAAE,CAAC2B,KAAH,CAASW,GAAT,GAAeyC,KAAK,GAAG,IAAvB;QACH,CAFS,CAAV;MAGH;IACJ,CAdD,CAeA,OAAO7E,CAAP,EAAU,CAAG;EAChB,CAnBQ,CAAT;AAoBH;AACD;AACA;AACA;AACA;AACA;AACA;;AACA,IAAI8E,cAAJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,aAAT,CAAuBzE,OAAvB,EAAgC;EAC5B,IAAIA,OAAO,IAAI,IAAf,EAAqB;IACjB,IAAI,CAAClB,KAAK,CAAC4F,QAAN,CAAeF,cAAf,CAAL,EAAqC;MACjC;MACA,IAAI9E,CAAC,GAAGC,QAAQ,CAACiC,aAAT,CAAuB,OAAvB,CAAR;MACAlC,CAAC,CAACN,IAAF,GAAS,UAAT;;MACA,IAAIT,OAAO,CAACgG,KAAR,IAAiB,EAArB,EAAyB;QACrBjF,CAAC,CAACgB,YAAF,CAAe,OAAf,EAAwB/B,OAAO,CAACgG,KAAhC;MACH;;MACDhF,QAAQ,CAACiF,IAAT,CAAc5C,WAAd,CAA0BtC,CAA1B;MACA8E,cAAc,GAAG9E,CAAC,CAACmF,KAAnB;IACH;;IACD,OAAOL,cAAP;EACH,CAZD,MAaK;IACD;IACA,IAAI9E,CAAC,GAAGC,QAAQ,CAACiC,aAAT,CAAuB,OAAvB,CAAR;IACAlC,CAAC,CAACN,IAAF,GAAS,UAAT;;IACA,IAAIT,OAAO,CAACgG,KAAR,IAAiB,EAArB,EAAyB;MACrBjF,CAAC,CAACgB,YAAF,CAAe,OAAf,EAAwB/B,OAAO,CAACgG,KAAhC;IACH;;IACD3E,OAAO,CAACgC,WAAR,CAAoBtC,CAApB;IACA,OAAOA,CAAC,CAACmF,KAAT;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,QAAhC,EAA0C;EACtC,IAAIC,KAAK,GAAGF,IAAI,CAACG,QAAL,CAAcC,MAA1B;EACAJ,IAAI,CAACK,UAAL,CAAgBJ,QAAQ,GAAG,IAA3B,EAAiCC,KAAjC;EACA,OAAOF,IAAI,CAACG,QAAL,CAAcD,KAAd,CAAP;AACH;AACD;AACA;AACA;AACA;AACA;;;AACA,IAAII,SAAS;AAAG;AAAe,UAAUC,MAAV,EAAkB;EAC7C/G,SAAS,CAAC8G,SAAD,EAAYC,MAAZ,CAAT;EACA;AACJ;AACA;AACA;AACA;AACA;;;EACI,SAASD,SAAT,CAAmBrF,OAAnB,EAA4BgF,QAA5B,EAAsCO,MAAtC,EAA8C;IAC1C,IAAIC,KAAK,GAAG,IAAZ;;IACA,IAAIT,IAAI,GAAGN,aAAa,CAACzE,OAAD,CAAxB,CAF0C,CAG1C;;IACAwF,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkB,YAAY;MAClC;MACA,IAAIR,KAAK,GAAGpG,MAAM,CAAC6G,OAAP,CAAeX,IAAI,CAACG,QAApB,EAA8BM,KAAK,CAACG,KAApC,CAAZ;;MACA,IAAIV,KAAK,KAAK,CAAC,CAAf,EAAkB;QACd,MAAM,IAAIW,KAAJ,CAAU,6BAAV,CAAN;MACH,CAFD,MAGK;QACD;QACAb,IAAI,CAACc,UAAL,CAAgBZ,KAAhB;MACH;IACJ,CAVO,KAUF,IAVN;IAWAO,KAAK,CAACG,KAAN,GAAcb,gBAAgB,CAACC,IAAD,EAAOC,QAAP,CAA9B;IACApG,OAAO,CAACyB,IAAR,CAAakF,MAAb,EAAqB,UAAUO,GAAV,EAAe5E,KAAf,EAAsB;MACvCsE,KAAK,CAACxE,QAAN,CAAe8E,GAAf,EAAoB5E,KAApB;IACH,CAFD;IAGA,OAAOsE,KAAP;EACH;;EACD3C,MAAM,CAACkD,cAAP,CAAsBV,SAAS,CAACW,SAAhC,EAA2C,UAA3C,EAAuD;IACnD;AACR;AACA;IACQC,GAAG,EAAE,YAAY;MACb,OAAO,KAAKN,KAAL,CAAWO,YAAlB;IACH,CANkD;;IAOnD;AACR;AACA;AACA;AACA;AACA;AACA;IACQC,GAAG,EAAE,UAAUnB,QAAV,EAAoB;MACrB,KAAKW,KAAL,CAAWO,YAAX,GAA0BlB,QAA1B;IACH,CAhBkD;IAiBnDoB,UAAU,EAAE,IAjBuC;IAkBnDC,YAAY,EAAE;EAlBqC,CAAvD;EAoBA;AACJ;AACA;AACA;AACA;AACA;;EACIhB,SAAS,CAACW,SAAV,CAAoBM,oBAApB,GAA2C,UAAUhG,IAAV,EAAgBY,KAAhB,EAAuB;IAC9D,IAAIC,KAAK,GAAG,KAAKwE,KAAL,CAAWxE,KAAvB;IACAA,KAAK,CAACoF,WAAN,CAAkB,aAAajG,IAA/B,EAAqCY,KAArC,EAA4C,EAA5C;IACAC,KAAK,CAACoF,WAAN,CAAkB,UAAUjG,IAA5B,EAAkCY,KAAlC,EAAyC,EAAzC;IACAC,KAAK,CAACoF,WAAN,CAAkB,SAASjG,IAA3B,EAAiCY,KAAjC,EAAwC,EAAxC;IACAC,KAAK,CAACoF,WAAN,CAAkB,QAAQjG,IAA1B,EAAgCY,KAAhC,EAAuC,EAAvC;IACAC,KAAK,CAACoF,WAAN,CAAkBjG,IAAlB,EAAwBY,KAAxB,EAA+B,EAA/B;EACH,CAPD;EAQA;AACJ;AACA;AACA;AACA;AACA;;;EACImE,SAAS,CAACW,SAAV,CAAoBhF,QAApB,GAA+B,UAAUV,IAAV,EAAgBY,KAAhB,EAAuB;IAClD,IAAIZ,IAAI,KAAK,YAAb,EAA2B;MACvB,KAAKgG,oBAAL,CAA0BhG,IAA1B,EAAgCY,KAAhC;IACH,CAFD,MAGK;MACD,KAAKyE,KAAL,CAAWxE,KAAX,CAAiBoF,WAAjB,CAA6BjG,IAA7B,EAAmCY,KAAnC,EAA0C,EAA1C;IACH;EACJ,CAPD;;EAQA,OAAOmE,SAAP;AACH,CA9E8B,CA8E7B7G,QA9E6B,CAA/B;;AA+EA,SAAS6G,SAAT;AACA;AACA;AACA;AACA;AACA;;AACA,IAAImB,OAAO,GAAG,CAAd;AACA;AACA;AACA;AACA;;AACA,IAAIC,UAAU;AAAG;AAAe,UAAUnB,MAAV,EAAkB;EAC9C/G,SAAS,CAACkI,UAAD,EAAanB,MAAb,CAAT;EACA;AACJ;AACA;AACA;AACA;AACA;;;EACI,SAASmB,UAAT,CAAoBzG,OAApB,EAA6BuF,MAA7B,EAAqCjF,IAArC,EAA2C;IACvC,IAAIkF,KAAK,GAAG,IAAZ;;IACA,IAAIvF,SAAS,GAAI,CAACnB,KAAK,CAAC4F,QAAN,CAAepE,IAAf,CAAD,CACb;IADa,EAEX,aAAc,EAAEkG,OAAhB,GAA2B,IAFhB,GAGXlG,IAHN;IAIAkF,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBzF,OAAlB,EAA2B,MAAMC,SAAjC,EAA4CsF,MAA5C,KAAuD,IAA/D;IACAC,KAAK,CAACkB,UAAN,GAAmBzG,SAAnB;IACA,OAAOuF,KAAP;EACH;;EACD3C,MAAM,CAACkD,cAAP,CAAsBU,UAAU,CAACT,SAAjC,EAA4C,WAA5C,EAAyD;IACrD;AACR;AACA;IACQC,GAAG,EAAE,YAAY;MACb,OAAO,KAAKS,UAAZ;IACH,CANoD;;IAOrD;AACR;AACA;AACA;AACA;IACQP,GAAG,EAAE,UAAU7F,IAAV,EAAgB;MACjB,KAAKoG,UAAL,GAAkBpG,IAAlB;MACA,KAAK0E,QAAL,GAAgB,MAAM1E,IAAtB;IACH,CAfoD;IAgBrD8F,UAAU,EAAE,IAhByC;IAiBrDC,YAAY,EAAE;EAjBuC,CAAzD;EAmBA;AACJ;AACA;AACA;;EACII,UAAU,CAACT,SAAX,CAAqBW,QAArB,GAAgC,YAAY;IACxC,OAAO,KAAKD,UAAZ;EACH,CAFD;;EAGA,OAAOD,UAAP;AACH,CA7C+B,CA6C9BpB,SA7C8B,CAAhC;;AA8CA,SAASoB,UAAT;AACA,OAAO,SAASG,KAAT,CAAeC,CAAf,EAAkB;EACrB,IAAIlH,QAAQ,CAACmH,UAAT,KAAwB,SAA5B,EAAuC;IACnCD,CAAC;EACJ,CAFD,MAGK;IACD,IAAIE,UAAU,GAAG,YAAY;MACzB,IAAIpH,QAAQ,CAACmH,UAAT,KAAwB,SAA5B,EAAuC;QACnCnH,QAAQ,CAACL,mBAAT,CAA6B,kBAA7B,EAAiDyH,UAAjD;QACAF,CAAC;MACJ;IACJ,CALD;;IAMAlH,QAAQ,CAACT,gBAAT,CAA0B,kBAA1B,EAA8C6H,UAA9C;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,QAAT,CAAkBhH,OAAlB,EAA2B;EAC9B;EACA,IAAIiH,IAAI,GAAG7F,gBAAgB,CAACpB,OAAD,EAAU,aAAV,CAA3B;;EACA,IAAI,CAACiH,IAAL,EAAW;IACP;IACA,IAAIC,QAAQ,GAAGlH,OAAO,CAACmH,aAAR,IAAyBnH,OAAO,CAACmD,UAAhD;;IACA,IAAI+D,QAAJ,EAAc;MACV,OAAOF,QAAQ,CAACE,QAAD,CAAf;IACH,CAFD,MAGK;MACD,OAAOE,SAAP;IACH;EACJ,CATD,MAUK;IACD,OAAOH,IAAP;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASI,YAAT,CAAsBrH,OAAtB,EAA+B;EAClC;EACA,IAAIiH,IAAI,GAAG7F,gBAAgB,CAACpB,OAAD,EAAU,WAAV,CAA3B;;EACA,IAAI,CAACiH,IAAL,EAAW;IACP;IACA,IAAIK,QAAQ,GAAGtH,OAAO,CAACmH,aAAR,IAAyBnH,OAAO,CAACmD,UAAhD;;IACA,IAAImE,QAAJ,EAAc;MACV,OAAOD,YAAY,CAACC,QAAD,CAAnB;IACH,CAFD,MAGK;MACD,OAAOF,SAAP;IACH;EACJ,CATD,MAUK;IACD,OAAOH,IAAP;EACH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASM,QAAT,CAAkBvH,OAAlB,EAA2B;EAC9B,OAAQA,OAAO,CAACwH,YAAR,KAAyB,IAAjC;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,mBAAT,CAA6BjI,EAA7B,EAAiCkI,cAAjC,EAAiD;EACpD;EACA,IAAIxD,IAAI,GAAG1E,EAAE,CAAC2E,qBAAH,EAAX,CAFoD,CAGpD;;EACA,IAAIwD,OAAO,GAAG7I,KAAK,CAAC8I,OAAN,CAAcF,cAAd,IAAgCA,cAAhC,GAAiDA,cAAc,GAAG,CAACA,cAAD,CAAH,GAAsB,EAAnG,CAJoD,CAKpD;;EACA,IAAIC,OAAO,CAACxC,MAAZ,EAAoB;IAChB,KAAK,IAAI0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACxC,MAA5B,EAAoC0C,CAAC,EAArC,EAAyC;MACrC,IAAIjE,MAAM,GAAG+D,OAAO,CAACE,CAAD,CAApB,CADqC,CAErC;;MACA,IAAI,CAACJ,mBAAmB,CAAC7D,MAAD,CAAxB,EAAkC;QAC9B,OAAO,KAAP;MACH,CALoC,CAMrC;;;MACA,IAAIkE,YAAY,GAAGlE,MAAM,CAACO,qBAAP,EAAnB;;MACA,IAAID,IAAI,CAACpC,GAAL,IAAY,CAAZ,IACAoC,IAAI,CAACnC,IAAL,IAAa,CADb,IAEAmC,IAAI,CAACpC,GAAL,IAAagG,YAAY,CAAChG,GAAb,GAAmBgG,YAAY,CAACC,MAF7C,IAGA7D,IAAI,CAACnC,IAAL,IAAc+F,YAAY,CAAC/F,IAAb,GAAoB+F,YAAY,CAACE,KAHnD,EAG2D;QACvD,OAAO,IAAP;MACH;IACJ;;IACD,OAAO,KAAP;EACH;;EACD,OAAQ9D,IAAI,CAACpC,GAAL,IAAY,CAAZ,IACJoC,IAAI,CAACnC,IAAL,IAAa,CADT,IAEJmC,IAAI,CAACpC,GAAL,KAAamG,MAAM,CAACC,WAAP,IAAsBvI,QAAQ,CAACwI,eAAT,CAAyBC,YAA5D,CAFI,IAGJlE,IAAI,CAACnC,IAAL,KAAckG,MAAM,CAACI,UAAP,IAAqB1I,QAAQ,CAACwI,eAAT,CAAyBG,WAA5D,CAHJ;AAIH"},"metadata":{},"sourceType":"module"}