{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/overlay/ui.overlay.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth, getOuterHeight } from \"../../core/utils/size\";\nimport fx from \"../../animation/fx\";\nimport registerComponent from \"../../core/component_registrator\";\nimport devices from \"../../core/devices\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { getPublicElement } from \"../../core/element\";\nimport $ from \"../../core/renderer\";\nimport { EmptyTemplate } from \"../../core/templates/empty_template\";\nimport { noop } from \"../../core/utils/common\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { contains, resetActiveElement } from \"../../core/utils/dom\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\nimport { isFunction, isObject, isPromise, isWindow } from \"../../core/utils/type\";\nimport { changeCallback } from \"../../core/utils/view_port\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nimport errors from \"../../core/errors\";\nimport uiErrors from \"../widget/ui.errors\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { move as dragEventMove } from \"../../events/drag\";\nimport pointerEvents from \"../../events/pointer\";\nimport { keyboard } from \"../../events/short\";\nimport { addNamespace, isCommandKeyPressed, normalizeKeyName } from \"../../events/utils/index\";\nimport { triggerHidingEvent, triggerResizeEvent, triggerShownEvent } from \"../../events/visibility_change\";\nimport { hideCallback as hideTopOverlayCallback } from \"../../mobile/hide_callback\";\nimport { tabbable } from \"../widget/selectors\";\nimport Widget from \"../widget/ui.widget\";\nimport browser from \"../../core/utils/browser\";\nimport * as zIndexPool from \"./z_index\";\nimport { OverlayPositionController, OVERLAY_POSITION_ALIASES } from \"./overlay_position_controller\";\nvar ready = readyCallbacks.add;\nvar window = getWindow();\nvar viewPortChanged = changeCallback;\nvar OVERLAY_CLASS = \"dx-overlay\";\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\nvar OVERLAY_STACK = [];\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\nvar TAB_KEY = \"tab\";\nready(() => {\n  eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\n    for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\nvar Overlay = Widget.inherit({\n  _supportedKeys: function () {\n    return extend(this.callBase(), {\n      escape: function () {\n        this.hide();\n      }\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      wrapperAttr: {},\n      position: extend({}, OVERLAY_POSITION_ALIASES.center),\n      width: \"80vw\",\n      minWidth: null,\n      maxWidth: null,\n      height: \"80vh\",\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            opacity: 1,\n            scale: 1\n          },\n          to: {\n            opacity: 0,\n            scale: .55\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      hideOnOutsideClick: false,\n      copyRootClassesToWrapper: false,\n      _ignoreCopyRootClassesToWrapperDeprecation: false,\n      _ignoreElementAttrDeprecation: false,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      innerOverlay: false,\n      restorePosition: true,\n      container: void 0,\n      visualContainer: void 0,\n      hideTopOverlayHandler: () => {\n        this.hide();\n      },\n      hideOnParentScroll: false,\n      onPositioned: null,\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true,\n      _fixWrapperPosition: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !hasWindow();\n      },\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    extend(this._optionsByReference, {\n      animation: true\n    });\n  },\n  $wrapper: function () {\n    return this._$wrapper;\n  },\n  _eventBindingTarget: function () {\n    return this._$content;\n  },\n\n  _setDeprecatedOptions() {\n    this.callBase();\n    extend(this._deprecatedOptions, {\n      closeOnOutsideClick: {\n        since: \"22.1\",\n        alias: \"hideOnOutsideClick\"\n      }\n    });\n  },\n\n  ctor: function (element, options) {\n    this.callBase(element, options);\n\n    if (options) {\n      if (options.copyRootClassesToWrapper && !options._ignoreCopyRootClassesToWrapperDeprecation) {\n        this._logDeprecatedOptionWarning(\"copyRootClassesToWrapper\", {\n          since: \"21.2\",\n          message: 'Use the \"wrapperAttr\" option instead'\n        });\n      }\n\n      if (options.elementAttr && !options._ignoreElementAttrDeprecation) {\n        this._logDeprecatedOptionWarning(\"elementAttr\", {\n          since: \"21.2\",\n          message: 'Use the \"wrapperAttr\" option instead'\n        });\n      }\n    }\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initActions();\n\n    this._initHideOnOutsideClickHandler();\n\n    this._initTabTerminatorHandler();\n\n    this._customWrapperClass = null;\n    this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\n    this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\n\n    this._initInnerOverlayClass();\n\n    var $element = this.$element();\n\n    if (this.option(\"copyRootClassesToWrapper\")) {\n      this._$wrapper.addClass($element.attr(\"class\"));\n    }\n\n    $element.addClass(OVERLAY_CLASS);\n\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n\n    this._toggleViewPortSubscription(true);\n\n    this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"));\n\n    this._parentsScrollSubscriptionInfo = {\n      handler: e => {\n        this._hideOnParentsScrollHandler(e);\n      }\n    };\n    this.warnPositionAsFunction();\n  },\n\n  warnPositionAsFunction() {\n    if (isFunction(this.option(\"position\"))) {\n      errors.log(\"W0018\");\n    }\n  },\n\n  _initInnerOverlayClass: function () {\n    this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"));\n  },\n  _initHideTopOverlayHandler: function (handler) {\n    this._hideTopOverlayHandler = handler;\n  },\n  _getActionsList: function () {\n    return [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onVisualPositionChanged\"];\n  },\n  _initActions: function () {\n    this._actions = {};\n\n    var actions = this._getActionsList();\n\n    each(actions, (_, action) => {\n      this._actions[action] = this._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || noop;\n    });\n  },\n  _initHideOnOutsideClickHandler: function () {\n    var _this = this;\n\n    this._proxiedDocumentDownHandler = function () {\n      return _this._documentDownHandler(...arguments);\n    };\n  },\n\n  _initMarkup() {\n    this.callBase();\n\n    this._renderWrapperAttributes();\n\n    this._initPositionController();\n  },\n\n  _documentDownHandler: function (e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n\n    var isAttachedTarget = $(window.document).is(e.target) || contains(window.document, e.target) || contains(window.document, e.target.getRootNode().host);\n    var isInnerOverlay = $(e.target).closest(\".\".concat(INNER_OVERLAY_CLASS)).length;\n    var outsideClick = isAttachedTarget && !isInnerOverlay && !(this._$content.is(e.target) || contains(this._$content.get(0), e.target));\n\n    if (outsideClick && this._shouldHideOnOutsideClick(e)) {\n      this._outsideClickHandler(e);\n    }\n\n    return this.option(\"propagateOutsideClick\");\n  },\n  _shouldHideOnOutsideClick: function (e) {\n    var {\n      hideOnOutsideClick: hideOnOutsideClick\n    } = this.option();\n\n    if (isFunction(hideOnOutsideClick)) {\n      return hideOnOutsideClick(e);\n    }\n\n    return hideOnOutsideClick;\n  },\n\n  _outsideClickHandler(e) {\n    if (this.option(\"shading\")) {\n      e.preventDefault();\n    }\n\n    this.hide();\n  },\n\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      content: new EmptyTemplate()\n    });\n\n    this.callBase();\n  },\n  _isTopOverlay: function () {\n    var overlayStack = this._overlayStack();\n\n    for (var i = overlayStack.length - 1; i >= 0; i--) {\n      var tabbableElements = overlayStack[i]._findTabbableBounds();\n\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n\n    return false;\n  },\n  _overlayStack: function () {\n    return OVERLAY_STACK;\n  },\n  _zIndexInitValue: function () {\n    return Overlay.baseZIndex();\n  },\n  _toggleViewPortSubscription: function (toggle) {\n    var _this2 = this;\n\n    viewPortChanged.remove(this._viewPortChangeHandle);\n\n    if (toggle) {\n      this._viewPortChangeHandle = function () {\n        _this2._viewPortChangeHandler(...arguments);\n      };\n\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  },\n  _viewPortChangeHandler: function () {\n    this._positionController.updateContainer(this.option(\"container\"));\n\n    this._refresh();\n  },\n\n  _renderWrapperAttributes() {\n    var {\n      wrapperAttr: wrapperAttr\n    } = this.option();\n    var attributes = extend({}, wrapperAttr);\n    var classNames = attributes.class;\n    delete attributes.class;\n    this.$wrapper().attr(attributes).removeClass(this._customWrapperClass).addClass(classNames);\n    this._customWrapperClass = classNames;\n  },\n\n  _renderVisibilityAnimate: function (visible) {\n    this._stopAnimation();\n\n    return visible ? this._show() : this._hide();\n  },\n  _getAnimationConfig: function () {\n    return this._getOptionValue(\"animation\", this);\n  },\n  _animateShowing: function () {\n    var _this$_getAnimationCo,\n        _showAnimation$start,\n        _showAnimation$comple,\n        _this3 = this;\n\n    var animation = null !== (_this$_getAnimationCo = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo ? _this$_getAnimationCo : {};\n\n    var showAnimation = this._normalizeAnimation(animation.show, \"to\");\n\n    var startShowAnimation = null !== (_showAnimation$start = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.start) && void 0 !== _showAnimation$start ? _showAnimation$start : noop;\n    var completeShowAnimation = null !== (_showAnimation$comple = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.complete) && void 0 !== _showAnimation$comple ? _showAnimation$comple : noop;\n\n    this._animate(showAnimation, function () {\n      if (_this3._isAnimationPaused) {\n        return;\n      }\n\n      if (_this3.option(\"focusStateEnabled\")) {\n        eventsEngine.trigger(_this3._focusTarget(), \"focus\");\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      completeShowAnimation.call(_this3, ...args);\n      _this3._showAnimationProcessing = false;\n      _this3._isHidden = false;\n\n      _this3._actions.onShown();\n\n      _this3._toggleSafariScrolling();\n\n      _this3._showingDeferred.resolve();\n    }, function () {\n      if (_this3._isAnimationPaused) {\n        return;\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      startShowAnimation.call(_this3, ...args);\n      _this3._showAnimationProcessing = true;\n    });\n  },\n  _processShowingHidingCancel: function (cancelArg, applyFunction, cancelFunction) {\n    if (isPromise(cancelArg)) {\n      cancelArg.then(shouldCancel => {\n        if (shouldCancel) {\n          cancelFunction();\n        } else {\n          applyFunction();\n        }\n      }).catch(() => applyFunction());\n    } else {\n      cancelArg ? cancelFunction() : applyFunction();\n    }\n  },\n  _show: function () {\n    this._showingDeferred = new Deferred();\n    this._parentHidden = this._isParentHidden();\n\n    this._showingDeferred.done(() => {\n      delete this._parentHidden;\n    });\n\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return this._showingDeferred.resolve();\n    }\n\n    if (this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = true;\n\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n\n      this._showingDeferred.reject();\n    } else {\n      var show = () => {\n        this._stopAnimation();\n\n        this._toggleVisibility(true);\n\n        this._$content.css(\"visibility\", \"hidden\");\n\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, false);\n\n        this._updateZIndexStackPosition(true);\n\n        this._positionController.openingHandled();\n\n        this._renderContent();\n\n        var showingArgs = {\n          cancel: false\n        };\n\n        this._actions.onShowing(showingArgs);\n\n        this._processShowingHidingCancel(showingArgs.cancel, () => {\n          this._$content.css(\"visibility\", \"\");\n\n          this._renderVisibility(true);\n\n          this._animateShowing();\n        }, () => {\n          this._toggleVisibility(false);\n\n          this._$content.css(\"visibility\", \"\");\n\n          this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\n\n          this._isShowingActionCanceled = true;\n\n          this._moveFromContainer();\n\n          this.option(\"visible\", false);\n\n          this._showingDeferred.resolve();\n        });\n      };\n\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n\n    return this._showingDeferred.promise();\n  },\n  _normalizeAnimation: function (showHideConfig, direction) {\n    if (showHideConfig) {\n      showHideConfig = extend({\n        type: \"slide\",\n        skipElementInitialStyles: true\n      }, showHideConfig);\n\n      if (isObject(showHideConfig[direction])) {\n        extend(showHideConfig[direction], {\n          position: this._positionController.position\n        });\n      }\n    }\n\n    return showHideConfig;\n  },\n  _animateHiding: function () {\n    var _this$_getAnimationCo2,\n        _hideAnimation$start,\n        _hideAnimation$comple,\n        _this4 = this;\n\n    var animation = null !== (_this$_getAnimationCo2 = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo2 ? _this$_getAnimationCo2 : {};\n\n    var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\n\n    var startHideAnimation = null !== (_hideAnimation$start = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.start) && void 0 !== _hideAnimation$start ? _hideAnimation$start : noop;\n    var completeHideAnimation = null !== (_hideAnimation$comple = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.complete) && void 0 !== _hideAnimation$comple ? _hideAnimation$comple : noop;\n\n    this._animate(hideAnimation, function () {\n      var _this4$_actions;\n\n      _this4._$content.css(\"pointerEvents\", \"\");\n\n      _this4._renderVisibility(false);\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      completeHideAnimation.call(_this4, ...args);\n      _this4._hideAnimationProcessing = false;\n      null === (_this4$_actions = _this4._actions) || void 0 === _this4$_actions ? void 0 : _this4$_actions.onHidden();\n\n      _this4._hidingDeferred.resolve();\n    }, function () {\n      _this4._$content.css(\"pointerEvents\", \"none\");\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      startHideAnimation.call(_this4, ...args);\n      _this4._hideAnimationProcessing = true;\n    });\n  },\n  _hide: function () {\n    if (!this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = false;\n    this._hidingDeferred = new Deferred();\n    var hidingArgs = {\n      cancel: false\n    };\n\n    if (this._isShowingActionCanceled) {\n      delete this._isShowingActionCanceled;\n\n      this._hidingDeferred.reject();\n    } else {\n      this._actions.onHiding(hidingArgs);\n\n      this._toggleSafariScrolling();\n\n      this._processShowingHidingCancel(hidingArgs.cancel, () => {\n        this._forceFocusLost();\n\n        this._toggleShading(false);\n\n        this._toggleSubscriptions(false);\n\n        this._stopShowTimer();\n\n        this._animateHiding();\n      }, () => {\n        this._isHidingActionCanceled = true;\n        this.option(\"visible\", true);\n\n        this._hidingDeferred.resolve();\n      });\n    }\n\n    return this._hidingDeferred.promise();\n  },\n  _forceFocusLost: function () {\n    var activeElement = domAdapter.getActiveElement();\n    var shouldResetActiveElement = !!this._$content.find(activeElement).length;\n\n    if (shouldResetActiveElement) {\n      resetActiveElement();\n    }\n  },\n  _animate: function (animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || noop;\n      fx.animate(this._$content, extend({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  },\n  _stopAnimation: function () {\n    fx.stop(this._$content, true);\n  },\n  _renderVisibility: function (visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n\n    this._currentVisible = visible;\n\n    this._stopAnimation();\n\n    if (!visible) {\n      triggerHidingEvent(this._$content);\n    }\n\n    if (visible) {\n      this._checkContainerExists();\n\n      this._moveToContainer();\n\n      this._renderGeometry();\n\n      triggerShownEvent(this._$content);\n      triggerResizeEvent(this._$content);\n    } else {\n      this._toggleVisibility(visible);\n\n      this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\n\n      this._updateZIndexStackPosition(visible);\n\n      this._moveFromContainer();\n    }\n\n    this._toggleShading(visible);\n\n    this._toggleSubscriptions(visible);\n  },\n  _updateZIndexStackPosition: function (pushToStack) {\n    var overlayStack = this._overlayStack();\n\n    var index = overlayStack.indexOf(this);\n\n    if (pushToStack) {\n      if (-1 === index) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else if (-1 !== index) {\n      overlayStack.splice(index, 1);\n      zIndexPool.remove(this._zIndex);\n    }\n  },\n  _toggleShading: function (visible) {\n    this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\n\n    this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\n\n    this._toggleTabTerminator(visible && this.option(\"shading\"));\n  },\n  _initTabTerminatorHandler: function () {\n    var _this5 = this;\n\n    this._proxiedTabTerminatorHandler = function () {\n      _this5._tabKeyHandler(...arguments);\n    };\n  },\n  _toggleTabTerminator: function (enabled) {\n    var eventName = addNamespace(\"keydown\", this.NAME);\n\n    if (enabled) {\n      eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  },\n  _findTabbableBounds: function () {\n    var $elements = this._$wrapper.find(\"*\");\n\n    var elementsCount = $elements.length - 1;\n    var result = {\n      first: null,\n      last: null\n    };\n\n    for (var i = 0; i <= elementsCount; i++) {\n      if (!result.first && $elements.eq(i).is(tabbable)) {\n        result.first = $elements.eq(i);\n      }\n\n      if (!result.last && $elements.eq(elementsCount - i).is(tabbable)) {\n        result.last = $elements.eq(elementsCount - i);\n      }\n\n      if (result.first && result.last) {\n        break;\n      }\n    }\n\n    return result;\n  },\n  _tabKeyHandler: function (e) {\n    if (normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\n      return;\n    }\n\n    var tabbableElements = this._findTabbableBounds();\n\n    var $firstTabbable = tabbableElements.first;\n    var $lastTabbable = tabbableElements.last;\n    var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\n    var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\n    var isEmptyTabList = 0 === tabbableElements.length;\n    var isOutsideTarget = !contains(this._$wrapper.get(0), e.target);\n\n    if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\n      e.preventDefault();\n      var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n      eventsEngine.trigger($focusElement, \"focusin\");\n      eventsEngine.trigger($focusElement, \"focus\");\n    }\n  },\n  _toggleSubscriptions: function (enabled) {\n    if (hasWindow()) {\n      this._toggleHideTopOverlayCallback(enabled);\n\n      this._toggleHideOnParentsScrollSubscription(enabled);\n    }\n  },\n  _toggleHideTopOverlayCallback: function (subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n\n    if (subscribe) {\n      hideTopOverlayCallback.add(this._hideTopOverlayHandler);\n    } else {\n      hideTopOverlayCallback.remove(this._hideTopOverlayHandler);\n    }\n  },\n  _toggleHideOnParentsScrollSubscription: function (needSubscribe) {\n    var _this$_parentsScrollS;\n\n    var scrollEvent = addNamespace(\"scroll\", this.NAME);\n    var {\n      prevTargets: prevTargets,\n      handler: handler\n    } = null !== (_this$_parentsScrollS = this._parentsScrollSubscriptionInfo) && void 0 !== _this$_parentsScrollS ? _this$_parentsScrollS : {};\n    eventsEngine.off(prevTargets, scrollEvent, handler);\n    var closeOnScroll = this.option(\"hideOnParentScroll\");\n\n    if (needSubscribe && closeOnScroll) {\n      var $parents = this._hideOnParentScrollTarget().parents();\n\n      if (\"desktop\" === devices.real().deviceType) {\n        $parents = $parents.add(window);\n      }\n\n      eventsEngine.on($parents, scrollEvent, handler);\n      this._parentsScrollSubscriptionInfo.prevTargets = $parents;\n    }\n  },\n  _hideOnParentsScrollHandler: function (e) {\n    var closeHandled = false;\n    var closeOnScroll = this.option(\"hideOnParentScroll\");\n\n    if (isFunction(closeOnScroll)) {\n      closeHandled = closeOnScroll(e);\n    }\n\n    if (!closeHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  },\n  _hideOnParentScrollTarget: function () {\n    return this._$wrapper;\n  },\n  _render: function () {\n    this.callBase();\n\n    this._appendContentToElement();\n\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  },\n  _appendContentToElement: function () {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  },\n  _renderContent: function () {\n    var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n\n    var isParentHidden = this.option(\"visible\") && this._isParentHidden();\n\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n\n    this._contentAlreadyRendered = true;\n\n    this._appendContentToElement();\n\n    this.callBase();\n  },\n  _isParentHidden: function () {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n\n    var $parent = this.$element().parent();\n\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n\n    var isHidden = false;\n    $parent.add($parent.parents()).each(function () {\n      var $element = $(this);\n\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !domAdapter.getBody().contains($parent.get(0));\n  },\n  _renderContentImpl: function () {\n    var whenContentRendered = new Deferred();\n    var contentTemplateOption = this.option(\"contentTemplate\");\n\n    var contentTemplate = this._getTemplate(contentTemplateOption);\n\n    var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\n    contentTemplate && contentTemplate.render({\n      container: getPublicElement(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: () => {\n        whenContentRendered.resolve();\n\n        if (this.option(\"templatesRenderAsynchronously\")) {\n          this._dimensionChanged();\n        }\n      }\n    });\n\n    this._renderScrollTerminator();\n\n    whenContentRendered.done(() => {\n      if (this.option(\"visible\")) {\n        this._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  },\n\n  _getPositionControllerConfig() {\n    var {\n      container: container,\n      visualContainer: visualContainer,\n      _fixWrapperPosition: _fixWrapperPosition,\n      restorePosition: restorePosition\n    } = this.option();\n    return {\n      container: container,\n      visualContainer: visualContainer,\n      $root: this.$element(),\n      $content: this._$content,\n      $wrapper: this._$wrapper,\n      onPositioned: this._actions.onPositioned,\n      onVisualPositionChanged: this._actions.onVisualPositionChanged,\n      restorePosition: restorePosition,\n      _fixWrapperPosition: _fixWrapperPosition\n    };\n  },\n\n  _initPositionController() {\n    this._positionController = new OverlayPositionController(this._getPositionControllerConfig());\n  },\n\n  _renderScrollTerminator: function () {\n    var $scrollTerminator = this._$wrapper;\n    var terminatorEventName = addNamespace(dragEventMove, this.NAME);\n    eventsEngine.off($scrollTerminator, terminatorEventName);\n    eventsEngine.on($scrollTerminator, terminatorEventName, {\n      validate: function () {\n        return true;\n      },\n      getDirection: function () {\n        return \"both\";\n      },\n      _toggleGestureCover: function (toggle) {\n        if (!toggle) {\n          this._toggleGestureCoverImpl(toggle);\n        }\n      },\n      _clearSelection: noop,\n      isNative: true\n    }, e => {\n      var originalEvent = e.originalEvent.originalEvent;\n      var {\n        type: type\n      } = originalEvent || {};\n      var isWheel = \"wheel\" === type;\n      var isMouseMove = \"mousemove\" === type;\n      var isScrollByWheel = isWheel && !isCommandKeyPressed(e);\n      e._cancelPreventDefault = true;\n\n      if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\n        e.preventDefault();\n      }\n    });\n  },\n  _moveFromContainer: function () {\n    this._$content.appendTo(this.$element());\n\n    this._$wrapper.detach();\n  },\n\n  _checkContainerExists() {\n    var $wrapperContainer = this._positionController.$container;\n    var containerExists = $wrapperContainer.length > 0;\n\n    if (!containerExists) {\n      uiErrors.log(\"W1021\", this.NAME);\n    }\n  },\n\n  _moveToContainer: function () {\n    var $wrapperContainer = this._positionController.$container;\n\n    this._$wrapper.appendTo($wrapperContainer);\n\n    this._$content.appendTo(this._$wrapper);\n  },\n  _renderGeometry: function (options) {\n    var {\n      visible: visible\n    } = this.option();\n\n    if (visible && hasWindow()) {\n      this._stopAnimation();\n\n      this._renderGeometryImpl();\n    }\n  },\n  _renderGeometryImpl: function () {\n    this._positionController.updatePosition(this._getOptionValue(\"position\"));\n\n    this._renderWrapper();\n\n    this._renderDimensions();\n\n    this._renderPosition();\n  },\n\n  _renderPosition() {\n    this._positionController.positionContent();\n  },\n\n  _isAllWindowCovered: function () {\n    return isWindow(this._positionController.$visualContainer.get(0)) && this.option(\"shading\");\n  },\n  _toggleSafariScrolling: function () {\n    var visible = this.option(\"visible\");\n    var $body = $(domAdapter.getBody());\n    var isIosSafari = \"ios\" === devices.real().platform && browser.safari;\n\n    var isAllWindowCovered = this._isAllWindowCovered();\n\n    var isScrollingPrevented = $body.hasClass(PREVENT_SAFARI_SCROLLING_CLASS);\n    var shouldPreventScrolling = !isScrollingPrevented && visible && isAllWindowCovered;\n    var shouldEnableScrolling = isScrollingPrevented && (!visible || !isAllWindowCovered || this._disposed);\n\n    if (isIosSafari) {\n      if (shouldEnableScrolling) {\n        $body.removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        window.scrollTo(0, this._cachedBodyScrollTop);\n        this._cachedBodyScrollTop = void 0;\n      } else if (shouldPreventScrolling) {\n        this._cachedBodyScrollTop = window.pageYOffset;\n        $body.addClass(PREVENT_SAFARI_SCROLLING_CLASS);\n      }\n    }\n  },\n  _renderWrapper: function () {\n    this._positionController.styleWrapperPosition();\n\n    this._renderWrapperDimensions();\n\n    this._positionController.positionWrapper();\n  },\n  _renderWrapperDimensions: function () {\n    var $visualContainer = this._positionController.$visualContainer;\n    var documentElement = domAdapter.getDocumentElement();\n    var isVisualContainerWindow = isWindow($visualContainer.get(0));\n    var wrapperWidth = isVisualContainerWindow ? documentElement.clientWidth : getOuterWidth($visualContainer);\n    var wrapperHeight = isVisualContainerWindow ? window.innerHeight : getOuterHeight($visualContainer);\n\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  },\n  _renderDimensions: function () {\n    var content = this._$content.get(0);\n\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  },\n  _focusTarget: function () {\n    return this._$content;\n  },\n  _attachKeyboardEvents: function () {\n    this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts));\n  },\n  _keyboardHandler: function (options) {\n    var e = options.originalEvent;\n    var $target = $(e.target);\n\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      this.callBase(...arguments);\n    }\n  },\n  _isVisible: function () {\n    return this.option(\"visible\");\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  },\n  _dimensionChanged: function () {\n    this._renderGeometry();\n  },\n  _clean: function () {\n    var options = this.option();\n\n    if (!this._contentAlreadyRendered && !options.isRenovated) {\n      this.$content().empty();\n    }\n\n    this._renderVisibility(false);\n\n    this._stopShowTimer();\n\n    this._cleanFocusState();\n  },\n\n  _stopShowTimer() {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n\n    this._asyncShowTimeout = null;\n  },\n\n  _dispose: function () {\n    fx.stop(this._$content, false);\n    clearTimeout(this._deferShowTimer);\n\n    this._toggleViewPortSubscription(false);\n\n    this._toggleSubscriptions(false);\n\n    this._updateZIndexStackPosition(false);\n\n    this._toggleTabTerminator(false);\n\n    this._actions = null;\n    this._parentsScrollSubscriptionInfo = null;\n    this.callBase();\n\n    this._toggleSafariScrolling();\n\n    this.option(\"visible\") && zIndexPool.remove(this._zIndex);\n\n    this._$wrapper.remove();\n\n    this._$content.remove();\n  },\n  _toggleRTLDirection: function (rtl) {\n    this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl);\n  },\n  _optionChanged: function (args) {\n    var value = args.value;\n\n    if (this._getActionsList().includes(args.name)) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"animation\":\n        break;\n\n      case \"shading\":\n        this._toggleShading(this.option(\"visible\"));\n\n        this._toggleSafariScrolling();\n\n        break;\n\n      case \"shadingColor\":\n        this._toggleShading(this.option(\"visible\"));\n\n        break;\n\n      case \"width\":\n      case \"height\":\n        this._renderGeometry();\n\n        break;\n\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n        this._renderGeometry();\n\n        break;\n\n      case \"position\":\n        this._positionController.updatePosition(this.option(\"position\"));\n\n        this._positionController.restorePositionOnNextRender(true);\n\n        this._renderGeometry();\n\n        this._toggleSafariScrolling();\n\n        break;\n\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(() => {\n          var _this$_animateDeferre;\n\n          return null === (_this$_animateDeferre = this._animateDeferred) || void 0 === _this$_animateDeferre ? void 0 : _this$_animateDeferre.resolveWith(this);\n        }).fail(() => {\n          var _this$_animateDeferre2;\n\n          return null === (_this$_animateDeferre2 = this._animateDeferred) || void 0 === _this$_animateDeferre2 ? void 0 : _this$_animateDeferre2.reject();\n        });\n\n        break;\n\n      case \"container\":\n        this._positionController.updateContainer(value);\n\n        this._invalidate();\n\n        this._toggleSafariScrolling();\n\n        break;\n\n      case \"visualContainer\":\n        this._positionController.updateVisualContainer(value);\n\n        this._renderWrapper();\n\n        this._toggleSafariScrolling();\n\n        break;\n\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n\n        break;\n\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n\n        this._clean();\n\n        this._invalidate();\n\n        break;\n\n      case \"hideTopOverlayHandler\":\n        this._toggleHideTopOverlayCallback(false);\n\n        this._initHideTopOverlayHandler(args.value);\n\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n\n        break;\n\n      case \"hideOnParentScroll\":\n        this._toggleHideOnParentsScrollSubscription(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnOutsideClick\":\n      case \"hideOnOutsideClick\":\n      case \"propagateOutsideClick\":\n        break;\n\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        this.callBase(args);\n        break;\n\n      case \"_fixWrapperPosition\":\n        this._positionController.fixWrapperPosition = value;\n        break;\n\n      case \"wrapperAttr\":\n        this._renderWrapperAttributes();\n\n        break;\n\n      case \"restorePosition\":\n        this._positionController.restorePosition = args.value;\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  toggle: function (showing) {\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n    var result = new Deferred();\n\n    if (showing === this.option(\"visible\")) {\n      return result.resolveWith(this, [showing]).promise();\n    }\n\n    var animateDeferred = new Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    animateDeferred.promise().done(() => {\n      delete this._animateDeferred;\n      result.resolveWith(this, [this.option(\"visible\")]);\n    }).fail(() => {\n      delete this._animateDeferred;\n      result.reject();\n    });\n    return result.promise();\n  },\n  $content: function () {\n    return this._$content;\n  },\n  show: function () {\n    return this.toggle(true);\n  },\n  hide: function () {\n    return this.toggle(false);\n  },\n  content: function () {\n    return getPublicElement(this._$content);\n  },\n  repaint: function () {\n    if (this._contentAlreadyRendered) {\n      this._positionController.restorePositionOnNextRender(true);\n\n      this._renderGeometry({\n        forceStopAnimation: true\n      });\n\n      triggerResizeEvent(this._$content);\n    } else {\n      this.callBase();\n    }\n  }\n});\n\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\n\nregisterComponent(\"dxOverlay\", Overlay);\nexport default Overlay;","map":{"version":3,"names":["getOuterWidth","getOuterHeight","fx","registerComponent","devices","domAdapter","getPublicElement","$","EmptyTemplate","noop","Deferred","contains","resetActiveElement","extend","each","readyCallbacks","isFunction","isObject","isPromise","isWindow","changeCallback","getWindow","hasWindow","errors","uiErrors","eventsEngine","move","dragEventMove","pointerEvents","keyboard","addNamespace","isCommandKeyPressed","normalizeKeyName","triggerHidingEvent","triggerResizeEvent","triggerShownEvent","hideCallback","hideTopOverlayCallback","tabbable","Widget","browser","zIndexPool","OverlayPositionController","OVERLAY_POSITION_ALIASES","ready","add","window","viewPortChanged","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","OVERLAY_STACK","PREVENT_SAFARI_SCROLLING_CLASS","TAB_KEY","subscribeGlobal","getDocument","down","e","i","length","_proxiedDocumentDownHandler","Overlay","inherit","_supportedKeys","callBase","escape","hide","_getDefaultOptions","activeStateEnabled","visible","deferRendering","shading","shadingColor","wrapperAttr","position","center","width","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","opacity","to","closeOnOutsideClick","hideOnOutsideClick","copyRootClassesToWrapper","_ignoreCopyRootClassesToWrapperDeprecation","_ignoreElementAttrDeprecation","onShowing","onShown","onHiding","onHidden","contentTemplate","innerOverlay","restorePosition","container","visualContainer","hideTopOverlayHandler","hideOnParentScroll","onPositioned","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_fixWrapperPosition","_defaultOptionsRules","concat","device","options","_setOptionsByReference","_optionsByReference","$wrapper","_$wrapper","_eventBindingTarget","_$content","_setDeprecatedOptions","_deprecatedOptions","since","alias","ctor","element","_logDeprecatedOptionWarning","message","elementAttr","_init","_initActions","_initHideOnOutsideClickHandler","_initTabTerminatorHandler","_customWrapperClass","addClass","_initInnerOverlayClass","$element","option","attr","_toggleViewPortSubscription","_initHideTopOverlayHandler","_parentsScrollSubscriptionInfo","handler","_hideOnParentsScrollHandler","warnPositionAsFunction","log","toggleClass","_hideTopOverlayHandler","_getActionsList","_actions","actions","_","action","_createActionByOption","excludeValidators","_this","_documentDownHandler","arguments","_initMarkup","_renderWrapperAttributes","_initPositionController","_showAnimationProcessing","_stopAnimation","isAttachedTarget","document","is","target","getRootNode","host","isInnerOverlay","closest","outsideClick","get","_shouldHideOnOutsideClick","_outsideClickHandler","preventDefault","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","content","_isTopOverlay","overlayStack","_overlayStack","tabbableElements","_findTabbableBounds","first","last","_zIndexInitValue","baseZIndex","toggle","_this2","remove","_viewPortChangeHandle","_viewPortChangeHandler","_positionController","updateContainer","_refresh","attributes","classNames","class","removeClass","_renderVisibilityAnimate","_show","_hide","_getAnimationConfig","_getOptionValue","_animateShowing","_this$_getAnimationCo","_showAnimation$start","_showAnimation$comple","_this3","showAnimation","_normalizeAnimation","startShowAnimation","start","completeShowAnimation","complete","_animate","_isAnimationPaused","trigger","_focusTarget","_len","args","Array","_key","call","_isHidden","_toggleSafariScrolling","_showingDeferred","resolve","_len2","_key2","_processShowingHidingCancel","cancelArg","applyFunction","cancelFunction","then","shouldCancel","catch","_parentHidden","_isParentHidden","done","_currentVisible","promise","_isHidingActionCanceled","reject","_toggleVisibility","css","_updateZIndexStackPosition","openingHandled","_renderContent","showingArgs","cancel","_renderVisibility","_isShowingActionCanceled","_moveFromContainer","_stopShowTimer","_asyncShowTimeout","setTimeout","showHideConfig","direction","skipElementInitialStyles","_animateHiding","_this$_getAnimationCo2","_hideAnimation$start","_hideAnimation$comple","_this4","hideAnimation","startHideAnimation","completeHideAnimation","_this4$_actions","_len3","_key3","_hideAnimationProcessing","_hidingDeferred","_len4","_key4","hidingArgs","_forceFocusLost","_toggleShading","_toggleSubscriptions","activeElement","getActiveElement","shouldResetActiveElement","find","completeCallback","startCallback","animate","stop","_checkContainerExists","_moveToContainer","_renderGeometry","pushToStack","index","indexOf","_zIndex","create","push","splice","_toggleTabTerminator","_this5","_proxiedTabTerminatorHandler","_tabKeyHandler","enabled","eventName","NAME","on","off","$elements","elementsCount","result","eq","$firstTabbable","$lastTabbable","isTabOnLast","shiftKey","isShiftTabOnFirst","isEmptyTabList","isOutsideTarget","$focusElement","_toggleHideTopOverlayCallback","_toggleHideOnParentsScrollSubscription","subscribe","needSubscribe","_this$_parentsScrollS","scrollEvent","prevTargets","closeOnScroll","$parents","_hideOnParentScrollTarget","parents","real","deviceType","closeHandled","_render","_appendContentToElement","parent","appendTo","shouldDeferRendering","isParentHidden","_contentAlreadyRendered","$parent","isHidden","getBody","_renderContentImpl","whenContentRendered","contentTemplateOption","_getTemplate","transclude","anonymousTemplateName","render","$content","noModel","onRendered","_dimensionChanged","_renderScrollTerminator","_getPositionControllerConfig","$root","onVisualPositionChanged","$scrollTerminator","terminatorEventName","validate","getDirection","_toggleGestureCover","_toggleGestureCoverImpl","_clearSelection","isNative","originalEvent","isWheel","isMouseMove","isScrollByWheel","_cancelPreventDefault","cancelable","detach","$wrapperContainer","$container","containerExists","_renderGeometryImpl","updatePosition","_renderWrapper","_renderDimensions","_renderPosition","positionContent","_isAllWindowCovered","$visualContainer","$body","isIosSafari","platform","safari","isAllWindowCovered","isScrollingPrevented","hasClass","shouldPreventScrolling","shouldEnableScrolling","_disposed","scrollTo","_cachedBodyScrollTop","pageYOffset","styleWrapperPosition","_renderWrapperDimensions","positionWrapper","documentElement","getDocumentElement","isVisualContainerWindow","wrapperWidth","clientWidth","wrapperHeight","innerHeight","_attachKeyboardEvents","_keyboardListenerId","opts","_keyboardHandler","$target","_isVisible","_visibilityChanged","_clean","isRenovated","empty","_cleanFocusState","clearTimeout","_dispose","_deferShowTimer","_toggleRTLDirection","rtl","_optionChanged","value","includes","name","restorePositionOnNextRender","_this$_animateDeferre","_animateDeferred","resolveWith","fail","_this$_animateDeferre2","_invalidate","updateVisualContainer","fixWrapperPosition","showing","animateDeferred","repaint","forceStopAnimation","zIndex","base"],"sources":["D:/APPLICATION/UI/UPL/NEW/node_modules/devextreme/esm/ui/overlay/ui.overlay.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/overlay/ui.overlay.js)\r\n * Version: 22.2.4\r\n * Build date: Thu Jan 19 2023\r\n *\r\n * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth,\r\n    getOuterHeight\r\n} from \"../../core/utils/size\";\r\nimport fx from \"../../animation/fx\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport devices from \"../../core/devices\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    EmptyTemplate\r\n} from \"../../core/templates/empty_template\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    contains,\r\n    resetActiveElement\r\n} from \"../../core/utils/dom\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\r\nimport {\r\n    isFunction,\r\n    isObject,\r\n    isPromise,\r\n    isWindow\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    changeCallback\r\n} from \"../../core/utils/view_port\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport errors from \"../../core/errors\";\r\nimport uiErrors from \"../widget/ui.errors\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    move as dragEventMove\r\n} from \"../../events/drag\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    keyboard\r\n} from \"../../events/short\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed,\r\n    normalizeKeyName\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    triggerHidingEvent,\r\n    triggerResizeEvent,\r\n    triggerShownEvent\r\n} from \"../../events/visibility_change\";\r\nimport {\r\n    hideCallback as hideTopOverlayCallback\r\n} from \"../../mobile/hide_callback\";\r\nimport {\r\n    tabbable\r\n} from \"../widget/selectors\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport browser from \"../../core/utils/browser\";\r\nimport * as zIndexPool from \"./z_index\";\r\nimport {\r\n    OverlayPositionController,\r\n    OVERLAY_POSITION_ALIASES\r\n} from \"./overlay_position_controller\";\r\nvar ready = readyCallbacks.add;\r\nvar window = getWindow();\r\nvar viewPortChanged = changeCallback;\r\nvar OVERLAY_CLASS = \"dx-overlay\";\r\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\r\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\r\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\r\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\r\nvar OVERLAY_STACK = [];\r\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\r\nvar TAB_KEY = \"tab\";\r\nready(() => {\r\n    eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, e => {\r\n        for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    })\r\n});\r\nvar Overlay = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            escape: function() {\r\n                this.hide()\r\n            }\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            wrapperAttr: {},\r\n            position: extend({}, OVERLAY_POSITION_ALIASES.center),\r\n            width: \"80vw\",\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: \"80vh\",\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    },\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            hideOnOutsideClick: false,\r\n            copyRootClassesToWrapper: false,\r\n            _ignoreCopyRootClassesToWrapperDeprecation: false,\r\n            _ignoreElementAttrDeprecation: false,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            innerOverlay: false,\r\n            restorePosition: true,\r\n            container: void 0,\r\n            visualContainer: void 0,\r\n            hideTopOverlayHandler: () => {\r\n                this.hide()\r\n            },\r\n            hideOnParentScroll: false,\r\n            onPositioned: null,\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true,\r\n            _fixWrapperPosition: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !hasWindow()\r\n            },\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    },\r\n    $wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _eventBindingTarget: function() {\r\n        return this._$content\r\n    },\r\n    _setDeprecatedOptions() {\r\n        this.callBase();\r\n        extend(this._deprecatedOptions, {\r\n            closeOnOutsideClick: {\r\n                since: \"22.1\",\r\n                alias: \"hideOnOutsideClick\"\r\n            }\r\n        })\r\n    },\r\n    ctor: function(element, options) {\r\n        this.callBase(element, options);\r\n        if (options) {\r\n            if (options.copyRootClassesToWrapper && !options._ignoreCopyRootClassesToWrapperDeprecation) {\r\n                this._logDeprecatedOptionWarning(\"copyRootClassesToWrapper\", {\r\n                    since: \"21.2\",\r\n                    message: 'Use the \"wrapperAttr\" option instead'\r\n                })\r\n            }\r\n            if (options.elementAttr && !options._ignoreElementAttrDeprecation) {\r\n                this._logDeprecatedOptionWarning(\"elementAttr\", {\r\n                    since: \"21.2\",\r\n                    message: 'Use the \"wrapperAttr\" option instead'\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions();\r\n        this._initHideOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._customWrapperClass = null;\r\n        this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\r\n        this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\r\n        this._initInnerOverlayClass();\r\n        var $element = this.$element();\r\n        if (this.option(\"copyRootClassesToWrapper\")) {\r\n            this._$wrapper.addClass($element.attr(\"class\"))\r\n        }\r\n        $element.addClass(OVERLAY_CLASS);\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        this._toggleViewPortSubscription(true);\r\n        this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"));\r\n        this._parentsScrollSubscriptionInfo = {\r\n            handler: e => {\r\n                this._hideOnParentsScrollHandler(e)\r\n            }\r\n        };\r\n        this.warnPositionAsFunction()\r\n    },\r\n    warnPositionAsFunction() {\r\n        if (isFunction(this.option(\"position\"))) {\r\n            errors.log(\"W0018\")\r\n        }\r\n    },\r\n    _initInnerOverlayClass: function() {\r\n        this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"))\r\n    },\r\n    _initHideTopOverlayHandler: function(handler) {\r\n        this._hideTopOverlayHandler = handler\r\n    },\r\n    _getActionsList: function() {\r\n        return [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onVisualPositionChanged\"]\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        var actions = this._getActionsList();\r\n        each(actions, (_, action) => {\r\n            this._actions[action] = this._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || noop\r\n        })\r\n    },\r\n    _initHideOnOutsideClickHandler: function() {\r\n        var _this = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return _this._documentDownHandler(...arguments)\r\n        }\r\n    },\r\n    _initMarkup() {\r\n        this.callBase();\r\n        this._renderWrapperAttributes();\r\n        this._initPositionController()\r\n    },\r\n    _documentDownHandler: function(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        var isAttachedTarget = $(window.document).is(e.target) || contains(window.document, e.target) || contains(window.document, e.target.getRootNode().host);\r\n        var isInnerOverlay = $(e.target).closest(\".\".concat(INNER_OVERLAY_CLASS)).length;\r\n        var outsideClick = isAttachedTarget && !isInnerOverlay && !(this._$content.is(e.target) || contains(this._$content.get(0), e.target));\r\n        if (outsideClick && this._shouldHideOnOutsideClick(e)) {\r\n            this._outsideClickHandler(e)\r\n        }\r\n        return this.option(\"propagateOutsideClick\")\r\n    },\r\n    _shouldHideOnOutsideClick: function(e) {\r\n        var {\r\n            hideOnOutsideClick: hideOnOutsideClick\r\n        } = this.option();\r\n        if (isFunction(hideOnOutsideClick)) {\r\n            return hideOnOutsideClick(e)\r\n        }\r\n        return hideOnOutsideClick\r\n    },\r\n    _outsideClickHandler(e) {\r\n        if (this.option(\"shading\")) {\r\n            e.preventDefault()\r\n        }\r\n        this.hide()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new EmptyTemplate\r\n        });\r\n        this.callBase()\r\n    },\r\n    _isTopOverlay: function() {\r\n        var overlayStack = this._overlayStack();\r\n        for (var i = overlayStack.length - 1; i >= 0; i--) {\r\n            var tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _overlayStack: function() {\r\n        return OVERLAY_STACK\r\n    },\r\n    _zIndexInitValue: function() {\r\n        return Overlay.baseZIndex()\r\n    },\r\n    _toggleViewPortSubscription: function(toggle) {\r\n        var _this2 = this;\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = function() {\r\n                _this2._viewPortChangeHandler(...arguments)\r\n            };\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    },\r\n    _viewPortChangeHandler: function() {\r\n        this._positionController.updateContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    },\r\n    _renderWrapperAttributes() {\r\n        var {\r\n            wrapperAttr: wrapperAttr\r\n        } = this.option();\r\n        var attributes = extend({}, wrapperAttr);\r\n        var classNames = attributes.class;\r\n        delete attributes.class;\r\n        this.$wrapper().attr(attributes).removeClass(this._customWrapperClass).addClass(classNames);\r\n        this._customWrapperClass = classNames\r\n    },\r\n    _renderVisibilityAnimate: function(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    },\r\n    _getAnimationConfig: function() {\r\n        return this._getOptionValue(\"animation\", this)\r\n    },\r\n    _animateShowing: function() {\r\n        var _this$_getAnimationCo, _showAnimation$start, _showAnimation$comple, _this3 = this;\r\n        var animation = null !== (_this$_getAnimationCo = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo ? _this$_getAnimationCo : {};\r\n        var showAnimation = this._normalizeAnimation(animation.show, \"to\");\r\n        var startShowAnimation = null !== (_showAnimation$start = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.start) && void 0 !== _showAnimation$start ? _showAnimation$start : noop;\r\n        var completeShowAnimation = null !== (_showAnimation$comple = null === showAnimation || void 0 === showAnimation ? void 0 : showAnimation.complete) && void 0 !== _showAnimation$comple ? _showAnimation$comple : noop;\r\n        this._animate(showAnimation, (function() {\r\n            if (_this3._isAnimationPaused) {\r\n                return\r\n            }\r\n            if (_this3.option(\"focusStateEnabled\")) {\r\n                eventsEngine.trigger(_this3._focusTarget(), \"focus\")\r\n            }\r\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n                args[_key] = arguments[_key]\r\n            }\r\n            completeShowAnimation.call(_this3, ...args);\r\n            _this3._showAnimationProcessing = false;\r\n            _this3._isHidden = false;\r\n            _this3._actions.onShown();\r\n            _this3._toggleSafariScrolling();\r\n            _this3._showingDeferred.resolve()\r\n        }), (function() {\r\n            if (_this3._isAnimationPaused) {\r\n                return\r\n            }\r\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n                args[_key2] = arguments[_key2]\r\n            }\r\n            startShowAnimation.call(_this3, ...args);\r\n            _this3._showAnimationProcessing = true\r\n        }))\r\n    },\r\n    _processShowingHidingCancel: function(cancelArg, applyFunction, cancelFunction) {\r\n        if (isPromise(cancelArg)) {\r\n            cancelArg.then(shouldCancel => {\r\n                if (shouldCancel) {\r\n                    cancelFunction()\r\n                } else {\r\n                    applyFunction()\r\n                }\r\n            }).catch(() => applyFunction())\r\n        } else {\r\n            cancelArg ? cancelFunction() : applyFunction()\r\n        }\r\n    },\r\n    _show: function() {\r\n        this._showingDeferred = new Deferred;\r\n        this._parentHidden = this._isParentHidden();\r\n        this._showingDeferred.done(() => {\r\n            delete this._parentHidden\r\n        });\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return this._showingDeferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            this._showingDeferred.reject()\r\n        } else {\r\n            var show = () => {\r\n                this._stopAnimation();\r\n                this._toggleVisibility(true);\r\n                this._$content.css(\"visibility\", \"hidden\");\r\n                this._$content.toggleClass(INVISIBLE_STATE_CLASS, false);\r\n                this._updateZIndexStackPosition(true);\r\n                this._positionController.openingHandled();\r\n                this._renderContent();\r\n                var showingArgs = {\r\n                    cancel: false\r\n                };\r\n                this._actions.onShowing(showingArgs);\r\n                this._processShowingHidingCancel(showingArgs.cancel, () => {\r\n                    this._$content.css(\"visibility\", \"\");\r\n                    this._renderVisibility(true);\r\n                    this._animateShowing()\r\n                }, () => {\r\n                    this._toggleVisibility(false);\r\n                    this._$content.css(\"visibility\", \"\");\r\n                    this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\r\n                    this._isShowingActionCanceled = true;\r\n                    this._moveFromContainer();\r\n                    this.option(\"visible\", false);\r\n                    this._showingDeferred.resolve()\r\n                })\r\n            };\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return this._showingDeferred.promise()\r\n    },\r\n    _normalizeAnimation: function(showHideConfig, direction) {\r\n        if (showHideConfig) {\r\n            showHideConfig = extend({\r\n                type: \"slide\",\r\n                skipElementInitialStyles: true\r\n            }, showHideConfig);\r\n            if (isObject(showHideConfig[direction])) {\r\n                extend(showHideConfig[direction], {\r\n                    position: this._positionController.position\r\n                })\r\n            }\r\n        }\r\n        return showHideConfig\r\n    },\r\n    _animateHiding: function() {\r\n        var _this$_getAnimationCo2, _hideAnimation$start, _hideAnimation$comple, _this4 = this;\r\n        var animation = null !== (_this$_getAnimationCo2 = this._getAnimationConfig()) && void 0 !== _this$_getAnimationCo2 ? _this$_getAnimationCo2 : {};\r\n        var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\r\n        var startHideAnimation = null !== (_hideAnimation$start = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.start) && void 0 !== _hideAnimation$start ? _hideAnimation$start : noop;\r\n        var completeHideAnimation = null !== (_hideAnimation$comple = null === hideAnimation || void 0 === hideAnimation ? void 0 : hideAnimation.complete) && void 0 !== _hideAnimation$comple ? _hideAnimation$comple : noop;\r\n        this._animate(hideAnimation, (function() {\r\n            var _this4$_actions;\r\n            _this4._$content.css(\"pointerEvents\", \"\");\r\n            _this4._renderVisibility(false);\r\n            for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n                args[_key3] = arguments[_key3]\r\n            }\r\n            completeHideAnimation.call(_this4, ...args);\r\n            _this4._hideAnimationProcessing = false;\r\n            null === (_this4$_actions = _this4._actions) || void 0 === _this4$_actions ? void 0 : _this4$_actions.onHidden();\r\n            _this4._hidingDeferred.resolve()\r\n        }), (function() {\r\n            _this4._$content.css(\"pointerEvents\", \"none\");\r\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\r\n                args[_key4] = arguments[_key4]\r\n            }\r\n            startHideAnimation.call(_this4, ...args);\r\n            _this4._hideAnimationProcessing = true\r\n        }))\r\n    },\r\n    _hide: function() {\r\n        if (!this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        this._hidingDeferred = new Deferred;\r\n        var hidingArgs = {\r\n            cancel: false\r\n        };\r\n        if (this._isShowingActionCanceled) {\r\n            delete this._isShowingActionCanceled;\r\n            this._hidingDeferred.reject()\r\n        } else {\r\n            this._actions.onHiding(hidingArgs);\r\n            this._toggleSafariScrolling();\r\n            this._processShowingHidingCancel(hidingArgs.cancel, () => {\r\n                this._forceFocusLost();\r\n                this._toggleShading(false);\r\n                this._toggleSubscriptions(false);\r\n                this._stopShowTimer();\r\n                this._animateHiding()\r\n            }, () => {\r\n                this._isHidingActionCanceled = true;\r\n                this.option(\"visible\", true);\r\n                this._hidingDeferred.resolve()\r\n            })\r\n        }\r\n        return this._hidingDeferred.promise()\r\n    },\r\n    _forceFocusLost: function() {\r\n        var activeElement = domAdapter.getActiveElement();\r\n        var shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            resetActiveElement()\r\n        }\r\n    },\r\n    _animate: function(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || noop;\r\n            fx.animate(this._$content, extend({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    },\r\n    _stopAnimation: function() {\r\n        fx.stop(this._$content, true)\r\n    },\r\n    _renderVisibility: function(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            triggerHidingEvent(this._$content)\r\n        }\r\n        if (visible) {\r\n            this._checkContainerExists();\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            triggerShownEvent(this._$content);\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this._toggleVisibility(visible);\r\n            this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\r\n            this._updateZIndexStackPosition(visible);\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    },\r\n    _updateZIndexStackPosition: function(pushToStack) {\r\n        var overlayStack = this._overlayStack();\r\n        var index = overlayStack.indexOf(this);\r\n        if (pushToStack) {\r\n            if (-1 === index) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else if (-1 !== index) {\r\n            overlayStack.splice(index, 1);\r\n            zIndexPool.remove(this._zIndex)\r\n        }\r\n    },\r\n    _toggleShading: function(visible) {\r\n        this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\r\n        this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\r\n        this._toggleTabTerminator(visible && this.option(\"shading\"))\r\n    },\r\n    _initTabTerminatorHandler: function() {\r\n        var _this5 = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            _this5._tabKeyHandler(...arguments)\r\n        }\r\n    },\r\n    _toggleTabTerminator: function(enabled) {\r\n        var eventName = addNamespace(\"keydown\", this.NAME);\r\n        if (enabled) {\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    },\r\n    _findTabbableBounds: function() {\r\n        var $elements = this._$wrapper.find(\"*\");\r\n        var elementsCount = $elements.length - 1;\r\n        var result = {\r\n            first: null,\r\n            last: null\r\n        };\r\n        for (var i = 0; i <= elementsCount; i++) {\r\n            if (!result.first && $elements.eq(i).is(tabbable)) {\r\n                result.first = $elements.eq(i)\r\n            }\r\n            if (!result.last && $elements.eq(elementsCount - i).is(tabbable)) {\r\n                result.last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (result.first && result.last) {\r\n                break\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tabKeyHandler: function(e) {\r\n        if (normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        var tabbableElements = this._findTabbableBounds();\r\n        var $firstTabbable = tabbableElements.first;\r\n        var $lastTabbable = tabbableElements.last;\r\n        var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\r\n        var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\r\n        var isEmptyTabList = 0 === tabbableElements.length;\r\n        var isOutsideTarget = !contains(this._$wrapper.get(0), e.target);\r\n        if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\r\n            e.preventDefault();\r\n            var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            eventsEngine.trigger($focusElement, \"focusin\");\r\n            eventsEngine.trigger($focusElement, \"focus\")\r\n        }\r\n    },\r\n    _toggleSubscriptions: function(enabled) {\r\n        if (hasWindow()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleHideOnParentsScrollSubscription(enabled)\r\n        }\r\n    },\r\n    _toggleHideTopOverlayCallback: function(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe) {\r\n            hideTopOverlayCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            hideTopOverlayCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    },\r\n    _toggleHideOnParentsScrollSubscription: function(needSubscribe) {\r\n        var _this$_parentsScrollS;\r\n        var scrollEvent = addNamespace(\"scroll\", this.NAME);\r\n        var {\r\n            prevTargets: prevTargets,\r\n            handler: handler\r\n        } = null !== (_this$_parentsScrollS = this._parentsScrollSubscriptionInfo) && void 0 !== _this$_parentsScrollS ? _this$_parentsScrollS : {};\r\n        eventsEngine.off(prevTargets, scrollEvent, handler);\r\n        var closeOnScroll = this.option(\"hideOnParentScroll\");\r\n        if (needSubscribe && closeOnScroll) {\r\n            var $parents = this._hideOnParentScrollTarget().parents();\r\n            if (\"desktop\" === devices.real().deviceType) {\r\n                $parents = $parents.add(window)\r\n            }\r\n            eventsEngine.on($parents, scrollEvent, handler);\r\n            this._parentsScrollSubscriptionInfo.prevTargets = $parents\r\n        }\r\n    },\r\n    _hideOnParentsScrollHandler: function(e) {\r\n        var closeHandled = false;\r\n        var closeOnScroll = this.option(\"hideOnParentScroll\");\r\n        if (isFunction(closeOnScroll)) {\r\n            closeHandled = closeOnScroll(e)\r\n        }\r\n        if (!closeHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    },\r\n    _hideOnParentScrollTarget: function() {\r\n        return this._$wrapper\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    },\r\n    _appendContentToElement: function() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    },\r\n    _renderContent: function() {\r\n        var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        var isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        this.callBase()\r\n    },\r\n    _isParentHidden: function() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        var $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        var isHidden = false;\r\n        $parent.add($parent.parents()).each((function() {\r\n            var $element = $(this);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        }));\r\n        return isHidden || !domAdapter.getBody().contains($parent.get(0))\r\n    },\r\n    _renderContentImpl: function() {\r\n        var whenContentRendered = new Deferred;\r\n        var contentTemplateOption = this.option(\"contentTemplate\");\r\n        var contentTemplate = this._getTemplate(contentTemplateOption);\r\n        var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\r\n        contentTemplate && contentTemplate.render({\r\n            container: getPublicElement(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: () => {\r\n                whenContentRendered.resolve();\r\n                if (this.option(\"templatesRenderAsynchronously\")) {\r\n                    this._dimensionChanged()\r\n                }\r\n            }\r\n        });\r\n        this._renderScrollTerminator();\r\n        whenContentRendered.done(() => {\r\n            if (this.option(\"visible\")) {\r\n                this._moveToContainer()\r\n            }\r\n        });\r\n        return whenContentRendered.promise()\r\n    },\r\n    _getPositionControllerConfig() {\r\n        var {\r\n            container: container,\r\n            visualContainer: visualContainer,\r\n            _fixWrapperPosition: _fixWrapperPosition,\r\n            restorePosition: restorePosition\r\n        } = this.option();\r\n        return {\r\n            container: container,\r\n            visualContainer: visualContainer,\r\n            $root: this.$element(),\r\n            $content: this._$content,\r\n            $wrapper: this._$wrapper,\r\n            onPositioned: this._actions.onPositioned,\r\n            onVisualPositionChanged: this._actions.onVisualPositionChanged,\r\n            restorePosition: restorePosition,\r\n            _fixWrapperPosition: _fixWrapperPosition\r\n        }\r\n    },\r\n    _initPositionController() {\r\n        this._positionController = new OverlayPositionController(this._getPositionControllerConfig())\r\n    },\r\n    _renderScrollTerminator: function() {\r\n        var $scrollTerminator = this._$wrapper;\r\n        var terminatorEventName = addNamespace(dragEventMove, this.NAME);\r\n        eventsEngine.off($scrollTerminator, terminatorEventName);\r\n        eventsEngine.on($scrollTerminator, terminatorEventName, {\r\n            validate: function() {\r\n                return true\r\n            },\r\n            getDirection: function() {\r\n                return \"both\"\r\n            },\r\n            _toggleGestureCover: function(toggle) {\r\n                if (!toggle) {\r\n                    this._toggleGestureCoverImpl(toggle)\r\n                }\r\n            },\r\n            _clearSelection: noop,\r\n            isNative: true\r\n        }, e => {\r\n            var originalEvent = e.originalEvent.originalEvent;\r\n            var {\r\n                type: type\r\n            } = originalEvent || {};\r\n            var isWheel = \"wheel\" === type;\r\n            var isMouseMove = \"mousemove\" === type;\r\n            var isScrollByWheel = isWheel && !isCommandKeyPressed(e);\r\n            e._cancelPreventDefault = true;\r\n            if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    },\r\n    _moveFromContainer: function() {\r\n        this._$content.appendTo(this.$element());\r\n        this._$wrapper.detach()\r\n    },\r\n    _checkContainerExists() {\r\n        var $wrapperContainer = this._positionController.$container;\r\n        var containerExists = $wrapperContainer.length > 0;\r\n        if (!containerExists) {\r\n            uiErrors.log(\"W1021\", this.NAME)\r\n        }\r\n    },\r\n    _moveToContainer: function() {\r\n        var $wrapperContainer = this._positionController.$container;\r\n        this._$wrapper.appendTo($wrapperContainer);\r\n        this._$content.appendTo(this._$wrapper)\r\n    },\r\n    _renderGeometry: function(options) {\r\n        var {\r\n            visible: visible\r\n        } = this.option();\r\n        if (visible && hasWindow()) {\r\n            this._stopAnimation();\r\n            this._renderGeometryImpl()\r\n        }\r\n    },\r\n    _renderGeometryImpl: function() {\r\n        this._positionController.updatePosition(this._getOptionValue(\"position\"));\r\n        this._renderWrapper();\r\n        this._renderDimensions();\r\n        this._renderPosition()\r\n    },\r\n    _renderPosition() {\r\n        this._positionController.positionContent()\r\n    },\r\n    _isAllWindowCovered: function() {\r\n        return isWindow(this._positionController.$visualContainer.get(0)) && this.option(\"shading\")\r\n    },\r\n    _toggleSafariScrolling: function() {\r\n        var visible = this.option(\"visible\");\r\n        var $body = $(domAdapter.getBody());\r\n        var isIosSafari = \"ios\" === devices.real().platform && browser.safari;\r\n        var isAllWindowCovered = this._isAllWindowCovered();\r\n        var isScrollingPrevented = $body.hasClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n        var shouldPreventScrolling = !isScrollingPrevented && visible && isAllWindowCovered;\r\n        var shouldEnableScrolling = isScrollingPrevented && (!visible || !isAllWindowCovered || this._disposed);\r\n        if (isIosSafari) {\r\n            if (shouldEnableScrolling) {\r\n                $body.removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n                window.scrollTo(0, this._cachedBodyScrollTop);\r\n                this._cachedBodyScrollTop = void 0\r\n            } else if (shouldPreventScrolling) {\r\n                this._cachedBodyScrollTop = window.pageYOffset;\r\n                $body.addClass(PREVENT_SAFARI_SCROLLING_CLASS)\r\n            }\r\n        }\r\n    },\r\n    _renderWrapper: function() {\r\n        this._positionController.styleWrapperPosition();\r\n        this._renderWrapperDimensions();\r\n        this._positionController.positionWrapper()\r\n    },\r\n    _renderWrapperDimensions: function() {\r\n        var $visualContainer = this._positionController.$visualContainer;\r\n        var documentElement = domAdapter.getDocumentElement();\r\n        var isVisualContainerWindow = isWindow($visualContainer.get(0));\r\n        var wrapperWidth = isVisualContainerWindow ? documentElement.clientWidth : getOuterWidth($visualContainer);\r\n        var wrapperHeight = isVisualContainerWindow ? window.innerHeight : getOuterHeight($visualContainer);\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    },\r\n    _renderDimensions: function() {\r\n        var content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$content\r\n    },\r\n    _attachKeyboardEvents: function() {\r\n        this._keyboardListenerId = keyboard.on(this._$content, null, opts => this._keyboardHandler(opts))\r\n    },\r\n    _keyboardHandler: function(options) {\r\n        var e = options.originalEvent;\r\n        var $target = $(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            this.callBase(...arguments)\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.option(\"visible\")\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._renderGeometry()\r\n    },\r\n    _clean: function() {\r\n        var options = this.option();\r\n        if (!this._contentAlreadyRendered && !options.isRenovated) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    },\r\n    _stopShowTimer() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    },\r\n    _dispose: function() {\r\n        fx.stop(this._$content, false);\r\n        clearTimeout(this._deferShowTimer);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._actions = null;\r\n        this._parentsScrollSubscriptionInfo = null;\r\n        this.callBase();\r\n        this._toggleSafariScrolling();\r\n        this.option(\"visible\") && zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    },\r\n    _toggleRTLDirection: function(rtl) {\r\n        this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        if (this._getActionsList().includes(args.name)) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"animation\":\r\n                break;\r\n            case \"shading\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"shadingColor\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionController.updatePosition(this.option(\"position\"));\r\n                this._positionController.restorePositionOnNextRender(true);\r\n                this._renderGeometry();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done(() => {\r\n                    var _this$_animateDeferre;\r\n                    return null === (_this$_animateDeferre = this._animateDeferred) || void 0 === _this$_animateDeferre ? void 0 : _this$_animateDeferre.resolveWith(this)\r\n                }).fail(() => {\r\n                    var _this$_animateDeferre2;\r\n                    return null === (_this$_animateDeferre2 = this._animateDeferred) || void 0 === _this$_animateDeferre2 ? void 0 : _this$_animateDeferre2.reject()\r\n                });\r\n                break;\r\n            case \"container\":\r\n                this._positionController.updateContainer(value);\r\n                this._invalidate();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"visualContainer\":\r\n                this._positionController.updateVisualContainer(value);\r\n                this._renderWrapper();\r\n                this._toggleSafariScrolling();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"hideTopOverlayHandler\":\r\n                this._toggleHideTopOverlayCallback(false);\r\n                this._initHideTopOverlayHandler(args.value);\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"hideOnParentScroll\":\r\n                this._toggleHideOnParentsScrollSubscription(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"hideOnOutsideClick\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                this.callBase(args);\r\n                break;\r\n            case \"_fixWrapperPosition\":\r\n                this._positionController.fixWrapperPosition = value;\r\n                break;\r\n            case \"wrapperAttr\":\r\n                this._renderWrapperAttributes();\r\n                break;\r\n            case \"restorePosition\":\r\n                this._positionController.restorePosition = args.value;\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    toggle: function(showing) {\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        var result = new Deferred;\r\n        if (showing === this.option(\"visible\")) {\r\n            return result.resolveWith(this, [showing]).promise()\r\n        }\r\n        var animateDeferred = new Deferred;\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        animateDeferred.promise().done(() => {\r\n            delete this._animateDeferred;\r\n            result.resolveWith(this, [this.option(\"visible\")])\r\n        }).fail(() => {\r\n            delete this._animateDeferred;\r\n            result.reject()\r\n        });\r\n        return result.promise()\r\n    },\r\n    $content: function() {\r\n        return this._$content\r\n    },\r\n    show: function() {\r\n        return this.toggle(true)\r\n    },\r\n    hide: function() {\r\n        return this.toggle(false)\r\n    },\r\n    content: function() {\r\n        return getPublicElement(this._$content)\r\n    },\r\n    repaint: function() {\r\n        if (this._contentAlreadyRendered) {\r\n            this._positionController.restorePositionOnNextRender(true);\r\n            this._renderGeometry({\r\n                forceStopAnimation: true\r\n            });\r\n            triggerResizeEvent(this._$content)\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    }\r\n});\r\nOverlay.baseZIndex = zIndex => zIndexPool.base(zIndex);\r\nregisterComponent(\"dxOverlay\", Overlay);\r\nexport default Overlay;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}